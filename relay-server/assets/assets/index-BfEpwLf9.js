(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(o){if(o.ep)return;o.ep=!0;const h=n(o);fetch(o.href,h)}})();var zh={exports:{}},In={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function dy(){if(ug)return In;ug=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function n(l,o,h){var f=null;if(h!==void 0&&(f=""+h),o.key!==void 0&&(f=""+o.key),"key"in o){h={};for(var _ in o)_!=="key"&&(h[_]=o[_])}else h=o;return o=h.ref,{$$typeof:e,type:l,key:f,ref:o!==void 0?o:null,props:h}}return In.Fragment=i,In.jsx=n,In.jsxs=n,In}var fg;function _y(){return fg||(fg=1,zh.exports=dy()),zh.exports}var I=_y(),Nh={exports:{}},Zn={},Hh={exports:{}},Uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function my(){return dg||(dg=1,(function(e){function i(M,W){var Y=M.length;M.push(W);e:for(;0<Y;){var oe=Y-1>>>1,me=M[oe];if(0<o(me,W))M[oe]=W,M[Y]=me,Y=oe;else break e}}function n(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var W=M[0],Y=M.pop();if(Y!==W){M[0]=Y;e:for(var oe=0,me=M.length,E=me>>>1;oe<E;){var P=2*(oe+1)-1,Q=M[P],ie=P+1,ce=M[ie];if(0>o(Q,Y))ie<me&&0>o(ce,Q)?(M[oe]=ce,M[ie]=Y,oe=ie):(M[oe]=Q,M[P]=Y,oe=P);else if(ie<me&&0>o(ce,Y))M[oe]=ce,M[ie]=Y,oe=ie;else break e}}return W}function o(M,W){var Y=M.sortIndex-W.sortIndex;return Y!==0?Y:M.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,_=f.now();e.unstable_now=function(){return f.now()-_}}var m=[],d=[],S=1,p=null,y=3,w=!1,C=!1,D=!1,A=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function q(M){for(var W=n(d);W!==null;){if(W.callback===null)l(d);else if(W.startTime<=M)l(d),W.sortIndex=W.expirationTime,i(m,W);else break;W=n(d)}}function Z(M){if(D=!1,q(M),!C)if(n(m)!==null)C=!0,F||(F=!0,$());else{var W=n(d);W!==null&&ee(Z,W.startTime-M)}}var F=!1,H=-1,le=5,fe=-1;function Re(){return A?!0:!(e.unstable_now()-fe<le)}function de(){if(A=!1,F){var M=e.unstable_now();fe=M;var W=!0;try{e:{C=!1,D&&(D=!1,j(H),H=-1),w=!0;var Y=y;try{t:{for(q(M),p=n(m);p!==null&&!(p.expirationTime>M&&Re());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,y=p.priorityLevel;var me=oe(p.expirationTime<=M);if(M=e.unstable_now(),typeof me=="function"){p.callback=me,q(M),W=!0;break t}p===n(m)&&l(m),q(M)}else l(m);p=n(m)}if(p!==null)W=!0;else{var E=n(d);E!==null&&ee(Z,E.startTime-M),W=!1}}break e}finally{p=null,y=Y,w=!1}W=void 0}}finally{W?$():F=!1}}}var $;if(typeof R=="function")$=function(){R(de)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,te=X.port2;X.port1.onmessage=de,$=function(){te.postMessage(null)}}else $=function(){B(de,0)};function ee(M,W){H=B(function(){M(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(M){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Y=y;y=W;try{return M()}finally{y=Y}},e.unstable_requestPaint=function(){A=!0},e.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Y=y;y=M;try{return W()}finally{y=Y}},e.unstable_scheduleCallback=function(M,W,Y){var oe=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?oe+Y:oe):Y=oe,M){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,M={id:S++,callback:W,priorityLevel:M,startTime:Y,expirationTime:me,sortIndex:-1},Y>oe?(M.sortIndex=Y,i(d,M),n(m)===null&&M===n(d)&&(D?(j(H),H=-1):D=!0,ee(Z,Y-oe))):(M.sortIndex=me,i(m,M),C||w||(C=!0,F||(F=!0,$()))),M},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(M){var W=y;return function(){var Y=y;y=W;try{return M.apply(this,arguments)}finally{y=Y}}}})(Uh)),Uh}var _g;function gy(){return _g||(_g=1,Hh.exports=my()),Hh.exports}var qh={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function vy(){if(mg)return ge;mg=1;var e=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,A={};function B(E,P,Q){this.props=E,this.context=P,this.refs=A,this.updater=Q||C}B.prototype.isReactComponent={},B.prototype.setState=function(E,P){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,P,"setState")},B.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function j(){}j.prototype=B.prototype;function R(E,P,Q){this.props=E,this.context=P,this.refs=A,this.updater=Q||C}var q=R.prototype=new j;q.constructor=R,D(q,B.prototype),q.isPureReactComponent=!0;var Z=Array.isArray;function F(){}var H={H:null,A:null,T:null,S:null},le=Object.prototype.hasOwnProperty;function fe(E,P,Q){var ie=Q.ref;return{$$typeof:e,type:E,key:P,ref:ie!==void 0?ie:null,props:Q}}function Re(E,P){return fe(E.type,P,E.props)}function de(E){return typeof E=="object"&&E!==null&&E.$$typeof===e}function $(E){var P={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Q){return P[Q]})}var X=/\/+/g;function te(E,P){return typeof E=="object"&&E!==null&&E.key!=null?$(""+E.key):P.toString(36)}function ee(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(F,F):(E.status="pending",E.then(function(P){E.status==="pending"&&(E.status="fulfilled",E.value=P)},function(P){E.status==="pending"&&(E.status="rejected",E.reason=P)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function M(E,P,Q,ie,ce){var ue=typeof E;(ue==="undefined"||ue==="boolean")&&(E=null);var be=!1;if(E===null)be=!0;else switch(ue){case"bigint":case"string":case"number":be=!0;break;case"object":switch(E.$$typeof){case e:case i:be=!0;break;case S:return be=E._init,M(be(E._payload),P,Q,ie,ce)}}if(be)return ce=ce(E),be=ie===""?"."+te(E,0):ie,Z(ce)?(Q="",be!=null&&(Q=be.replace(X,"$&/")+"/"),M(ce,P,Q,"",function(bi){return bi})):ce!=null&&(de(ce)&&(ce=Re(ce,Q+(ce.key==null||E&&E.key===ce.key?"":(""+ce.key).replace(X,"$&/")+"/")+be)),P.push(ce)),1;be=0;var ot=ie===""?".":ie+":";if(Z(E))for(var Be=0;Be<E.length;Be++)ie=E[Be],ue=ot+te(ie,Be),be+=M(ie,P,Q,ue,ce);else if(Be=w(E),typeof Be=="function")for(E=Be.call(E),Be=0;!(ie=E.next()).done;)ie=ie.value,ue=ot+te(ie,Be++),be+=M(ie,P,Q,ue,ce);else if(ue==="object"){if(typeof E.then=="function")return M(ee(E),P,Q,ie,ce);throw P=String(E),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return be}function W(E,P,Q){if(E==null)return E;var ie=[],ce=0;return M(E,ie,"","",function(ue){return P.call(Q,ue,ce++)}),ie}function Y(E){if(E._status===-1){var P=E._result;P=P(),P.then(function(Q){(E._status===0||E._status===-1)&&(E._status=1,E._result=Q)},function(Q){(E._status===0||E._status===-1)&&(E._status=2,E._result=Q)}),E._status===-1&&(E._status=0,E._result=P)}if(E._status===1)return E._result.default;throw E._result}var oe=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},me={map:W,forEach:function(E,P,Q){W(E,function(){P.apply(this,arguments)},Q)},count:function(E){var P=0;return W(E,function(){P++}),P},toArray:function(E){return W(E,function(P){return P})||[]},only:function(E){if(!de(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return ge.Activity=p,ge.Children=me,ge.Component=B,ge.Fragment=n,ge.Profiler=o,ge.PureComponent=R,ge.StrictMode=l,ge.Suspense=m,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ge.__COMPILER_RUNTIME={__proto__:null,c:function(E){return H.H.useMemoCache(E)}},ge.cache=function(E){return function(){return E.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(E,P,Q){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var ie=D({},E.props),ce=E.key;if(P!=null)for(ue in P.key!==void 0&&(ce=""+P.key),P)!le.call(P,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&P.ref===void 0||(ie[ue]=P[ue]);var ue=arguments.length-2;if(ue===1)ie.children=Q;else if(1<ue){for(var be=Array(ue),ot=0;ot<ue;ot++)be[ot]=arguments[ot+2];ie.children=be}return fe(E.type,ce,ie)},ge.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:h,_context:E},E},ge.createElement=function(E,P,Q){var ie,ce={},ue=null;if(P!=null)for(ie in P.key!==void 0&&(ue=""+P.key),P)le.call(P,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=P[ie]);var be=arguments.length-2;if(be===1)ce.children=Q;else if(1<be){for(var ot=Array(be),Be=0;Be<be;Be++)ot[Be]=arguments[Be+2];ce.children=ot}if(E&&E.defaultProps)for(ie in be=E.defaultProps,be)ce[ie]===void 0&&(ce[ie]=be[ie]);return fe(E,ue,ce)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(E){return{$$typeof:_,render:E}},ge.isValidElement=de,ge.lazy=function(E){return{$$typeof:S,_payload:{_status:-1,_result:E},_init:Y}},ge.memo=function(E,P){return{$$typeof:d,type:E,compare:P===void 0?null:P}},ge.startTransition=function(E){var P=H.T,Q={};H.T=Q;try{var ie=E(),ce=H.S;ce!==null&&ce(Q,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(F,oe)}catch(ue){oe(ue)}finally{P!==null&&Q.types!==null&&(P.types=Q.types),H.T=P}},ge.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ge.use=function(E){return H.H.use(E)},ge.useActionState=function(E,P,Q){return H.H.useActionState(E,P,Q)},ge.useCallback=function(E,P){return H.H.useCallback(E,P)},ge.useContext=function(E){return H.H.useContext(E)},ge.useDebugValue=function(){},ge.useDeferredValue=function(E,P){return H.H.useDeferredValue(E,P)},ge.useEffect=function(E,P){return H.H.useEffect(E,P)},ge.useEffectEvent=function(E){return H.H.useEffectEvent(E)},ge.useId=function(){return H.H.useId()},ge.useImperativeHandle=function(E,P,Q){return H.H.useImperativeHandle(E,P,Q)},ge.useInsertionEffect=function(E,P){return H.H.useInsertionEffect(E,P)},ge.useLayoutEffect=function(E,P){return H.H.useLayoutEffect(E,P)},ge.useMemo=function(E,P){return H.H.useMemo(E,P)},ge.useOptimistic=function(E,P){return H.H.useOptimistic(E,P)},ge.useReducer=function(E,P,Q){return H.H.useReducer(E,P,Q)},ge.useRef=function(E){return H.H.useRef(E)},ge.useState=function(E){return H.H.useState(E)},ge.useSyncExternalStore=function(E,P,Q){return H.H.useSyncExternalStore(E,P,Q)},ge.useTransition=function(){return H.H.useTransition()},ge.version="19.2.4",ge}var gg;function Ku(){return gg||(gg=1,qh.exports=vy()),qh.exports}var jh={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function py(){if(vg)return Rt;vg=1;var e=Ku();function i(m){var d="https://react.dev/errors/"+m;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)d+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+m+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var l={d:{f:n,r:function(){throw Error(i(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(m,d,S){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:p==null?null:""+p,children:m,containerInfo:d,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(m,d){if(m==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,Rt.createPortal=function(m,d){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(i(299));return h(m,d,null,S)},Rt.flushSync=function(m){var d=f.T,S=l.p;try{if(f.T=null,l.p=2,m)return m()}finally{f.T=d,l.p=S,l.d.f()}},Rt.preconnect=function(m,d){typeof m=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,l.d.C(m,d))},Rt.prefetchDNS=function(m){typeof m=="string"&&l.d.D(m)},Rt.preinit=function(m,d){if(typeof m=="string"&&d&&typeof d.as=="string"){var S=d.as,p=_(S,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;S==="style"?l.d.S(m,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:w}):S==="script"&&l.d.X(m,{crossOrigin:p,integrity:y,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Rt.preinitModule=function(m,d){if(typeof m=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var S=_(d.as,d.crossOrigin);l.d.M(m,{crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&l.d.M(m)},Rt.preload=function(m,d){if(typeof m=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var S=d.as,p=_(S,d.crossOrigin);l.d.L(m,S,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Rt.preloadModule=function(m,d){if(typeof m=="string")if(d){var S=_(d.as,d.crossOrigin);l.d.m(m,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:S,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else l.d.m(m)},Rt.requestFormReset=function(m){l.d.r(m)},Rt.unstable_batchedUpdates=function(m,d){return m(d)},Rt.useFormState=function(m,d,S){return f.H.useFormState(m,d,S)},Rt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rt.version="19.2.4",Rt}var pg;function Sy(){if(pg)return jh.exports;pg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),jh.exports=py(),jh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function yy(){if(Sg)return Zn;Sg=1;var e=gy(),i=Ku(),n=Sy();function l(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function _(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(h(t)!==t)throw Error(l(188))}function d(t){var s=t.alternate;if(!s){if(s=h(t),s===null)throw Error(l(188));return s!==t?null:t}for(var r=t,a=s;;){var c=r.return;if(c===null)break;var u=c.alternate;if(u===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===r)return m(c),t;if(u===a)return m(c),s;u=u.sibling}throw Error(l(188))}if(r.return!==a.return)r=c,a=u;else{for(var g=!1,v=c.child;v;){if(v===r){g=!0,r=c,a=u;break}if(v===a){g=!0,a=c,r=u;break}v=v.sibling}if(!g){for(v=u.child;v;){if(v===r){g=!0,r=u,a=c;break}if(v===a){g=!0,a=u,r=c;break}v=v.sibling}if(!g)throw Error(l(189))}}if(r.alternate!==a)throw Error(l(190))}if(r.tag!==3)throw Error(l(188));return r.stateNode.current===r?t:s}function S(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=S(t),s!==null)return s;t=t.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),R=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function $(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var X=Symbol.for("react.client.reference");function te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===X?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case B:return"Profiler";case A:return"StrictMode";case Z:return"Suspense";case F:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case R:return t.displayName||"Context";case j:return(t._context.displayName||"Context")+".Consumer";case q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case H:return s=t.displayName||null,s!==null?s:te(t.type)||"Memo";case le:s=t._payload,t=t._init;try{return te(t(s))}catch{}}return null}var ee=Array.isArray,M=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},oe=[],me=-1;function E(t){return{current:t}}function P(t){0>me||(t.current=oe[me],oe[me]=null,me--)}function Q(t,s){me++,oe[me]=t.current,t.current=s}var ie=E(null),ce=E(null),ue=E(null),be=E(null);function ot(t,s){switch(Q(ue,s),Q(ce,t),Q(ie,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Lm(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Lm(s),t=zm(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(ie),Q(ie,t)}function Be(){P(ie),P(ce),P(ue)}function bi(t){t.memoizedState!==null&&Q(be,t);var s=ie.current,r=zm(s,t.type);s!==r&&(Q(ce,t),Q(ie,r))}function Ci(t){ce.current===t&&(P(ie),P(ce)),be.current===t&&(P(be),Gn._currentValue=Y)}var ei,De;function mi(t){if(ei===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ei=s&&s[1]||"",De=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ei+t+De}var po=!1;function So(t,s){if(!t||po)return"";po=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(s){var V=function(){throw Error()};if(Object.defineProperty(V.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(V,[])}catch(N){var z=N}Reflect.construct(t,[],V)}else{try{V.call()}catch(N){z=N}t.call(V.prototype)}}else{try{throw Error()}catch(N){z=N}(V=t())&&typeof V.catch=="function"&&V.catch(function(){})}}catch(N){if(N&&z&&typeof N.stack=="string")return[N.stack,z.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),g=u[0],v=u[1];if(g&&v){var b=g.split(`
`),L=v.split(`
`);for(c=a=0;a<b.length&&!b[a].includes("DetermineComponentFrameRoot");)a++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(a===b.length||c===L.length)for(a=b.length-1,c=L.length-1;1<=a&&0<=c&&b[a]!==L[c];)c--;for(;1<=a&&0<=c;a--,c--)if(b[a]!==L[c]){if(a!==1||c!==1)do if(a--,c--,0>c||b[a]!==L[c]){var U=`
`+b[a].replace(" at new "," at ");return t.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",t.displayName)),U}while(1<=a&&0<=c);break}}}finally{po=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?mi(r):""}function Kp(t,s){switch(t.tag){case 26:case 27:case 5:return mi(t.type);case 16:return mi("Lazy");case 13:return t.child!==s&&s!==null?mi("Suspense Fallback"):mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return So(t.type,!1);case 11:return So(t.type.render,!1);case 1:return So(t.type,!0);case 31:return mi("Activity");default:return""}}function uf(t){try{var s="",r=null;do s+=Kp(t,r),r=t,t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var yo=Object.prototype.hasOwnProperty,bo=e.unstable_scheduleCallback,Co=e.unstable_cancelCallback,Vp=e.unstable_shouldYield,Gp=e.unstable_requestPaint,Pt=e.unstable_now,Fp=e.unstable_getCurrentPriorityLevel,ff=e.unstable_ImmediatePriority,df=e.unstable_UserBlockingPriority,Cl=e.unstable_NormalPriority,Xp=e.unstable_LowPriority,_f=e.unstable_IdlePriority,$p=e.log,Ip=e.unstable_setDisableYieldValue,rn=null,Wt=null;function rs(t){if(typeof $p=="function"&&Ip(t),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(rn,t)}catch{}}var Yt=Math.clz32?Math.clz32:Jp,Zp=Math.log,Qp=Math.LN2;function Jp(t){return t>>>=0,t===0?32:31-(Zp(t)/Qp|0)|0}var wl=256,El=262144,xl=4194304;function Ns(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Tl(t,s,r){var a=t.pendingLanes;if(a===0)return 0;var c=0,u=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var v=a&134217727;return v!==0?(a=v&~u,a!==0?c=Ns(a):(g&=v,g!==0?c=Ns(g):r||(r=v&~t,r!==0&&(c=Ns(r))))):(v=a&~u,v!==0?c=Ns(v):g!==0?c=Ns(g):r||(r=a&~t,r!==0&&(c=Ns(r)))),c===0?0:s!==0&&s!==c&&(s&u)===0&&(u=c&-c,r=s&-s,u>=r||u===32&&(r&4194048)!==0)?s:c}function nn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function eS(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mf(){var t=xl;return xl<<=1,(xl&62914560)===0&&(xl=4194304),t}function wo(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function ln(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function tS(t,s,r,a,c,u){var g=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var v=t.entanglements,b=t.expirationTimes,L=t.hiddenUpdates;for(r=g&~r;0<r;){var U=31-Yt(r),V=1<<U;v[U]=0,b[U]=-1;var z=L[U];if(z!==null)for(L[U]=null,U=0;U<z.length;U++){var N=z[U];N!==null&&(N.lane&=-536870913)}r&=~V}a!==0&&gf(t,a,0),u!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=u&~(g&~s))}function gf(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var a=31-Yt(s);t.entangledLanes|=s,t.entanglements[a]=t.entanglements[a]|1073741824|r&261930}function vf(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-Yt(r),c=1<<a;c&s|t[a]&s&&(t[a]|=s),r&=~c}}function pf(t,s){var r=s&-s;return r=(r&42)!==0?1:Eo(r),(r&(t.suspendedLanes|s))!==0?0:r}function Eo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Sf(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:rg(t.type))}function yf(t,s){var r=W.p;try{return W.p=t,s()}finally{W.p=r}}var ns=Math.random().toString(36).slice(2),yt="__reactFiber$"+ns,Ot="__reactProps$"+ns,cr="__reactContainer$"+ns,To="__reactEvents$"+ns,iS="__reactListeners$"+ns,sS="__reactHandles$"+ns,bf="__reactResources$"+ns,an="__reactMarker$"+ns;function Ro(t){delete t[yt],delete t[Ot],delete t[To],delete t[iS],delete t[sS]}function hr(t){var s=t[yt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[cr]||r[yt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Wm(t);t!==null;){if(r=t[yt])return r;t=Wm(t)}return s}t=r,r=t.parentNode}return null}function ur(t){if(t=t[yt]||t[cr]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function on(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(l(33))}function fr(t){var s=t[bf];return s||(s=t[bf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function dt(t){t[an]=!0}var Cf=new Set,wf={};function Hs(t,s){dr(t,s),dr(t+"Capture",s)}function dr(t,s){for(wf[t]=s,t=0;t<s.length;t++)Cf.add(s[t])}var rS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ef={},xf={};function nS(t){return yo.call(xf,t)?!0:yo.call(Ef,t)?!1:rS.test(t)?xf[t]=!0:(Ef[t]=!0,!1)}function Rl(t,s,r){if(nS(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var a=s.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Dl(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function Li(t,s,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+a)}}function ti(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tf(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lS(t,s,r){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,u=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return c.call(this)},set:function(g){r=""+g,u.call(this,g)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(g){r=""+g},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Do(t){if(!t._valueTracker){var s=Tf(t)?"checked":"value";t._valueTracker=lS(t,s,""+t[s])}}function Rf(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=Tf(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function Ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var aS=/[\n"\\]/g;function ii(t){return t.replace(aS,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mo(t,s,r,a,c,u,g,v){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),s!=null?g==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ti(s)):t.value!==""+ti(s)&&(t.value=""+ti(s)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),s!=null?ko(t,g,ti(s)):r!=null?ko(t,g,ti(r)):a!=null&&t.removeAttribute("value"),c==null&&u!=null&&(t.defaultChecked=!!u),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.name=""+ti(v):t.removeAttribute("name")}function Df(t,s,r,a,c,u,g,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(t.type=u),s!=null||r!=null){if(!(u!=="submit"&&u!=="reset"||s!=null)){Do(t);return}r=r!=null?""+ti(r):"",s=s!=null?""+ti(s):r,v||s===t.value||(t.value=s),t.defaultValue=s}a=a??c,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=v?t.checked:!!a,t.defaultChecked=!!a,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g),Do(t)}function ko(t,s,r){s==="number"&&Ml(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function _r(t,s,r,a){if(t=t.options,s){s={};for(var c=0;c<r.length;c++)s["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=s.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&a&&(t[r].defaultSelected=!0)}else{for(r=""+ti(r),s=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,a&&(t[c].defaultSelected=!0);return}s!==null||t[c].disabled||(s=t[c])}s!==null&&(s.selected=!0)}}function Mf(t,s,r){if(s!=null&&(s=""+ti(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+ti(r):""}function kf(t,s,r,a){if(s==null){if(a!=null){if(r!=null)throw Error(l(92));if(ee(a)){if(1<a.length)throw Error(l(93));a=a[0]}r=a}r==null&&(r=""),s=r}r=ti(s),t.defaultValue=r,a=t.textContent,a===r&&a!==""&&a!==null&&(t.value=a),Do(t)}function mr(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var oS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Af(t,s,r){var a=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?a?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":a?t.setProperty(s,r):typeof r!="number"||r===0||oS.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function Bf(t,s,r){if(s!=null&&typeof s!="object")throw Error(l(62));if(t=t.style,r!=null){for(var a in r)!r.hasOwnProperty(a)||s!=null&&s.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var c in s)a=s[c],s.hasOwnProperty(c)&&r[c]!==a&&Af(t,c,a)}else for(var u in s)s.hasOwnProperty(u)&&Af(t,u,s[u])}function Ao(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(t){return hS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zi(){}var Bo=null;function Oo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gr=null,vr=null;function Of(t){var s=ur(t);if(s&&(t=s.stateNode)){var r=t[Ot]||null;e:switch(t=s.stateNode,s.type){case"input":if(Mo(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ii(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var c=a[Ot]||null;if(!c)throw Error(l(90));Mo(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(s=0;s<r.length;s++)a=r[s],a.form===t.form&&Rf(a)}break e;case"textarea":Mf(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&_r(t,!!r.multiple,s,!1)}}}var Lo=!1;function Lf(t,s,r){if(Lo)return t(s,r);Lo=!0;try{var a=t(s);return a}finally{if(Lo=!1,(gr!==null||vr!==null)&&(va(),gr&&(s=gr,t=vr,vr=gr=null,Of(s),t)))for(s=0;s<t.length;s++)Of(t[s])}}function cn(t,s){var r=t.stateNode;if(r===null)return null;var a=r[Ot]||null;if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(l(231,s,typeof r));return r}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zo=!1;if(Ni)try{var hn={};Object.defineProperty(hn,"passive",{get:function(){zo=!0}}),window.addEventListener("test",hn,hn),window.removeEventListener("test",hn,hn)}catch{zo=!1}var ls=null,No=null,Al=null;function zf(){if(Al)return Al;var t,s=No,r=s.length,a,c="value"in ls?ls.value:ls.textContent,u=c.length;for(t=0;t<r&&s[t]===c[t];t++);var g=r-t;for(a=1;a<=g&&s[r-a]===c[u-a];a++);return Al=c.slice(t,1<a?1-a:void 0)}function Bl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function Nf(){return!1}function Lt(t){function s(r,a,c,u,g){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var v in t)t.hasOwnProperty(v)&&(r=t[v],this[v]=r?r(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ol:Nf,this.isPropagationStopped=Nf,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),s}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=Lt(Us),un=p({},Us,{view:0,detail:0}),uS=Lt(un),Ho,Uo,fn,zl=p({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fn&&(fn&&t.type==="mousemove"?(Ho=t.screenX-fn.screenX,Uo=t.screenY-fn.screenY):Uo=Ho=0,fn=t),Ho)},movementY:function(t){return"movementY"in t?t.movementY:Uo}}),Hf=Lt(zl),fS=p({},zl,{dataTransfer:0}),dS=Lt(fS),_S=p({},un,{relatedTarget:0}),qo=Lt(_S),mS=p({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=Lt(mS),vS=p({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pS=Lt(vS),SS=p({},Us,{data:0}),Uf=Lt(SS),yS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wS(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=CS[t])?!!s[t]:!1}function jo(){return wS}var ES=p({},un,{key:function(t){if(t.key){var s=yS[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Bl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(t){return t.type==="keypress"?Bl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xS=Lt(ES),TS=p({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qf=Lt(TS),RS=p({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),DS=Lt(RS),MS=p({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),kS=Lt(MS),AS=p({},zl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BS=Lt(AS),OS=p({},Us,{newState:0,oldState:0}),LS=Lt(OS),zS=[9,13,27,32],Po=Ni&&"CompositionEvent"in window,dn=null;Ni&&"documentMode"in document&&(dn=document.documentMode);var NS=Ni&&"TextEvent"in window&&!dn,jf=Ni&&(!Po||dn&&8<dn&&11>=dn),Pf=" ",Wf=!1;function Yf(t,s){switch(t){case"keyup":return zS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pr=!1;function HS(t,s){switch(t){case"compositionend":return Kf(s);case"keypress":return s.which!==32?null:(Wf=!0,Pf);case"textInput":return t=s.data,t===Pf&&Wf?null:t;default:return null}}function US(t,s){if(pr)return t==="compositionend"||!Po&&Yf(t,s)?(t=zf(),Al=No=ls=null,pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return jf&&s.locale!=="ko"?null:s.data;default:return null}}var qS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!qS[t.type]:s==="textarea"}function Gf(t,s,r,a){gr?vr?vr.push(a):vr=[a]:gr=a,s=Ea(s,"onChange"),0<s.length&&(r=new Ll("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var _n=null,mn=null;function jS(t){Dm(t,0)}function Nl(t){var s=on(t);if(Rf(s))return t}function Ff(t,s){if(t==="change")return s}var Xf=!1;if(Ni){var Wo;if(Ni){var Yo="oninput"in document;if(!Yo){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),Yo=typeof $f.oninput=="function"}Wo=Yo}else Wo=!1;Xf=Wo&&(!document.documentMode||9<document.documentMode)}function If(){_n&&(_n.detachEvent("onpropertychange",Zf),mn=_n=null)}function Zf(t){if(t.propertyName==="value"&&Nl(mn)){var s=[];Gf(s,mn,t,Oo(t)),Lf(jS,s)}}function PS(t,s,r){t==="focusin"?(If(),_n=s,mn=r,_n.attachEvent("onpropertychange",Zf)):t==="focusout"&&If()}function WS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nl(mn)}function YS(t,s){if(t==="click")return Nl(s)}function KS(t,s){if(t==="input"||t==="change")return Nl(s)}function VS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Kt=typeof Object.is=="function"?Object.is:VS;function gn(t,s){if(Kt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!yo.call(s,c)||!Kt(t[c],s[c]))return!1}return!0}function Qf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jf(t,s){var r=Qf(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qf(r)}}function ed(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ed(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function td(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ml(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Ml(t.document)}return s}function Ko(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var GS=Ni&&"documentMode"in document&&11>=document.documentMode,Sr=null,Vo=null,vn=null,Go=!1;function id(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Go||Sr==null||Sr!==Ml(a)||(a=Sr,"selectionStart"in a&&Ko(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),vn&&gn(vn,a)||(vn=a,a=Ea(Vo,"onSelect"),0<a.length&&(s=new Ll("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Sr)))}function qs(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var yr={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Fo={},sd={};Ni&&(sd=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function js(t){if(Fo[t])return Fo[t];if(!yr[t])return t;var s=yr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in sd)return Fo[t]=s[r];return t}var rd=js("animationend"),nd=js("animationiteration"),ld=js("animationstart"),FS=js("transitionrun"),XS=js("transitionstart"),$S=js("transitioncancel"),ad=js("transitionend"),od=new Map,Xo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xo.push("scrollEnd");function gi(t,s){od.set(t,s),Hs(s,[t])}var Hl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},si=[],br=0,$o=0;function Ul(){for(var t=br,s=$o=br=0;s<t;){var r=si[s];si[s++]=null;var a=si[s];si[s++]=null;var c=si[s];si[s++]=null;var u=si[s];if(si[s++]=null,a!==null&&c!==null){var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}u!==0&&cd(r,c,u)}}function ql(t,s,r,a){si[br++]=t,si[br++]=s,si[br++]=r,si[br++]=a,$o|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function Io(t,s,r,a){return ql(t,s,r,a),jl(t)}function Ps(t,s){return ql(t,null,null,s),jl(t)}function cd(t,s,r){t.lanes|=r;var a=t.alternate;a!==null&&(a.lanes|=r);for(var c=!1,u=t.return;u!==null;)u.childLanes|=r,a=u.alternate,a!==null&&(a.childLanes|=r),u.tag===22&&(t=u.stateNode,t===null||t._visibility&1||(c=!0)),t=u,u=u.return;return t.tag===3?(u=t.stateNode,c&&s!==null&&(c=31-Yt(r),t=u.hiddenUpdates,a=t[c],a===null?t[c]=[s]:a.push(s),s.lane=r|536870912),u):null}function jl(t){if(50<qn)throw qn=0,nh=null,Error(l(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Cr={};function IS(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,s,r,a){return new IS(t,s,r,a)}function Zo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hi(t,s){var r=t.alternate;return r===null?(r=Vt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function hd(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Pl(t,s,r,a,c,u){var g=0;if(a=t,typeof t=="function")Zo(t)&&(g=1);else if(typeof t=="string")g=ty(t,r,ie.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=Vt(31,r,s,c),t.elementType=fe,t.lanes=u,t;case D:return Ws(r.children,c,u,s);case A:g=8,c|=24;break;case B:return t=Vt(12,r,s,c|2),t.elementType=B,t.lanes=u,t;case Z:return t=Vt(13,r,s,c),t.elementType=Z,t.lanes=u,t;case F:return t=Vt(19,r,s,c),t.elementType=F,t.lanes=u,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:g=10;break e;case j:g=9;break e;case q:g=11;break e;case H:g=14;break e;case le:g=16,a=null;break e}g=29,r=Error(l(130,t===null?"null":typeof t,"")),a=null}return s=Vt(g,r,s,c),s.elementType=t,s.type=a,s.lanes=u,s}function Ws(t,s,r,a){return t=Vt(7,t,a,s),t.lanes=r,t}function Qo(t,s,r){return t=Vt(6,t,null,s),t.lanes=r,t}function ud(t){var s=Vt(18,null,null,0);return s.stateNode=t,s}function Jo(t,s,r){return s=Vt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var fd=new WeakMap;function ri(t,s){if(typeof t=="object"&&t!==null){var r=fd.get(t);return r!==void 0?r:(s={value:t,source:s,stack:uf(s)},fd.set(t,s),s)}return{value:t,source:s,stack:uf(s)}}var wr=[],Er=0,Wl=null,pn=0,ni=[],li=0,as=null,wi=1,Ei="";function Ui(t,s){wr[Er++]=pn,wr[Er++]=Wl,Wl=t,pn=s}function dd(t,s,r){ni[li++]=wi,ni[li++]=Ei,ni[li++]=as,as=t;var a=wi;t=Ei;var c=32-Yt(a)-1;a&=~(1<<c),r+=1;var u=32-Yt(s)+c;if(30<u){var g=c-c%5;u=(a&(1<<g)-1).toString(32),a>>=g,c-=g,wi=1<<32-Yt(s)+c|r<<c|a,Ei=u+t}else wi=1<<u|r<<c|a,Ei=t}function ec(t){t.return!==null&&(Ui(t,1),dd(t,1,0))}function tc(t){for(;t===Wl;)Wl=wr[--Er],wr[Er]=null,pn=wr[--Er],wr[Er]=null;for(;t===as;)as=ni[--li],ni[li]=null,Ei=ni[--li],ni[li]=null,wi=ni[--li],ni[li]=null}function _d(t,s){ni[li++]=wi,ni[li++]=Ei,ni[li++]=as,wi=s.id,Ei=s.overflow,as=t}var bt=null,je=null,Te=!1,os=null,ai=!1,ic=Error(l(519));function cs(t){var s=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sn(ri(s,t)),ic}function md(t){var s=t.stateNode,r=t.type,a=t.memoizedProps;switch(s[yt]=t,s[Ot]=a,r){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(r=0;r<Pn.length;r++)we(Pn[r],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":we("invalid",s),Df(s,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":we("invalid",s);break;case"textarea":we("invalid",s),kf(s,a.value,a.defaultValue,a.children)}r=a.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||a.suppressHydrationWarning===!0||Bm(s.textContent,r)?(a.popover!=null&&(we("beforetoggle",s),we("toggle",s)),a.onScroll!=null&&we("scroll",s),a.onScrollEnd!=null&&we("scrollend",s),a.onClick!=null&&(s.onclick=zi),s=!0):s=!1,s||cs(t,!0)}function gd(t){for(bt=t.return;bt;)switch(bt.tag){case 5:case 31:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:bt=bt.return}}function xr(t){if(t!==bt)return!1;if(!Te)return gd(t),Te=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||yh(t.type,t.memoizedProps)),r=!r),r&&je&&cs(t),gd(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));je=Pm(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));je=Pm(t)}else s===27?(s=je,ws(t.type)?(t=xh,xh=null,je=t):je=s):je=bt?ci(t.stateNode.nextSibling):null;return!0}function Ys(){je=bt=null,Te=!1}function sc(){var t=os;return t!==null&&(Ut===null?Ut=t:Ut.push.apply(Ut,t),os=null),t}function Sn(t){os===null?os=[t]:os.push(t)}var rc=E(null),Ks=null,qi=null;function hs(t,s,r){Q(rc,s._currentValue),s._currentValue=r}function ji(t){t._currentValue=rc.current,P(rc)}function nc(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function lc(t,s,r,a){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var u=c.dependencies;if(u!==null){var g=c.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=c;for(var b=0;b<s.length;b++)if(v.context===s[b]){u.lanes|=r,v=u.alternate,v!==null&&(v.lanes|=r),nc(u.return,r,t),a||(g=null);break e}u=v.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(l(341));g.lanes|=r,u=g.alternate,u!==null&&(u.lanes|=r),nc(g,r,t),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===t){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function Tr(t,s,r,a){t=null;for(var c=s,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(l(387));if(g=g.memoizedProps,g!==null){var v=c.type;Kt(c.pendingProps.value,g.value)||(t!==null?t.push(v):t=[v])}}else if(c===be.current){if(g=c.alternate,g===null)throw Error(l(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Gn):t=[Gn])}c=c.return}t!==null&&lc(s,t,r,a),s.flags|=262144}function Yl(t){for(t=t.firstContext;t!==null;){if(!Kt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vs(t){Ks=t,qi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return vd(Ks,t)}function Kl(t,s){return Ks===null&&Vs(t),vd(t,s)}function vd(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},qi===null){if(t===null)throw Error(l(308));qi=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else qi=qi.next=s;return r}var ZS=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,a){t.push(a)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},QS=e.unstable_scheduleCallback,JS=e.unstable_NormalPriority,it={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ac(){return{controller:new ZS,data:new Map,refCount:0}}function yn(t){t.refCount--,t.refCount===0&&QS(JS,function(){t.controller.abort()})}var bn=null,oc=0,Rr=0,Dr=null;function e0(t,s){if(bn===null){var r=bn=[];oc=0,Rr=uh(),Dr={status:"pending",value:void 0,then:function(a){r.push(a)}}}return oc++,s.then(pd,pd),s}function pd(){if(--oc===0&&bn!==null){Dr!==null&&(Dr.status="fulfilled");var t=bn;bn=null,Rr=0,Dr=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function t0(t,s){var r=[],a={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){a.status="fulfilled",a.value=s;for(var c=0;c<r.length;c++)(0,r[c])(s)},function(c){for(a.status="rejected",a.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),a}var Sd=M.S;M.S=function(t,s){im=Pt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&e0(t,s),Sd!==null&&Sd(t,s)};var Gs=E(null);function cc(){var t=Gs.current;return t!==null?t:qe.pooledCache}function Vl(t,s){s===null?Q(Gs,Gs.current):Q(Gs,s.pool)}function yd(){var t=cc();return t===null?null:{parent:it._currentValue,pool:t}}var Mr=Error(l(460)),hc=Error(l(474)),Gl=Error(l(542)),Fl={then:function(){}};function bd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cd(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(zi,zi),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ed(t),t;default:if(typeof s.status=="string")s.then(zi,zi);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=s,t.status="pending",t.then(function(a){if(s.status==="pending"){var c=s;c.status="fulfilled",c.value=a}},function(a){if(s.status==="pending"){var c=s;c.status="rejected",c.reason=a}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ed(t),t}throw Xs=s,Mr}}function Fs(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Xs=r,Mr):r}}var Xs=null;function wd(){if(Xs===null)throw Error(l(459));var t=Xs;return Xs=null,t}function Ed(t){if(t===Mr||t===Gl)throw Error(l(483))}var kr=null,Cn=0;function Xl(t){var s=Cn;return Cn+=1,kr===null&&(kr=[]),Cd(kr,t,s)}function wn(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function $l(t,s){throw s.$$typeof===y?Error(l(525)):(t=Object.prototype.toString.call(s),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function xd(t){function s(k,x){if(t){var O=k.deletions;O===null?(k.deletions=[x],k.flags|=16):O.push(x)}}function r(k,x){if(!t)return null;for(;x!==null;)s(k,x),x=x.sibling;return null}function a(k){for(var x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function c(k,x){return k=Hi(k,x),k.index=0,k.sibling=null,k}function u(k,x,O){return k.index=O,t?(O=k.alternate,O!==null?(O=O.index,O<x?(k.flags|=67108866,x):O):(k.flags|=67108866,x)):(k.flags|=1048576,x)}function g(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function v(k,x,O,K){return x===null||x.tag!==6?(x=Qo(O,k.mode,K),x.return=k,x):(x=c(x,O),x.return=k,x)}function b(k,x,O,K){var ae=O.type;return ae===D?U(k,x,O.props.children,K,O.key):x!==null&&(x.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===le&&Fs(ae)===x.type)?(x=c(x,O.props),wn(x,O),x.return=k,x):(x=Pl(O.type,O.key,O.props,null,k.mode,K),wn(x,O),x.return=k,x)}function L(k,x,O,K){return x===null||x.tag!==4||x.stateNode.containerInfo!==O.containerInfo||x.stateNode.implementation!==O.implementation?(x=Jo(O,k.mode,K),x.return=k,x):(x=c(x,O.children||[]),x.return=k,x)}function U(k,x,O,K,ae){return x===null||x.tag!==7?(x=Ws(O,k.mode,K,ae),x.return=k,x):(x=c(x,O),x.return=k,x)}function V(k,x,O){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Qo(""+x,k.mode,O),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case w:return O=Pl(x.type,x.key,x.props,null,k.mode,O),wn(O,x),O.return=k,O;case C:return x=Jo(x,k.mode,O),x.return=k,x;case le:return x=Fs(x),V(k,x,O)}if(ee(x)||$(x))return x=Ws(x,k.mode,O,null),x.return=k,x;if(typeof x.then=="function")return V(k,Xl(x),O);if(x.$$typeof===R)return V(k,Kl(k,x),O);$l(k,x)}return null}function z(k,x,O,K){var ae=x!==null?x.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return ae!==null?null:v(k,x,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return O.key===ae?b(k,x,O,K):null;case C:return O.key===ae?L(k,x,O,K):null;case le:return O=Fs(O),z(k,x,O,K)}if(ee(O)||$(O))return ae!==null?null:U(k,x,O,K,null);if(typeof O.then=="function")return z(k,x,Xl(O),K);if(O.$$typeof===R)return z(k,x,Kl(k,O),K);$l(k,O)}return null}function N(k,x,O,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return k=k.get(O)||null,v(x,k,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return k=k.get(K.key===null?O:K.key)||null,b(x,k,K,ae);case C:return k=k.get(K.key===null?O:K.key)||null,L(x,k,K,ae);case le:return K=Fs(K),N(k,x,O,K,ae)}if(ee(K)||$(K))return k=k.get(O)||null,U(x,k,K,ae,null);if(typeof K.then=="function")return N(k,x,O,Xl(K),ae);if(K.$$typeof===R)return N(k,x,O,Kl(x,K),ae);$l(x,K)}return null}function re(k,x,O,K){for(var ae=null,Me=null,ne=x,pe=x=0,xe=null;ne!==null&&pe<O.length;pe++){ne.index>pe?(xe=ne,ne=null):xe=ne.sibling;var ke=z(k,ne,O[pe],K);if(ke===null){ne===null&&(ne=xe);break}t&&ne&&ke.alternate===null&&s(k,ne),x=u(ke,x,pe),Me===null?ae=ke:Me.sibling=ke,Me=ke,ne=xe}if(pe===O.length)return r(k,ne),Te&&Ui(k,pe),ae;if(ne===null){for(;pe<O.length;pe++)ne=V(k,O[pe],K),ne!==null&&(x=u(ne,x,pe),Me===null?ae=ne:Me.sibling=ne,Me=ne);return Te&&Ui(k,pe),ae}for(ne=a(ne);pe<O.length;pe++)xe=N(ne,k,pe,O[pe],K),xe!==null&&(t&&xe.alternate!==null&&ne.delete(xe.key===null?pe:xe.key),x=u(xe,x,pe),Me===null?ae=xe:Me.sibling=xe,Me=xe);return t&&ne.forEach(function(Ds){return s(k,Ds)}),Te&&Ui(k,pe),ae}function he(k,x,O,K){if(O==null)throw Error(l(151));for(var ae=null,Me=null,ne=x,pe=x=0,xe=null,ke=O.next();ne!==null&&!ke.done;pe++,ke=O.next()){ne.index>pe?(xe=ne,ne=null):xe=ne.sibling;var Ds=z(k,ne,ke.value,K);if(Ds===null){ne===null&&(ne=xe);break}t&&ne&&Ds.alternate===null&&s(k,ne),x=u(Ds,x,pe),Me===null?ae=Ds:Me.sibling=Ds,Me=Ds,ne=xe}if(ke.done)return r(k,ne),Te&&Ui(k,pe),ae;if(ne===null){for(;!ke.done;pe++,ke=O.next())ke=V(k,ke.value,K),ke!==null&&(x=u(ke,x,pe),Me===null?ae=ke:Me.sibling=ke,Me=ke);return Te&&Ui(k,pe),ae}for(ne=a(ne);!ke.done;pe++,ke=O.next())ke=N(ne,k,pe,ke.value,K),ke!==null&&(t&&ke.alternate!==null&&ne.delete(ke.key===null?pe:ke.key),x=u(ke,x,pe),Me===null?ae=ke:Me.sibling=ke,Me=ke);return t&&ne.forEach(function(fy){return s(k,fy)}),Te&&Ui(k,pe),ae}function He(k,x,O,K){if(typeof O=="object"&&O!==null&&O.type===D&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case w:e:{for(var ae=O.key;x!==null;){if(x.key===ae){if(ae=O.type,ae===D){if(x.tag===7){r(k,x.sibling),K=c(x,O.props.children),K.return=k,k=K;break e}}else if(x.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===le&&Fs(ae)===x.type){r(k,x.sibling),K=c(x,O.props),wn(K,O),K.return=k,k=K;break e}r(k,x);break}else s(k,x);x=x.sibling}O.type===D?(K=Ws(O.props.children,k.mode,K,O.key),K.return=k,k=K):(K=Pl(O.type,O.key,O.props,null,k.mode,K),wn(K,O),K.return=k,k=K)}return g(k);case C:e:{for(ae=O.key;x!==null;){if(x.key===ae)if(x.tag===4&&x.stateNode.containerInfo===O.containerInfo&&x.stateNode.implementation===O.implementation){r(k,x.sibling),K=c(x,O.children||[]),K.return=k,k=K;break e}else{r(k,x);break}else s(k,x);x=x.sibling}K=Jo(O,k.mode,K),K.return=k,k=K}return g(k);case le:return O=Fs(O),He(k,x,O,K)}if(ee(O))return re(k,x,O,K);if($(O)){if(ae=$(O),typeof ae!="function")throw Error(l(150));return O=ae.call(O),he(k,x,O,K)}if(typeof O.then=="function")return He(k,x,Xl(O),K);if(O.$$typeof===R)return He(k,x,Kl(k,O),K);$l(k,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,x!==null&&x.tag===6?(r(k,x.sibling),K=c(x,O),K.return=k,k=K):(r(k,x),K=Qo(O,k.mode,K),K.return=k,k=K),g(k)):r(k,x)}return function(k,x,O,K){try{Cn=0;var ae=He(k,x,O,K);return kr=null,ae}catch(ne){if(ne===Mr||ne===Gl)throw ne;var Me=Vt(29,ne,null,k.mode);return Me.lanes=K,Me.return=k,Me}finally{}}}var $s=xd(!0),Td=xd(!1),us=!1;function uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ae&2)!==0){var c=a.pending;return c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s,s=jl(t),cd(t,null,r),s}return ql(t,a,s,r),jl(t)}function En(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,vf(t,r)}}function dc(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var g={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};u===null?c=u=g:u=u.next=g,r=r.next}while(r!==null);u===null?c=u=s:u=u.next=s}else c=u=s;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var _c=!1;function xn(){if(_c){var t=Dr;if(t!==null)throw t}}function Tn(t,s,r,a){_c=!1;var c=t.updateQueue;us=!1;var u=c.firstBaseUpdate,g=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var b=v,L=b.next;b.next=null,g===null?u=L:g.next=L,g=b;var U=t.alternate;U!==null&&(U=U.updateQueue,v=U.lastBaseUpdate,v!==g&&(v===null?U.firstBaseUpdate=L:v.next=L,U.lastBaseUpdate=b))}if(u!==null){var V=c.baseState;g=0,U=L=b=null,v=u;do{var z=v.lane&-536870913,N=z!==v.lane;if(N?(Ee&z)===z:(a&z)===z){z!==0&&z===Rr&&(_c=!0),U!==null&&(U=U.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var re=t,he=v;z=s;var He=r;switch(he.tag){case 1:if(re=he.payload,typeof re=="function"){V=re.call(He,V,z);break e}V=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=he.payload,z=typeof re=="function"?re.call(He,V,z):re,z==null)break e;V=p({},V,z);break e;case 2:us=!0}}z=v.callback,z!==null&&(t.flags|=64,N&&(t.flags|=8192),N=c.callbacks,N===null?c.callbacks=[z]:N.push(z))}else N={lane:z,tag:v.tag,payload:v.payload,callback:v.callback,next:null},U===null?(L=U=N,b=V):U=U.next=N,g|=z;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;N=v,v=N.next,N.next=null,c.lastBaseUpdate=N,c.shared.pending=null}}while(!0);U===null&&(b=V),c.baseState=b,c.firstBaseUpdate=L,c.lastBaseUpdate=U,u===null&&(c.shared.lanes=0),ps|=g,t.lanes=g,t.memoizedState=V}}function Rd(t,s){if(typeof t!="function")throw Error(l(191,t));t.call(s)}function Dd(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Rd(r[t],s)}var Ar=E(null),Il=E(0);function Md(t,s){t=$i,Q(Il,t),Q(Ar,s),$i=t|s.baseLanes}function mc(){Q(Il,$i),Q(Ar,Ar.current)}function gc(){$i=Il.current,P(Ar),P(Il)}var Gt=E(null),oi=null;function _s(t){var s=t.alternate;Q(Je,Je.current&1),Q(Gt,t),oi===null&&(s===null||Ar.current!==null||s.memoizedState!==null)&&(oi=t)}function vc(t){Q(Je,Je.current),Q(Gt,t),oi===null&&(oi=t)}function kd(t){t.tag===22?(Q(Je,Je.current),Q(Gt,t),oi===null&&(oi=t)):ms()}function ms(){Q(Je,Je.current),Q(Gt,Gt.current)}function Ft(t){P(Gt),oi===t&&(oi=null),P(Je)}var Je=E(0);function Zl(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||wh(r)||Eh(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pi=0,ve=null,ze=null,st=null,Ql=!1,Br=!1,Is=!1,Jl=0,Rn=0,Or=null,i0=0;function $e(){throw Error(l(321))}function pc(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Kt(t[r],s[r]))return!1;return!0}function Sc(t,s,r,a,c,u){return Pi=u,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=t===null||t.memoizedState===null?d_:Lc,Is=!1,u=r(a,c),Is=!1,Br&&(u=Bd(s,r,a,c)),Ad(t),u}function Ad(t){M.H=kn;var s=ze!==null&&ze.next!==null;if(Pi=0,st=ze=ve=null,Ql=!1,Rn=0,Or=null,s)throw Error(l(300));t===null||rt||(t=t.dependencies,t!==null&&Yl(t)&&(rt=!0))}function Bd(t,s,r,a){ve=t;var c=0;do{if(Br&&(Or=null),Rn=0,Br=!1,25<=c)throw Error(l(301));if(c+=1,st=ze=null,t.updateQueue!=null){var u=t.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}M.H=__,u=s(r,a)}while(Br);return u}function s0(){var t=M.H,s=t.useState()[0];return s=typeof s.then=="function"?Dn(s):s,t=t.useState()[0],(ze!==null?ze.memoizedState:null)!==t&&(ve.flags|=1024),s}function yc(){var t=Jl!==0;return Jl=0,t}function bc(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Cc(t){if(Ql){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ql=!1}Pi=0,st=ze=ve=null,Br=!1,Rn=Jl=0,Or=null}function Mt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?ve.memoizedState=st=t:st=st.next=t,st}function et(){if(ze===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var s=st===null?ve.memoizedState:st.next;if(s!==null)st=s,ze=t;else{if(t===null)throw ve.alternate===null?Error(l(467)):Error(l(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},st===null?ve.memoizedState=st=t:st=st.next=t}return st}function ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dn(t){var s=Rn;return Rn+=1,Or===null&&(Or=[]),t=Cd(Or,t,s),s=ve,(st===null?s.memoizedState:st.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?d_:Lc),t}function ta(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Dn(t);if(t.$$typeof===R)return Ct(t)}throw Error(l(438,String(t)))}function wc(t){var s=null,r=ve.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var a=ve.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(s={data:a.data.map(function(c){return c.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=ea(),ve.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),a=0;a<t;a++)r[a]=Re;return s.index++,r}function Wi(t,s){return typeof s=="function"?s(t):s}function ia(t){var s=et();return Ec(s,ze,t)}function Ec(t,s,r){var a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=r;var c=t.baseQueue,u=a.pending;if(u!==null){if(c!==null){var g=c.next;c.next=u.next,u.next=g}s.baseQueue=c=u,a.pending=null}if(u=t.baseState,c===null)t.memoizedState=u;else{s=c.next;var v=g=null,b=null,L=s,U=!1;do{var V=L.lane&-536870913;if(V!==L.lane?(Ee&V)===V:(Pi&V)===V){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),V===Rr&&(U=!0);else if((Pi&z)===z){L=L.next,z===Rr&&(U=!0);continue}else V={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(v=b=V,g=u):b=b.next=V,ve.lanes|=z,ps|=z;V=L.action,Is&&r(u,V),u=L.hasEagerState?L.eagerState:r(u,V)}else z={lane:V,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(v=b=z,g=u):b=b.next=z,ve.lanes|=V,ps|=V;L=L.next}while(L!==null&&L!==s);if(b===null?g=u:b.next=v,!Kt(u,t.memoizedState)&&(rt=!0,U&&(r=Dr,r!==null)))throw r;t.memoizedState=u,t.baseState=g,t.baseQueue=b,a.lastRenderedState=u}return c===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function xc(t){var s=et(),r=s.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=t;var a=r.dispatch,c=r.pending,u=s.memoizedState;if(c!==null){r.pending=null;var g=c=c.next;do u=t(u,g.action),g=g.next;while(g!==c);Kt(u,s.memoizedState)||(rt=!0),s.memoizedState=u,s.baseQueue===null&&(s.baseState=u),r.lastRenderedState=u}return[u,a]}function Od(t,s,r){var a=ve,c=et(),u=Te;if(u){if(r===void 0)throw Error(l(407));r=r()}else r=s();var g=!Kt((ze||c).memoizedState,r);if(g&&(c.memoizedState=r,rt=!0),c=c.queue,Dc(Nd.bind(null,a,c,t),[t]),c.getSnapshot!==s||g||st!==null&&st.memoizedState.tag&1){if(a.flags|=2048,Lr(9,{destroy:void 0},zd.bind(null,a,c,r,s),null),qe===null)throw Error(l(349));u||(Pi&127)!==0||Ld(a,s,r)}return r}function Ld(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=ve.updateQueue,s===null?(s=ea(),ve.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function zd(t,s,r,a){s.value=r,s.getSnapshot=a,Hd(s)&&Ud(t)}function Nd(t,s,r){return r(function(){Hd(s)&&Ud(t)})}function Hd(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Kt(t,r)}catch{return!0}}function Ud(t){var s=Ps(t,2);s!==null&&qt(s,t,2)}function Tc(t){var s=Mt();if(typeof t=="function"){var r=t;if(t=r(),Is){rs(!0);try{r()}finally{rs(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},s}function qd(t,s,r,a){return t.baseState=r,Ec(t,ze,typeof a=="function"?a:Wi)}function r0(t,s,r,a,c){if(na(t))throw Error(l(485));if(t=s.action,t!==null){var u={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};M.T!==null?r(!0):u.isTransition=!1,a(u),r=s.pending,r===null?(u.next=s.pending=u,jd(s,u)):(u.next=r.next,s.pending=r.next=u)}}function jd(t,s){var r=s.action,a=s.payload,c=t.state;if(s.isTransition){var u=M.T,g={};M.T=g;try{var v=r(c,a),b=M.S;b!==null&&b(g,v),Pd(t,s,v)}catch(L){Rc(t,s,L)}finally{u!==null&&g.types!==null&&(u.types=g.types),M.T=u}}else try{u=r(c,a),Pd(t,s,u)}catch(L){Rc(t,s,L)}}function Pd(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(a){Wd(t,s,a)},function(a){return Rc(t,s,a)}):Wd(t,s,r)}function Wd(t,s,r){s.status="fulfilled",s.value=r,Yd(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,jd(t,r)))}function Rc(t,s,r){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do s.status="rejected",s.reason=r,Yd(s),s=s.next;while(s!==a)}t.action=null}function Yd(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Kd(t,s){return s}function Vd(t,s){if(Te){var r=qe.formState;if(r!==null){e:{var a=ve;if(Te){if(je){t:{for(var c=je,u=ai;c.nodeType!==8;){if(!u){c=null;break t}if(c=ci(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){je=ci(c.nextSibling),a=c.data==="F!";break e}}cs(a)}a=!1}a&&(s=r[0])}}return r=Mt(),r.memoizedState=r.baseState=s,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:s},r.queue=a,r=h_.bind(null,ve,a),a.dispatch=r,a=Tc(!1),u=Oc.bind(null,ve,!1,a.queue),a=Mt(),c={state:s,dispatch:null,action:t,pending:null},a.queue=c,r=r0.bind(null,ve,c,u,r),c.dispatch=r,a.memoizedState=t,[s,r,!1]}function Gd(t){var s=et();return Fd(s,ze,t)}function Fd(t,s,r){if(s=Ec(t,s,Kd)[0],t=ia(Wi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var a=Dn(s)}catch(g){throw g===Mr?Gl:g}else a=s;s=et();var c=s.queue,u=c.dispatch;return r!==s.memoizedState&&(ve.flags|=2048,Lr(9,{destroy:void 0},n0.bind(null,c,r),null)),[a,u,t]}function n0(t,s){t.action=s}function Xd(t){var s=et(),r=ze;if(r!==null)return Fd(s,r,t);et(),s=s.memoizedState,r=et();var a=r.queue.dispatch;return r.memoizedState=t,[s,a,!1]}function Lr(t,s,r,a){return t={tag:t,create:r,deps:a,inst:s,next:null},s=ve.updateQueue,s===null&&(s=ea(),ve.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t),t}function $d(){return et().memoizedState}function sa(t,s,r,a){var c=Mt();ve.flags|=t,c.memoizedState=Lr(1|s,{destroy:void 0},r,a===void 0?null:a)}function ra(t,s,r,a){var c=et();a=a===void 0?null:a;var u=c.memoizedState.inst;ze!==null&&a!==null&&pc(a,ze.memoizedState.deps)?c.memoizedState=Lr(s,u,r,a):(ve.flags|=t,c.memoizedState=Lr(1|s,u,r,a))}function Id(t,s){sa(8390656,8,t,s)}function Dc(t,s){ra(2048,8,t,s)}function l0(t){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=ea(),ve.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function Zd(t){var s=et().memoizedState;return l0({ref:s,nextImpl:t}),function(){if((Ae&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}function Qd(t,s){return ra(4,2,t,s)}function Jd(t,s){return ra(4,4,t,s)}function e_(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function t_(t,s,r){r=r!=null?r.concat([t]):null,ra(4,4,e_.bind(null,s,t),r)}function Mc(){}function i_(t,s){var r=et();s=s===void 0?null:s;var a=r.memoizedState;return s!==null&&pc(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function s_(t,s){var r=et();s=s===void 0?null:s;var a=r.memoizedState;if(s!==null&&pc(s,a[1]))return a[0];if(a=t(),Is){rs(!0);try{t()}finally{rs(!1)}}return r.memoizedState=[a,s],a}function kc(t,s,r){return r===void 0||(Pi&1073741824)!==0&&(Ee&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=rm(),ve.lanes|=t,ps|=t,r)}function r_(t,s,r,a){return Kt(r,s)?r:Ar.current!==null?(t=kc(t,r,a),Kt(t,s)||(rt=!0),t):(Pi&42)===0||(Pi&1073741824)!==0&&(Ee&261930)===0?(rt=!0,t.memoizedState=r):(t=rm(),ve.lanes|=t,ps|=t,s)}function n_(t,s,r,a,c){var u=W.p;W.p=u!==0&&8>u?u:8;var g=M.T,v={};M.T=v,Oc(t,!1,s,r);try{var b=c(),L=M.S;if(L!==null&&L(v,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var U=t0(b,a);Mn(t,s,U,It(t))}else Mn(t,s,a,It(t))}catch(V){Mn(t,s,{then:function(){},status:"rejected",reason:V},It())}finally{W.p=u,g!==null&&v.types!==null&&(g.types=v.types),M.T=g}}function a0(){}function Ac(t,s,r,a){if(t.tag!==5)throw Error(l(476));var c=l_(t).queue;n_(t,c,s,Y,r===null?a0:function(){return a_(t),r(a)})}function l_(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:Y},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function a_(t){var s=l_(t);s.next===null&&(s=t.alternate.memoizedState),Mn(t,s.next.queue,{},It())}function Bc(){return Ct(Gn)}function o_(){return et().memoizedState}function c_(){return et().memoizedState}function o0(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=It();t=fs(r);var a=ds(s,t,r);a!==null&&(qt(a,s,r),En(a,s,r)),s={cache:ac()},t.payload=s;return}s=s.return}}function c0(t,s,r){var a=It();r={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},na(t)?u_(s,r):(r=Io(t,s,r,a),r!==null&&(qt(r,t,a),f_(r,s,a)))}function h_(t,s,r){var a=It();Mn(t,s,r,a)}function Mn(t,s,r,a){var c={lane:a,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(t))u_(s,c);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=s.lastRenderedReducer,u!==null))try{var g=s.lastRenderedState,v=u(g,r);if(c.hasEagerState=!0,c.eagerState=v,Kt(v,g))return ql(t,s,c,0),qe===null&&Ul(),!1}catch{}finally{}if(r=Io(t,s,c,a),r!==null)return qt(r,t,a),f_(r,s,a),!0}return!1}function Oc(t,s,r,a){if(a={lane:2,revertLane:uh(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},na(t)){if(s)throw Error(l(479))}else s=Io(t,r,a,2),s!==null&&qt(s,t,2)}function na(t){var s=t.alternate;return t===ve||s!==null&&s===ve}function u_(t,s){Br=Ql=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function f_(t,s,r){if((r&4194048)!==0){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,vf(t,r)}}var kn={readContext:Ct,use:ta,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e};kn.useEffectEvent=$e;var d_={readContext:Ct,use:ta,useCallback:function(t,s){return Mt().memoizedState=[t,s===void 0?null:s],t},useContext:Ct,useEffect:Id,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,sa(4194308,4,e_.bind(null,s,t),r)},useLayoutEffect:function(t,s){return sa(4194308,4,t,s)},useInsertionEffect:function(t,s){sa(4,2,t,s)},useMemo:function(t,s){var r=Mt();s=s===void 0?null:s;var a=t();if(Is){rs(!0);try{t()}finally{rs(!1)}}return r.memoizedState=[a,s],a},useReducer:function(t,s,r){var a=Mt();if(r!==void 0){var c=r(s);if(Is){rs(!0);try{r(s)}finally{rs(!1)}}}else c=s;return a.memoizedState=a.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},a.queue=t,t=t.dispatch=c0.bind(null,ve,t),[a.memoizedState,t]},useRef:function(t){var s=Mt();return t={current:t},s.memoizedState=t},useState:function(t){t=Tc(t);var s=t.queue,r=h_.bind(null,ve,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:Mc,useDeferredValue:function(t,s){var r=Mt();return kc(r,t,s)},useTransition:function(){var t=Tc(!1);return t=n_.bind(null,ve,t.queue,!0,!1),Mt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var a=ve,c=Mt();if(Te){if(r===void 0)throw Error(l(407));r=r()}else{if(r=s(),qe===null)throw Error(l(349));(Ee&127)!==0||Ld(a,s,r)}c.memoizedState=r;var u={value:r,getSnapshot:s};return c.queue=u,Id(Nd.bind(null,a,u,t),[t]),a.flags|=2048,Lr(9,{destroy:void 0},zd.bind(null,a,u,r,s),null),r},useId:function(){var t=Mt(),s=qe.identifierPrefix;if(Te){var r=Ei,a=wi;r=(a&~(1<<32-Yt(a)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Jl++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=i0++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Bc,useFormState:Vd,useActionState:Vd,useOptimistic:function(t){var s=Mt();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Oc.bind(null,ve,!0,r),r.dispatch=s,[t,s]},useMemoCache:wc,useCacheRefresh:function(){return Mt().memoizedState=o0.bind(null,ve)},useEffectEvent:function(t){var s=Mt(),r={impl:t};return s.memoizedState=r,function(){if((Ae&2)!==0)throw Error(l(440));return r.impl.apply(void 0,arguments)}}},Lc={readContext:Ct,use:ta,useCallback:i_,useContext:Ct,useEffect:Dc,useImperativeHandle:t_,useInsertionEffect:Qd,useLayoutEffect:Jd,useMemo:s_,useReducer:ia,useRef:$d,useState:function(){return ia(Wi)},useDebugValue:Mc,useDeferredValue:function(t,s){var r=et();return r_(r,ze.memoizedState,t,s)},useTransition:function(){var t=ia(Wi)[0],s=et().memoizedState;return[typeof t=="boolean"?t:Dn(t),s]},useSyncExternalStore:Od,useId:o_,useHostTransitionStatus:Bc,useFormState:Gd,useActionState:Gd,useOptimistic:function(t,s){var r=et();return qd(r,ze,t,s)},useMemoCache:wc,useCacheRefresh:c_};Lc.useEffectEvent=Zd;var __={readContext:Ct,use:ta,useCallback:i_,useContext:Ct,useEffect:Dc,useImperativeHandle:t_,useInsertionEffect:Qd,useLayoutEffect:Jd,useMemo:s_,useReducer:xc,useRef:$d,useState:function(){return xc(Wi)},useDebugValue:Mc,useDeferredValue:function(t,s){var r=et();return ze===null?kc(r,t,s):r_(r,ze.memoizedState,t,s)},useTransition:function(){var t=xc(Wi)[0],s=et().memoizedState;return[typeof t=="boolean"?t:Dn(t),s]},useSyncExternalStore:Od,useId:o_,useHostTransitionStatus:Bc,useFormState:Xd,useActionState:Xd,useOptimistic:function(t,s){var r=et();return ze!==null?qd(r,ze,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:wc,useCacheRefresh:c_};__.useEffectEvent=Zd;function zc(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:p({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Nc={enqueueSetState:function(t,s,r){t=t._reactInternals;var a=It(),c=fs(a);c.payload=s,r!=null&&(c.callback=r),s=ds(t,c,a),s!==null&&(qt(s,t,a),En(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=It(),c=fs(a);c.tag=1,c.payload=s,r!=null&&(c.callback=r),s=ds(t,c,a),s!==null&&(qt(s,t,a),En(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=It(),a=fs(r);a.tag=2,s!=null&&(a.callback=s),s=ds(t,a,r),s!==null&&(qt(s,t,r),En(s,t,r))}};function m_(t,s,r,a,c,u,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,u,g):s.prototype&&s.prototype.isPureReactComponent?!gn(r,a)||!gn(c,u):!0}function g_(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Nc.enqueueReplaceState(s,s.state,null)}function Zs(t,s){var r=s;if("ref"in s){r={};for(var a in s)a!=="ref"&&(r[a]=s[a])}if(t=t.defaultProps){r===s&&(r=p({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}function v_(t){Hl(t)}function p_(t){console.error(t)}function S_(t){Hl(t)}function la(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(a){setTimeout(function(){throw a})}}function y_(t,s,r){try{var a=t.onCaughtError;a(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Hc(t,s,r){return r=fs(r),r.tag=3,r.payload={element:null},r.callback=function(){la(t,s)},r}function b_(t){return t=fs(t),t.tag=3,t}function C_(t,s,r,a){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var u=a.value;t.payload=function(){return c(u)},t.callback=function(){y_(s,r,a)}}var g=r.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){y_(s,r,a),typeof c!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})})}function h0(t,s,r,a,c){if(r.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(s=r.alternate,s!==null&&Tr(s,r,c,!0),r=Gt.current,r!==null){switch(r.tag){case 31:case 13:return oi===null?pa():r.alternate===null&&Ie===0&&(Ie=3),r.flags&=-257,r.flags|=65536,r.lanes=c,a===Fl?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([a]):s.add(a),oh(t,a,c)),!1;case 22:return r.flags|=65536,a===Fl?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([a])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([a]):r.add(a)),oh(t,a,c)),!1}throw Error(l(435,r.tag))}return oh(t,a,c),pa(),!1}if(Te)return s=Gt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=c,a!==ic&&(t=Error(l(422),{cause:a}),Sn(ri(t,r)))):(a!==ic&&(s=Error(l(423),{cause:a}),Sn(ri(s,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,a=ri(a,r),c=Hc(t.stateNode,a,c),dc(t,c),Ie!==4&&(Ie=2)),!1;var u=Error(l(520),{cause:a});if(u=ri(u,r),Un===null?Un=[u]:Un.push(u),Ie!==4&&(Ie=2),s===null)return!0;a=ri(a,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=Hc(r.stateNode,a,t),dc(r,t),!1;case 1:if(s=r.type,u=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ss===null||!Ss.has(u))))return r.flags|=65536,c&=-c,r.lanes|=c,c=b_(c),C_(c,t,r,a),dc(r,c),!1}r=r.return}while(r!==null);return!1}var Uc=Error(l(461)),rt=!1;function wt(t,s,r,a){s.child=t===null?Td(s,null,r,a):$s(s,t.child,r,a)}function w_(t,s,r,a,c){r=r.render;var u=s.ref;if("ref"in a){var g={};for(var v in a)v!=="ref"&&(g[v]=a[v])}else g=a;return Vs(s),a=Sc(t,s,r,g,u,c),v=yc(),t!==null&&!rt?(bc(t,s,c),Yi(t,s,c)):(Te&&v&&ec(s),s.flags|=1,wt(t,s,a,c),s.child)}function E_(t,s,r,a,c){if(t===null){var u=r.type;return typeof u=="function"&&!Zo(u)&&u.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=u,x_(t,s,u,a,c)):(t=Pl(r.type,null,a,s,s.mode,c),t.ref=s.ref,t.return=s,s.child=t)}if(u=t.child,!Gc(t,c)){var g=u.memoizedProps;if(r=r.compare,r=r!==null?r:gn,r(g,a)&&t.ref===s.ref)return Yi(t,s,c)}return s.flags|=1,t=Hi(u,a),t.ref=s.ref,t.return=s,s.child=t}function x_(t,s,r,a,c){if(t!==null){var u=t.memoizedProps;if(gn(u,a)&&t.ref===s.ref)if(rt=!1,s.pendingProps=a=u,Gc(t,c))(t.flags&131072)!==0&&(rt=!0);else return s.lanes=t.lanes,Yi(t,s,c)}return qc(t,s,r,a,c)}function T_(t,s,r,a){var c=a.children,u=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((s.flags&128)!==0){if(u=u!==null?u.baseLanes|r:r,t!==null){for(a=s.child=t.child,c=0;a!==null;)c=c|a.lanes|a.childLanes,a=a.sibling;a=c&~u}else a=0,s.child=null;return R_(t,s,u,r,a)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vl(s,u!==null?u.cachePool:null),u!==null?Md(s,u):mc(),kd(s);else return a=s.lanes=536870912,R_(t,s,u!==null?u.baseLanes|r:r,r,a)}else u!==null?(Vl(s,u.cachePool),Md(s,u),ms(),s.memoizedState=null):(t!==null&&Vl(s,null),mc(),ms());return wt(t,s,c,r),s.child}function An(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function R_(t,s,r,a,c){var u=cc();return u=u===null?null:{parent:it._currentValue,pool:u},s.memoizedState={baseLanes:r,cachePool:u},t!==null&&Vl(s,null),mc(),kd(s),t!==null&&Tr(t,s,a,!0),s.childLanes=c,null}function aa(t,s){return s=ca({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function D_(t,s,r){return $s(s,t.child,null,r),t=aa(s,s.pendingProps),t.flags|=2,Ft(s),s.memoizedState=null,t}function u0(t,s,r){var a=s.pendingProps,c=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Te){if(a.mode==="hidden")return t=aa(s,a),s.lanes=536870912,An(null,t);if(vc(s),(t=je)?(t=jm(t,ai),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:as!==null?{id:wi,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},r=ud(t),r.return=s,s.child=r,bt=s,je=null)):t=null,t===null)throw cs(s);return s.lanes=536870912,null}return aa(s,a)}var u=t.memoizedState;if(u!==null){var g=u.dehydrated;if(vc(s),c)if(s.flags&256)s.flags&=-257,s=D_(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(l(558));else if(rt||Tr(t,s,r,!1),c=(r&t.childLanes)!==0,rt||c){if(a=qe,a!==null&&(g=pf(a,r),g!==0&&g!==u.retryLane))throw u.retryLane=g,Ps(t,g),qt(a,t,g),Uc;pa(),s=D_(t,s,r)}else t=u.treeContext,je=ci(g.nextSibling),bt=s,Te=!0,os=null,ai=!1,t!==null&&_d(s,t),s=aa(s,a),s.flags|=4096;return s}return t=Hi(t.child,{mode:a.mode,children:a.children}),t.ref=s.ref,s.child=t,t.return=s,t}function oa(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(l(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function qc(t,s,r,a,c){return Vs(s),r=Sc(t,s,r,a,void 0,c),a=yc(),t!==null&&!rt?(bc(t,s,c),Yi(t,s,c)):(Te&&a&&ec(s),s.flags|=1,wt(t,s,r,c),s.child)}function M_(t,s,r,a,c,u){return Vs(s),s.updateQueue=null,r=Bd(s,a,r,c),Ad(t),a=yc(),t!==null&&!rt?(bc(t,s,u),Yi(t,s,u)):(Te&&a&&ec(s),s.flags|=1,wt(t,s,r,u),s.child)}function k_(t,s,r,a,c){if(Vs(s),s.stateNode===null){var u=Cr,g=r.contextType;typeof g=="object"&&g!==null&&(u=Ct(g)),u=new r(a,u),s.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Nc,s.stateNode=u,u._reactInternals=s,u=s.stateNode,u.props=a,u.state=s.memoizedState,u.refs={},uc(s),g=r.contextType,u.context=typeof g=="object"&&g!==null?Ct(g):Cr,u.state=s.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(zc(s,r,g,a),u.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&Nc.enqueueReplaceState(u,u.state,null),Tn(s,a,u,c),xn(),u.state=s.memoizedState),typeof u.componentDidMount=="function"&&(s.flags|=4194308),a=!0}else if(t===null){u=s.stateNode;var v=s.memoizedProps,b=Zs(r,v);u.props=b;var L=u.context,U=r.contextType;g=Cr,typeof U=="object"&&U!==null&&(g=Ct(U));var V=r.getDerivedStateFromProps;U=typeof V=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=s.pendingProps!==v,U||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||L!==g)&&g_(s,u,a,g),us=!1;var z=s.memoizedState;u.state=z,Tn(s,a,u,c),xn(),L=s.memoizedState,v||z!==L||us?(typeof V=="function"&&(zc(s,r,V,a),L=s.memoizedState),(b=us||m_(s,r,b,a,z,L,g))?(U||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=L),u.props=a,u.state=L,u.context=g,a=b):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{u=s.stateNode,fc(t,s),g=s.memoizedProps,U=Zs(r,g),u.props=U,V=s.pendingProps,z=u.context,L=r.contextType,b=Cr,typeof L=="object"&&L!==null&&(b=Ct(L)),v=r.getDerivedStateFromProps,(L=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==V||z!==b)&&g_(s,u,a,b),us=!1,z=s.memoizedState,u.state=z,Tn(s,a,u,c),xn();var N=s.memoizedState;g!==V||z!==N||us||t!==null&&t.dependencies!==null&&Yl(t.dependencies)?(typeof v=="function"&&(zc(s,r,v,a),N=s.memoizedState),(U=us||m_(s,r,U,a,z,N,b)||t!==null&&t.dependencies!==null&&Yl(t.dependencies))?(L||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,N,b),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,N,b)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===t.memoizedProps&&z===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&z===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=N),u.props=a,u.state=N,u.context=b,a=U):(typeof u.componentDidUpdate!="function"||g===t.memoizedProps&&z===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&z===t.memoizedState||(s.flags|=1024),a=!1)}return u=a,oa(t,s),a=(s.flags&128)!==0,u||a?(u=s.stateNode,r=a&&typeof r.getDerivedStateFromError!="function"?null:u.render(),s.flags|=1,t!==null&&a?(s.child=$s(s,t.child,null,c),s.child=$s(s,null,r,c)):wt(t,s,r,c),s.memoizedState=u.state,t=s.child):t=Yi(t,s,c),t}function A_(t,s,r,a){return Ys(),s.flags|=256,wt(t,s,r,a),s.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pc(t){return{baseLanes:t,cachePool:yd()}}function Wc(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=$t),t}function B_(t,s,r){var a=s.pendingProps,c=!1,u=(s.flags&128)!==0,g;if((g=u)||(g=t!==null&&t.memoizedState===null?!1:(Je.current&2)!==0),g&&(c=!0,s.flags&=-129),g=(s.flags&32)!==0,s.flags&=-33,t===null){if(Te){if(c?_s(s):ms(),(t=je)?(t=jm(t,ai),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:as!==null?{id:wi,overflow:Ei}:null,retryLane:536870912,hydrationErrors:null},r=ud(t),r.return=s,s.child=r,bt=s,je=null)):t=null,t===null)throw cs(s);return Eh(t)?s.lanes=32:s.lanes=536870912,null}var v=a.children;return a=a.fallback,c?(ms(),c=s.mode,v=ca({mode:"hidden",children:v},c),a=Ws(a,c,r,null),v.return=s,a.return=s,v.sibling=a,s.child=v,a=s.child,a.memoizedState=Pc(r),a.childLanes=Wc(t,g,r),s.memoizedState=jc,An(null,a)):(_s(s),Yc(s,v))}var b=t.memoizedState;if(b!==null&&(v=b.dehydrated,v!==null)){if(u)s.flags&256?(_s(s),s.flags&=-257,s=Kc(t,s,r)):s.memoizedState!==null?(ms(),s.child=t.child,s.flags|=128,s=null):(ms(),v=a.fallback,c=s.mode,a=ca({mode:"visible",children:a.children},c),v=Ws(v,c,r,null),v.flags|=2,a.return=s,v.return=s,a.sibling=v,s.child=a,$s(s,t.child,null,r),a=s.child,a.memoizedState=Pc(r),a.childLanes=Wc(t,g,r),s.memoizedState=jc,s=An(null,a));else if(_s(s),Eh(v)){if(g=v.nextSibling&&v.nextSibling.dataset,g)var L=g.dgst;g=L,a=Error(l(419)),a.stack="",a.digest=g,Sn({value:a,source:null,stack:null}),s=Kc(t,s,r)}else if(rt||Tr(t,s,r,!1),g=(r&t.childLanes)!==0,rt||g){if(g=qe,g!==null&&(a=pf(g,r),a!==0&&a!==b.retryLane))throw b.retryLane=a,Ps(t,a),qt(g,t,a),Uc;wh(v)||pa(),s=Kc(t,s,r)}else wh(v)?(s.flags|=192,s.child=t.child,s=null):(t=b.treeContext,je=ci(v.nextSibling),bt=s,Te=!0,os=null,ai=!1,t!==null&&_d(s,t),s=Yc(s,a.children),s.flags|=4096);return s}return c?(ms(),v=a.fallback,c=s.mode,b=t.child,L=b.sibling,a=Hi(b,{mode:"hidden",children:a.children}),a.subtreeFlags=b.subtreeFlags&65011712,L!==null?v=Hi(L,v):(v=Ws(v,c,r,null),v.flags|=2),v.return=s,a.return=s,a.sibling=v,s.child=a,An(null,a),a=s.child,v=t.child.memoizedState,v===null?v=Pc(r):(c=v.cachePool,c!==null?(b=it._currentValue,c=c.parent!==b?{parent:b,pool:b}:c):c=yd(),v={baseLanes:v.baseLanes|r,cachePool:c}),a.memoizedState=v,a.childLanes=Wc(t,g,r),s.memoizedState=jc,An(t.child,a)):(_s(s),r=t.child,t=r.sibling,r=Hi(r,{mode:"visible",children:a.children}),r.return=s,r.sibling=null,t!==null&&(g=s.deletions,g===null?(s.deletions=[t],s.flags|=16):g.push(t)),s.child=r,s.memoizedState=null,r)}function Yc(t,s){return s=ca({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ca(t,s){return t=Vt(22,t,null,s),t.lanes=0,t}function Kc(t,s,r){return $s(s,t.child,null,r),t=Yc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function O_(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),nc(t.return,s,r)}function Vc(t,s,r,a,c,u){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c,treeForkCount:u}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=a,g.tail=r,g.tailMode=c,g.treeForkCount=u)}function L_(t,s,r){var a=s.pendingProps,c=a.revealOrder,u=a.tail;a=a.children;var g=Je.current,v=(g&2)!==0;if(v?(g=g&1|2,s.flags|=128):g&=1,Q(Je,g),wt(t,s,a,r),a=Te?pn:0,!v&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O_(t,r,s);else if(t.tag===19)O_(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(r=s.child,c=null;r!==null;)t=r.alternate,t!==null&&Zl(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=s.child,s.child=null):(c=r.sibling,r.sibling=null),Vc(s,!1,c,r,u,a);break;case"backwards":case"unstable_legacy-backwards":for(r=null,c=s.child,s.child=null;c!==null;){if(t=c.alternate,t!==null&&Zl(t)===null){s.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}Vc(s,!0,r,null,u,a);break;case"together":Vc(s,!1,null,null,void 0,a);break;default:s.memoizedState=null}return s.child}function Yi(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ps|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Tr(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(l(153));if(s.child!==null){for(t=s.child,r=Hi(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Hi(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Gc(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Yl(t)))}function f0(t,s,r){switch(s.tag){case 3:ot(s,s.stateNode.containerInfo),hs(s,it,t.memoizedState.cache),Ys();break;case 27:case 5:bi(s);break;case 4:ot(s,s.stateNode.containerInfo);break;case 10:hs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,vc(s),null;break;case 13:var a=s.memoizedState;if(a!==null)return a.dehydrated!==null?(_s(s),s.flags|=128,null):(r&s.child.childLanes)!==0?B_(t,s,r):(_s(s),t=Yi(t,s,r),t!==null?t.sibling:null);_s(s);break;case 19:var c=(t.flags&128)!==0;if(a=(r&s.childLanes)!==0,a||(Tr(t,s,r,!1),a=(r&s.childLanes)!==0),c){if(a)return L_(t,s,r);s.flags|=128}if(c=s.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Q(Je,Je.current),a)break;return null;case 22:return s.lanes=0,T_(t,s,r,s.pendingProps);case 24:hs(s,it,t.memoizedState.cache)}return Yi(t,s,r)}function z_(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)rt=!0;else{if(!Gc(t,r)&&(s.flags&128)===0)return rt=!1,f0(t,s,r);rt=(t.flags&131072)!==0}else rt=!1,Te&&(s.flags&1048576)!==0&&dd(s,pn,s.index);switch(s.lanes=0,s.tag){case 16:e:{var a=s.pendingProps;if(t=Fs(s.elementType),s.type=t,typeof t=="function")Zo(t)?(a=Zs(t,a),s.tag=1,s=k_(null,s,t,a,r)):(s.tag=0,s=qc(null,s,t,a,r));else{if(t!=null){var c=t.$$typeof;if(c===q){s.tag=11,s=w_(null,s,t,a,r);break e}else if(c===H){s.tag=14,s=E_(null,s,t,a,r);break e}}throw s=te(t)||t,Error(l(306,s,""))}}return s;case 0:return qc(t,s,s.type,s.pendingProps,r);case 1:return a=s.type,c=Zs(a,s.pendingProps),k_(t,s,a,c,r);case 3:e:{if(ot(s,s.stateNode.containerInfo),t===null)throw Error(l(387));a=s.pendingProps;var u=s.memoizedState;c=u.element,fc(t,s),Tn(s,a,null,r);var g=s.memoizedState;if(a=g.cache,hs(s,it,a),a!==u.cache&&lc(s,[it],r,!0),xn(),a=g.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:g.cache},s.updateQueue.baseState=u,s.memoizedState=u,s.flags&256){s=A_(t,s,a,r);break e}else if(a!==c){c=ri(Error(l(424)),s),Sn(c),s=A_(t,s,a,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(je=ci(t.firstChild),bt=s,Te=!0,os=null,ai=!0,r=Td(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ys(),a===c){s=Yi(t,s,r);break e}wt(t,s,a,r)}s=s.child}return s;case 26:return oa(t,s),t===null?(r=Gm(s.type,null,s.pendingProps,null))?s.memoizedState=r:Te||(r=s.type,t=s.pendingProps,a=xa(ue.current).createElement(r),a[yt]=s,a[Ot]=t,Et(a,r,t),dt(a),s.stateNode=a):s.memoizedState=Gm(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return bi(s),t===null&&Te&&(a=s.stateNode=Ym(s.type,s.pendingProps,ue.current),bt=s,ai=!0,c=je,ws(s.type)?(xh=c,je=ci(a.firstChild)):je=c),wt(t,s,s.pendingProps.children,r),oa(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Te&&((c=a=je)&&(a=W0(a,s.type,s.pendingProps,ai),a!==null?(s.stateNode=a,bt=s,je=ci(a.firstChild),ai=!1,c=!0):c=!1),c||cs(s)),bi(s),c=s.type,u=s.pendingProps,g=t!==null?t.memoizedProps:null,a=u.children,yh(c,u)?a=null:g!==null&&yh(c,g)&&(s.flags|=32),s.memoizedState!==null&&(c=Sc(t,s,s0,null,null,r),Gn._currentValue=c),oa(t,s),wt(t,s,a,r),s.child;case 6:return t===null&&Te&&((t=r=je)&&(r=Y0(r,s.pendingProps,ai),r!==null?(s.stateNode=r,bt=s,je=null,t=!0):t=!1),t||cs(s)),null;case 13:return B_(t,s,r);case 4:return ot(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=$s(s,null,a,r):wt(t,s,a,r),s.child;case 11:return w_(t,s,s.type,s.pendingProps,r);case 7:return wt(t,s,s.pendingProps,r),s.child;case 8:return wt(t,s,s.pendingProps.children,r),s.child;case 12:return wt(t,s,s.pendingProps.children,r),s.child;case 10:return a=s.pendingProps,hs(s,s.type,a.value),wt(t,s,a.children,r),s.child;case 9:return c=s.type._context,a=s.pendingProps.children,Vs(s),c=Ct(c),a=a(c),s.flags|=1,wt(t,s,a,r),s.child;case 14:return E_(t,s,s.type,s.pendingProps,r);case 15:return x_(t,s,s.type,s.pendingProps,r);case 19:return L_(t,s,r);case 31:return u0(t,s,r);case 22:return T_(t,s,r,s.pendingProps);case 24:return Vs(s),a=Ct(it),t===null?(c=cc(),c===null&&(c=qe,u=ac(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=r),c=u),s.memoizedState={parent:a,cache:c},uc(s),hs(s,it,c)):((t.lanes&r)!==0&&(fc(t,s),Tn(s,null,null,r),xn()),c=t.memoizedState,u=s.memoizedState,c.parent!==a?(c={parent:a,cache:a},s.memoizedState=c,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=c),hs(s,it,a)):(a=u.cache,hs(s,it,a),a!==c.cache&&lc(s,[it],r,!0))),wt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(l(156,s.tag))}function Ki(t){t.flags|=4}function Fc(t,s,r,a,c){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(om())t.flags|=8192;else throw Xs=Fl,hc}else t.flags&=-16777217}function N_(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zm(s))if(om())t.flags|=8192;else throw Xs=Fl,hc}function ha(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?mf():536870912,t.lanes|=s,Ur|=s)}function Bn(t,s){if(!Te)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Pe(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&65011712,a|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function d0(t,s,r){var a=s.pendingProps;switch(tc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(s),null;case 1:return Pe(s),null;case 3:return r=s.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ji(it),Be(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xr(s)?Ki(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sc())),Pe(s),null;case 26:var c=s.type,u=s.memoizedState;return t===null?(Ki(s),u!==null?(Pe(s),N_(s,u)):(Pe(s),Fc(s,c,null,a,r))):u?u!==t.memoizedState?(Ki(s),Pe(s),N_(s,u)):(Pe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==a&&Ki(s),Pe(s),Fc(s,c,t,a,r)),null;case 27:if(Ci(s),r=ue.current,c=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==a&&Ki(s);else{if(!a){if(s.stateNode===null)throw Error(l(166));return Pe(s),null}t=ie.current,xr(s)?md(s):(t=Ym(c,a,r),s.stateNode=t,Ki(s))}return Pe(s),null;case 5:if(Ci(s),c=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==a&&Ki(s);else{if(!a){if(s.stateNode===null)throw Error(l(166));return Pe(s),null}if(u=ie.current,xr(s))md(s);else{var g=xa(ue.current);switch(u){case 1:u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=g.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof a.is=="string"?g.createElement("select",{is:a.is}):g.createElement("select"),a.multiple?u.multiple=!0:a.size&&(u.size=a.size);break;default:u=typeof a.is=="string"?g.createElement(c,{is:a.is}):g.createElement(c)}}u[yt]=s,u[Ot]=a;e:for(g=s.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===s)break e;for(;g.sibling===null;){if(g.return===null||g.return===s)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}s.stateNode=u;e:switch(Et(u,c,a),c){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ki(s)}}return Pe(s),Fc(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==a&&Ki(s);else{if(typeof a!="string"&&s.stateNode===null)throw Error(l(166));if(t=ue.current,xr(s)){if(t=s.stateNode,r=s.memoizedProps,a=null,c=bt,c!==null)switch(c.tag){case 27:case 5:a=c.memoizedProps}t[yt]=s,t=!!(t.nodeValue===r||a!==null&&a.suppressHydrationWarning===!0||Bm(t.nodeValue,r)),t||cs(s,!0)}else t=xa(t).createTextNode(a),t[yt]=s,s.stateNode=t}return Pe(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(a=xr(s),r!==null){if(t===null){if(!a)throw Error(l(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[yt]=s}else Ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pe(s),t=!1}else r=sc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Ft(s),s):(Ft(s),null);if((s.flags&128)!==0)throw Error(l(558))}return Pe(s),null;case 13:if(a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=xr(s),a!==null&&a.dehydrated!==null){if(t===null){if(!c)throw Error(l(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[yt]=s}else Ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pe(s),c=!1}else c=sc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return s.flags&256?(Ft(s),s):(Ft(s),null)}return Ft(s),(s.flags&128)!==0?(s.lanes=r,s):(r=a!==null,t=t!==null&&t.memoizedState!==null,r&&(a=s.child,c=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(c=a.alternate.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==c&&(a.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),ha(s,s.updateQueue),Pe(s),null);case 4:return Be(),t===null&&mh(s.stateNode.containerInfo),Pe(s),null;case 10:return ji(s.type),Pe(s),null;case 19:if(P(Je),a=s.memoizedState,a===null)return Pe(s),null;if(c=(s.flags&128)!==0,u=a.rendering,u===null)if(c)Bn(a,!1);else{if(Ie!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(u=Zl(t),u!==null){for(s.flags|=128,Bn(a,!1),t=u.updateQueue,s.updateQueue=t,ha(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)hd(r,t),r=r.sibling;return Q(Je,Je.current&1|2),Te&&Ui(s,a.treeForkCount),s.child}t=t.sibling}a.tail!==null&&Pt()>ma&&(s.flags|=128,c=!0,Bn(a,!1),s.lanes=4194304)}else{if(!c)if(t=Zl(u),t!==null){if(s.flags|=128,c=!0,t=t.updateQueue,s.updateQueue=t,ha(s,t),Bn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!u.alternate&&!Te)return Pe(s),null}else 2*Pt()-a.renderingStartTime>ma&&r!==536870912&&(s.flags|=128,c=!0,Bn(a,!1),s.lanes=4194304);a.isBackwards?(u.sibling=s.child,s.child=u):(t=a.last,t!==null?t.sibling=u:s.child=u,a.last=u)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Pt(),t.sibling=null,r=Je.current,Q(Je,c?r&1|2:r&1),Te&&Ui(s,a.treeForkCount),t):(Pe(s),null);case 22:case 23:return Ft(s),gc(),a=s.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(s.flags|=8192):a&&(s.flags|=8192),a?(r&536870912)!==0&&(s.flags&128)===0&&(Pe(s),s.subtreeFlags&6&&(s.flags|=8192)):Pe(s),r=s.updateQueue,r!==null&&ha(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==r&&(s.flags|=2048),t!==null&&P(Gs),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ji(it),Pe(s),null;case 25:return null;case 30:return null}throw Error(l(156,s.tag))}function _0(t,s){switch(tc(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ji(it),Be(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ci(s),null;case 31:if(s.memoizedState!==null){if(Ft(s),s.alternate===null)throw Error(l(340));Ys()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Ft(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(l(340));Ys()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(Je),null;case 4:return Be(),null;case 10:return ji(s.type),null;case 22:case 23:return Ft(s),gc(),t!==null&&P(Gs),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ji(it),null;case 25:return null;default:return null}}function H_(t,s){switch(tc(s),s.tag){case 3:ji(it),Be();break;case 26:case 27:case 5:Ci(s);break;case 4:Be();break;case 31:s.memoizedState!==null&&Ft(s);break;case 13:Ft(s);break;case 19:P(Je);break;case 10:ji(s.type);break;case 22:case 23:Ft(s),gc(),t!==null&&P(Gs);break;case 24:ji(it)}}function On(t,s){try{var r=s.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var c=a.next;r=c;do{if((r.tag&t)===t){a=void 0;var u=r.create,g=r.inst;a=u(),g.destroy=a}r=r.next}while(r!==c)}}catch(v){Le(s,s.return,v)}}function gs(t,s,r){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var u=c.next;a=u;do{if((a.tag&t)===t){var g=a.inst,v=g.destroy;if(v!==void 0){g.destroy=void 0,c=s;var b=r,L=v;try{L()}catch(U){Le(c,b,U)}}}a=a.next}while(a!==u)}}catch(U){Le(s,s.return,U)}}function U_(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{Dd(s,r)}catch(a){Le(t,t.return,a)}}}function q_(t,s,r){r.props=Zs(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(a){Le(t,s,a)}}function Ln(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof r=="function"?t.refCleanup=r(a):r.current=a}}catch(c){Le(t,s,c)}}function xi(t,s){var r=t.ref,a=t.refCleanup;if(r!==null)if(typeof a=="function")try{a()}catch(c){Le(t,s,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){Le(t,s,c)}else r.current=null}function j_(t){var s=t.type,r=t.memoizedProps,a=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&a.focus();break e;case"img":r.src?a.src=r.src:r.srcSet&&(a.srcset=r.srcSet)}}catch(c){Le(t,t.return,c)}}function Xc(t,s,r){try{var a=t.stateNode;N0(a,t.type,r,s),a[Ot]=s}catch(c){Le(t,t.return,c)}}function P_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ws(t.type)||t.tag===4}function $c(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||P_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ws(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ic(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=zi));else if(a!==4&&(a===27&&ws(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(Ic(t,s,r),t=t.sibling;t!==null;)Ic(t,s,r),t=t.sibling}function ua(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(a===27&&ws(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ua(t,s,r),t=t.sibling;t!==null;)ua(t,s,r),t=t.sibling}function W_(t){var s=t.stateNode,r=t.memoizedProps;try{for(var a=t.type,c=s.attributes;c.length;)s.removeAttributeNode(c[0]);Et(s,a,r),s[yt]=t,s[Ot]=r}catch(u){Le(t,t.return,u)}}var Vi=!1,nt=!1,Zc=!1,Y_=typeof WeakSet=="function"?WeakSet:Set,_t=null;function m0(t,s){if(t=t.containerInfo,ph=Ba,t=td(t),Ko(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var g=0,v=-1,b=-1,L=0,U=0,V=t,z=null;t:for(;;){for(var N;V!==r||c!==0&&V.nodeType!==3||(v=g+c),V!==u||a!==0&&V.nodeType!==3||(b=g+a),V.nodeType===3&&(g+=V.nodeValue.length),(N=V.firstChild)!==null;)z=V,V=N;for(;;){if(V===t)break t;if(z===r&&++L===c&&(v=g),z===u&&++U===a&&(b=g),(N=V.nextSibling)!==null)break;V=z,z=V.parentNode}V=N}r=v===-1||b===-1?null:{start:v,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sh={focusedElem:t,selectionRange:r},Ba=!1,_t=s;_t!==null;)if(s=_t,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,_t=t;else for(;_t!==null;){switch(s=_t,u=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)c=t[r],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&u!==null){t=void 0,r=s,c=u.memoizedProps,u=u.memoizedState,a=r.stateNode;try{var re=Zs(r.type,c);t=a.getSnapshotBeforeUpdate(re,u),a.__reactInternalSnapshotBeforeUpdate=t}catch(he){Le(r,r.return,he)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Ch(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ch(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=s.sibling,t!==null){t.return=s.return,_t=t;break}_t=s.return}}function K_(t,s,r){var a=r.flags;switch(r.tag){case 0:case 11:case 15:Fi(t,r),a&4&&On(5,r);break;case 1:if(Fi(t,r),a&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(g){Le(r,r.return,g)}else{var c=Zs(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(c,s,t.__reactInternalSnapshotBeforeUpdate)}catch(g){Le(r,r.return,g)}}a&64&&U_(r),a&512&&Ln(r,r.return);break;case 3:if(Fi(t,r),a&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Dd(t,s)}catch(g){Le(r,r.return,g)}}break;case 27:s===null&&a&4&&W_(r);case 26:case 5:Fi(t,r),s===null&&a&4&&j_(r),a&512&&Ln(r,r.return);break;case 12:Fi(t,r);break;case 31:Fi(t,r),a&4&&F_(t,r);break;case 13:Fi(t,r),a&4&&X_(t,r),a&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=E0.bind(null,r),K0(t,r))));break;case 22:if(a=r.memoizedState!==null||Vi,!a){s=s!==null&&s.memoizedState!==null||nt,c=Vi;var u=nt;Vi=a,(nt=s)&&!u?Xi(t,r,(r.subtreeFlags&8772)!==0):Fi(t,r),Vi=c,nt=u}break;case 30:break;default:Fi(t,r)}}function V_(t){var s=t.alternate;s!==null&&(t.alternate=null,V_(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ro(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,zt=!1;function Gi(t,s,r){for(r=r.child;r!==null;)G_(t,s,r),r=r.sibling}function G_(t,s,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(rn,r)}catch{}switch(r.tag){case 26:nt||xi(r,s),Gi(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:nt||xi(r,s);var a=Ye,c=zt;ws(r.type)&&(Ye=r.stateNode,zt=!1),Gi(t,s,r),Yn(r.stateNode),Ye=a,zt=c;break;case 5:nt||xi(r,s);case 6:if(a=Ye,c=zt,Ye=null,Gi(t,s,r),Ye=a,zt=c,Ye!==null)if(zt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(r.stateNode)}catch(u){Le(r,s,u)}else try{Ye.removeChild(r.stateNode)}catch(u){Le(r,s,u)}break;case 18:Ye!==null&&(zt?(t=Ye,Um(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Gr(t)):Um(Ye,r.stateNode));break;case 4:a=Ye,c=zt,Ye=r.stateNode.containerInfo,zt=!0,Gi(t,s,r),Ye=a,zt=c;break;case 0:case 11:case 14:case 15:gs(2,r,s),nt||gs(4,r,s),Gi(t,s,r);break;case 1:nt||(xi(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"&&q_(r,s,a)),Gi(t,s,r);break;case 21:Gi(t,s,r);break;case 22:nt=(a=nt)||r.memoizedState!==null,Gi(t,s,r),nt=a;break;default:Gi(t,s,r)}}function F_(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Gr(t)}catch(r){Le(s,s.return,r)}}}function X_(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Gr(t)}catch(r){Le(s,s.return,r)}}function g0(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Y_),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Y_),s;default:throw Error(l(435,t.tag))}}function fa(t,s){var r=g0(t);s.forEach(function(a){if(!r.has(a)){r.add(a);var c=x0.bind(null,t,a);a.then(c,c)}})}function Nt(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a],u=t,g=s,v=g;e:for(;v!==null;){switch(v.tag){case 27:if(ws(v.type)){Ye=v.stateNode,zt=!1;break e}break;case 5:Ye=v.stateNode,zt=!1;break e;case 3:case 4:Ye=v.stateNode.containerInfo,zt=!0;break e}v=v.return}if(Ye===null)throw Error(l(160));G_(u,g,c),Ye=null,zt=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)$_(s,t),s=s.sibling}var vi=null;function $_(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nt(s,t),Ht(t),a&4&&(gs(3,t,t.return),On(3,t),gs(5,t,t.return));break;case 1:Nt(s,t),Ht(t),a&512&&(nt||r===null||xi(r,r.return)),a&64&&Vi&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?a:r.concat(a))));break;case 26:var c=vi;if(Nt(s,t),Ht(t),a&512&&(nt||r===null||xi(r,r.return)),a&4){var u=r!==null?r.memoizedState:null;if(a=t.memoizedState,r===null)if(a===null)if(t.stateNode===null){e:{a=t.type,r=t.memoizedProps,c=c.ownerDocument||c;t:switch(a){case"title":u=c.getElementsByTagName("title")[0],(!u||u[an]||u[yt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(a),c.head.insertBefore(u,c.querySelector("head > title"))),Et(u,a,r),u[yt]=t,dt(u),a=u;break e;case"link":var g=$m("link","href",c).get(a+(r.href||""));if(g){for(var v=0;v<g.length;v++)if(u=g[v],u.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&u.getAttribute("rel")===(r.rel==null?null:r.rel)&&u.getAttribute("title")===(r.title==null?null:r.title)&&u.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){g.splice(v,1);break t}}u=c.createElement(a),Et(u,a,r),c.head.appendChild(u);break;case"meta":if(g=$m("meta","content",c).get(a+(r.content||""))){for(v=0;v<g.length;v++)if(u=g[v],u.getAttribute("content")===(r.content==null?null:""+r.content)&&u.getAttribute("name")===(r.name==null?null:r.name)&&u.getAttribute("property")===(r.property==null?null:r.property)&&u.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&u.getAttribute("charset")===(r.charSet==null?null:r.charSet)){g.splice(v,1);break t}}u=c.createElement(a),Et(u,a,r),c.head.appendChild(u);break;default:throw Error(l(468,a))}u[yt]=t,dt(u),a=u}t.stateNode=a}else Im(c,t.type,t.stateNode);else t.stateNode=Xm(c,a,t.memoizedProps);else u!==a?(u===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):u.count--,a===null?Im(c,t.type,t.stateNode):Xm(c,a,t.memoizedProps)):a===null&&t.stateNode!==null&&Xc(t,t.memoizedProps,r.memoizedProps)}break;case 27:Nt(s,t),Ht(t),a&512&&(nt||r===null||xi(r,r.return)),r!==null&&a&4&&Xc(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Nt(s,t),Ht(t),a&512&&(nt||r===null||xi(r,r.return)),t.flags&32){c=t.stateNode;try{mr(c,"")}catch(re){Le(t,t.return,re)}}a&4&&t.stateNode!=null&&(c=t.memoizedProps,Xc(t,c,r!==null?r.memoizedProps:c)),a&1024&&(Zc=!0);break;case 6:if(Nt(s,t),Ht(t),a&4){if(t.stateNode===null)throw Error(l(162));a=t.memoizedProps,r=t.stateNode;try{r.nodeValue=a}catch(re){Le(t,t.return,re)}}break;case 3:if(Da=null,c=vi,vi=Ta(s.containerInfo),Nt(s,t),vi=c,Ht(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Gr(s.containerInfo)}catch(re){Le(t,t.return,re)}Zc&&(Zc=!1,I_(t));break;case 4:a=vi,vi=Ta(t.stateNode.containerInfo),Nt(s,t),Ht(t),vi=a;break;case 12:Nt(s,t),Ht(t);break;case 31:Nt(s,t),Ht(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,fa(t,a)));break;case 13:Nt(s,t),Ht(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(_a=Pt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,fa(t,a)));break;case 22:c=t.memoizedState!==null;var b=r!==null&&r.memoizedState!==null,L=Vi,U=nt;if(Vi=L||c,nt=U||b,Nt(s,t),nt=U,Vi=L,Ht(t),a&8192)e:for(s=t.stateNode,s._visibility=c?s._visibility&-2:s._visibility|1,c&&(r===null||b||Vi||nt||Qs(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){b=r=s;try{if(u=b.stateNode,c)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{v=b.stateNode;var V=b.memoizedProps.style,z=V!=null&&V.hasOwnProperty("display")?V.display:null;v.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(re){Le(b,b.return,re)}}}else if(s.tag===6){if(r===null){b=s;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(re){Le(b,b.return,re)}}}else if(s.tag===18){if(r===null){b=s;try{var N=b.stateNode;c?qm(N,!0):qm(b.stateNode,!1)}catch(re){Le(b,b.return,re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}a&4&&(a=t.updateQueue,a!==null&&(r=a.retryQueue,r!==null&&(a.retryQueue=null,fa(t,r))));break;case 19:Nt(s,t),Ht(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,fa(t,a)));break;case 30:break;case 21:break;default:Nt(s,t),Ht(t)}}function Ht(t){var s=t.flags;if(s&2){try{for(var r,a=t.return;a!==null;){if(P_(a)){r=a;break}a=a.return}if(r==null)throw Error(l(160));switch(r.tag){case 27:var c=r.stateNode,u=$c(t);ua(t,u,c);break;case 5:var g=r.stateNode;r.flags&32&&(mr(g,""),r.flags&=-33);var v=$c(t);ua(t,v,g);break;case 3:case 4:var b=r.stateNode.containerInfo,L=$c(t);Ic(t,L,b);break;default:throw Error(l(161))}}catch(U){Le(t,t.return,U)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function I_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;I_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Fi(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)K_(t,s.alternate,s),s=s.sibling}function Qs(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:gs(4,s,s.return),Qs(s);break;case 1:xi(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&q_(s,s.return,r),Qs(s);break;case 27:Yn(s.stateNode);case 26:case 5:xi(s,s.return),Qs(s);break;case 22:s.memoizedState===null&&Qs(s);break;case 30:Qs(s);break;default:Qs(s)}t=t.sibling}}function Xi(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var a=s.alternate,c=t,u=s,g=u.flags;switch(u.tag){case 0:case 11:case 15:Xi(c,u,r),On(4,u);break;case 1:if(Xi(c,u,r),a=u,c=a.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){Le(a,a.return,L)}if(a=u,c=a.updateQueue,c!==null){var v=a.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)Rd(b[c],v)}catch(L){Le(a,a.return,L)}}r&&g&64&&U_(u),Ln(u,u.return);break;case 27:W_(u);case 26:case 5:Xi(c,u,r),r&&a===null&&g&4&&j_(u),Ln(u,u.return);break;case 12:Xi(c,u,r);break;case 31:Xi(c,u,r),r&&g&4&&F_(c,u);break;case 13:Xi(c,u,r),r&&g&4&&X_(c,u);break;case 22:u.memoizedState===null&&Xi(c,u,r),Ln(u,u.return);break;case 30:break;default:Xi(c,u,r)}s=s.sibling}}function Qc(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&yn(r))}function Jc(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yn(t))}function pi(t,s,r,a){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Z_(t,s,r,a),s=s.sibling}function Z_(t,s,r,a){var c=s.flags;switch(s.tag){case 0:case 11:case 15:pi(t,s,r,a),c&2048&&On(9,s);break;case 1:pi(t,s,r,a);break;case 3:pi(t,s,r,a),c&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&yn(t)));break;case 12:if(c&2048){pi(t,s,r,a),t=s.stateNode;try{var u=s.memoizedProps,g=u.id,v=u.onPostCommit;typeof v=="function"&&v(g,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(b){Le(s,s.return,b)}}else pi(t,s,r,a);break;case 31:pi(t,s,r,a);break;case 13:pi(t,s,r,a);break;case 23:break;case 22:u=s.stateNode,g=s.alternate,s.memoizedState!==null?u._visibility&2?pi(t,s,r,a):zn(t,s):u._visibility&2?pi(t,s,r,a):(u._visibility|=2,zr(t,s,r,a,(s.subtreeFlags&10256)!==0||!1)),c&2048&&Qc(g,s);break;case 24:pi(t,s,r,a),c&2048&&Jc(s.alternate,s);break;default:pi(t,s,r,a)}}function zr(t,s,r,a,c){for(c=c&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var u=t,g=s,v=r,b=a,L=g.flags;switch(g.tag){case 0:case 11:case 15:zr(u,g,v,b,c),On(8,g);break;case 23:break;case 22:var U=g.stateNode;g.memoizedState!==null?U._visibility&2?zr(u,g,v,b,c):zn(u,g):(U._visibility|=2,zr(u,g,v,b,c)),c&&L&2048&&Qc(g.alternate,g);break;case 24:zr(u,g,v,b,c),c&&L&2048&&Jc(g.alternate,g);break;default:zr(u,g,v,b,c)}s=s.sibling}}function zn(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,a=s,c=a.flags;switch(a.tag){case 22:zn(r,a),c&2048&&Qc(a.alternate,a);break;case 24:zn(r,a),c&2048&&Jc(a.alternate,a);break;default:zn(r,a)}s=s.sibling}}var Nn=8192;function Nr(t,s,r){if(t.subtreeFlags&Nn)for(t=t.child;t!==null;)Q_(t,s,r),t=t.sibling}function Q_(t,s,r){switch(t.tag){case 26:Nr(t,s,r),t.flags&Nn&&t.memoizedState!==null&&iy(r,vi,t.memoizedState,t.memoizedProps);break;case 5:Nr(t,s,r);break;case 3:case 4:var a=vi;vi=Ta(t.stateNode.containerInfo),Nr(t,s,r),vi=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Nn,Nn=16777216,Nr(t,s,r),Nn=a):Nr(t,s,r));break;default:Nr(t,s,r)}}function J_(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Hn(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];_t=a,tm(a,t)}J_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)em(t),t=t.sibling}function em(t){switch(t.tag){case 0:case 11:case 15:Hn(t),t.flags&2048&&gs(9,t,t.return);break;case 3:Hn(t);break;case 12:Hn(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,da(t)):Hn(t);break;default:Hn(t)}}function da(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var a=s[r];_t=a,tm(a,t)}J_(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:gs(8,s,s.return),da(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,da(s));break;default:da(s)}t=t.sibling}}function tm(t,s){for(;_t!==null;){var r=_t;switch(r.tag){case 0:case 11:case 15:gs(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var a=r.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:yn(r.memoizedState.cache)}if(a=r.child,a!==null)a.return=r,_t=a;else e:for(r=t;_t!==null;){a=_t;var c=a.sibling,u=a.return;if(V_(a),a===r){_t=null;break e}if(c!==null){c.return=u,_t=c;break e}_t=u}}}var v0={getCacheForType:function(t){var s=Ct(it),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return Ct(it).controller.signal}},p0=typeof WeakMap=="function"?WeakMap:Map,Ae=0,qe=null,Ce=null,Ee=0,Oe=0,Xt=null,vs=!1,Hr=!1,eh=!1,$i=0,Ie=0,ps=0,Js=0,th=0,$t=0,Ur=0,Un=null,Ut=null,ih=!1,_a=0,im=0,ma=1/0,ga=null,Ss=null,ct=0,ys=null,qr=null,Ii=0,sh=0,rh=null,sm=null,qn=0,nh=null;function It(){return(Ae&2)!==0&&Ee!==0?Ee&-Ee:M.T!==null?uh():Sf()}function rm(){if($t===0)if((Ee&536870912)===0||Te){var t=El;El<<=1,(El&3932160)===0&&(El=262144),$t=t}else $t=536870912;return t=Gt.current,t!==null&&(t.flags|=32),$t}function qt(t,s,r){(t===qe&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)&&(jr(t,0),bs(t,Ee,$t,!1)),ln(t,r),((Ae&2)===0||t!==qe)&&(t===qe&&((Ae&2)===0&&(Js|=r),Ie===4&&bs(t,Ee,$t,!1)),Ti(t))}function nm(t,s,r){if((Ae&6)!==0)throw Error(l(327));var a=!r&&(s&127)===0&&(s&t.expiredLanes)===0||nn(t,s),c=a?b0(t,s):ah(t,s,!0),u=a;do{if(c===0){Hr&&!a&&bs(t,s,0,!1);break}else{if(r=t.current.alternate,u&&!S0(r)){c=ah(t,s,!1),u=!1;continue}if(c===2){if(u=s,t.errorRecoveryDisabledLanes&u)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){s=g;e:{var v=t;c=Un;var b=v.current.memoizedState.isDehydrated;if(b&&(jr(v,g).flags|=256),g=ah(v,g,!1),g!==2){if(eh&&!b){v.errorRecoveryDisabledLanes|=u,Js|=u,c=4;break e}u=Ut,Ut=c,u!==null&&(Ut===null?Ut=u:Ut.push.apply(Ut,u))}c=g}if(u=!1,c!==2)continue}}if(c===1){jr(t,0),bs(t,s,0,!0);break}e:{switch(a=t,u=c,u){case 0:case 1:throw Error(l(345));case 4:if((s&4194048)!==s)break;case 6:bs(a,s,$t,!vs);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(l(329))}if((s&62914560)===s&&(c=_a+300-Pt(),10<c)){if(bs(a,s,$t,!vs),Tl(a,0,!0)!==0)break e;Ii=s,a.timeoutHandle=Nm(lm.bind(null,a,r,Ut,ga,ih,s,$t,Js,Ur,vs,u,"Throttled",-0,0),c);break e}lm(a,r,Ut,ga,ih,s,$t,Js,Ur,vs,u,null,-0,0)}}break}while(!0);Ti(t)}function lm(t,s,r,a,c,u,g,v,b,L,U,V,z,N){if(t.timeoutHandle=-1,V=s.subtreeFlags,V&8192||(V&16785408)===16785408){V={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zi},Q_(s,u,V);var re=(u&62914560)===u?_a-Pt():(u&4194048)===u?im-Pt():0;if(re=sy(V,re),re!==null){Ii=u,t.cancelPendingCommit=re(_m.bind(null,t,s,u,r,a,c,g,v,b,U,V,null,z,N)),bs(t,u,g,!L);return}}_m(t,s,u,r,a,c,g,v,b)}function S0(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var a=0;a<r.length;a++){var c=r[a],u=c.getSnapshot;c=c.value;try{if(!Kt(u(),c))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bs(t,s,r,a){s&=~th,s&=~Js,t.suspendedLanes|=s,t.pingedLanes&=~s,a&&(t.warmLanes|=s),a=t.expirationTimes;for(var c=s;0<c;){var u=31-Yt(c),g=1<<u;a[u]=-1,c&=~g}r!==0&&gf(t,r,s)}function va(){return(Ae&6)===0?(jn(0),!1):!0}function lh(){if(Ce!==null){if(Oe===0)var t=Ce.return;else t=Ce,qi=Ks=null,Cc(t),kr=null,Cn=0,t=Ce;for(;t!==null;)H_(t.alternate,t),t=t.return;Ce=null}}function jr(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,q0(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Ii=0,lh(),qe=t,Ce=r=Hi(t.current,null),Ee=s,Oe=0,Xt=null,vs=!1,Hr=nn(t,s),eh=!1,Ur=$t=th=Js=ps=Ie=0,Ut=Un=null,ih=!1,(s&8)!==0&&(s|=s&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=s;0<a;){var c=31-Yt(a),u=1<<c;s|=t[c],a&=~u}return $i=s,Ul(),r}function am(t,s){ve=null,M.H=kn,s===Mr||s===Gl?(s=wd(),Oe=3):s===hc?(s=wd(),Oe=4):Oe=s===Uc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Xt=s,Ce===null&&(Ie=1,la(t,ri(s,t.current)))}function om(){var t=Gt.current;return t===null?!0:(Ee&4194048)===Ee?oi===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?t===oi:!1}function cm(){var t=M.H;return M.H=kn,t===null?kn:t}function hm(){var t=M.A;return M.A=v0,t}function pa(){Ie=4,vs||(Ee&4194048)!==Ee&&Gt.current!==null||(Hr=!0),(ps&134217727)===0&&(Js&134217727)===0||qe===null||bs(qe,Ee,$t,!1)}function ah(t,s,r){var a=Ae;Ae|=2;var c=cm(),u=hm();(qe!==t||Ee!==s)&&(ga=null,jr(t,s)),s=!1;var g=Ie;e:do try{if(Oe!==0&&Ce!==null){var v=Ce,b=Xt;switch(Oe){case 8:lh(),g=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(s=!0);var L=Oe;if(Oe=0,Xt=null,Pr(t,v,b,L),r&&Hr){g=0;break e}break;default:L=Oe,Oe=0,Xt=null,Pr(t,v,b,L)}}y0(),g=Ie;break}catch(U){am(t,U)}while(!0);return s&&t.shellSuspendCounter++,qi=Ks=null,Ae=a,M.H=c,M.A=u,Ce===null&&(qe=null,Ee=0,Ul()),g}function y0(){for(;Ce!==null;)um(Ce)}function b0(t,s){var r=Ae;Ae|=2;var a=cm(),c=hm();qe!==t||Ee!==s?(ga=null,ma=Pt()+500,jr(t,s)):Hr=nn(t,s);e:do try{if(Oe!==0&&Ce!==null){s=Ce;var u=Xt;t:switch(Oe){case 1:Oe=0,Xt=null,Pr(t,s,u,1);break;case 2:case 9:if(bd(u)){Oe=0,Xt=null,fm(s);break}s=function(){Oe!==2&&Oe!==9||qe!==t||(Oe=7),Ti(t)},u.then(s,s);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:bd(u)?(Oe=0,Xt=null,fm(s)):(Oe=0,Xt=null,Pr(t,s,u,7));break;case 5:var g=null;switch(Ce.tag){case 26:g=Ce.memoizedState;case 5:case 27:var v=Ce;if(g?Zm(g):v.stateNode.complete){Oe=0,Xt=null;var b=v.sibling;if(b!==null)Ce=b;else{var L=v.return;L!==null?(Ce=L,Sa(L)):Ce=null}break t}}Oe=0,Xt=null,Pr(t,s,u,5);break;case 6:Oe=0,Xt=null,Pr(t,s,u,6);break;case 8:lh(),Ie=6;break e;default:throw Error(l(462))}}C0();break}catch(U){am(t,U)}while(!0);return qi=Ks=null,M.H=a,M.A=c,Ae=r,Ce!==null?0:(qe=null,Ee=0,Ul(),Ie)}function C0(){for(;Ce!==null&&!Vp();)um(Ce)}function um(t){var s=z_(t.alternate,t,$i);t.memoizedProps=t.pendingProps,s===null?Sa(t):Ce=s}function fm(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=M_(r,s,s.pendingProps,s.type,void 0,Ee);break;case 11:s=M_(r,s,s.pendingProps,s.type.render,s.ref,Ee);break;case 5:Cc(s);default:H_(r,s),s=Ce=hd(s,$i),s=z_(r,s,$i)}t.memoizedProps=t.pendingProps,s===null?Sa(t):Ce=s}function Pr(t,s,r,a){qi=Ks=null,Cc(s),kr=null,Cn=0;var c=s.return;try{if(h0(t,c,s,r,Ee)){Ie=1,la(t,ri(r,t.current)),Ce=null;return}}catch(u){if(c!==null)throw Ce=c,u;Ie=1,la(t,ri(r,t.current)),Ce=null;return}s.flags&32768?(Te||a===1?t=!0:Hr||(Ee&536870912)!==0?t=!1:(vs=t=!0,(a===2||a===9||a===3||a===6)&&(a=Gt.current,a!==null&&a.tag===13&&(a.flags|=16384))),dm(s,t)):Sa(s)}function Sa(t){var s=t;do{if((s.flags&32768)!==0){dm(s,vs);return}t=s.return;var r=d0(s.alternate,s,$i);if(r!==null){Ce=r;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=t}while(s!==null);Ie===0&&(Ie=5)}function dm(t,s){do{var r=_0(t.alternate,t);if(r!==null){r.flags&=32767,Ce=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=r}while(t!==null);Ie=6,Ce=null}function _m(t,s,r,a,c,u,g,v,b){t.cancelPendingCommit=null;do ya();while(ct!==0);if((Ae&6)!==0)throw Error(l(327));if(s!==null){if(s===t.current)throw Error(l(177));if(u=s.lanes|s.childLanes,u|=$o,tS(t,r,u,g,v,b),t===qe&&(Ce=qe=null,Ee=0),qr=s,ys=t,Ii=r,sh=u,rh=c,sm=a,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,T0(Cl,function(){return Sm(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||a){a=M.T,M.T=null,c=W.p,W.p=2,g=Ae,Ae|=4;try{m0(t,s,r)}finally{Ae=g,W.p=c,M.T=a}}ct=1,mm(),gm(),vm()}}function mm(){if(ct===1){ct=0;var t=ys,s=qr,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var a=W.p;W.p=2;var c=Ae;Ae|=4;try{$_(s,t);var u=Sh,g=td(t.containerInfo),v=u.focusedElem,b=u.selectionRange;if(g!==v&&v&&v.ownerDocument&&ed(v.ownerDocument.documentElement,v)){if(b!==null&&Ko(v)){var L=b.start,U=b.end;if(U===void 0&&(U=L),"selectionStart"in v)v.selectionStart=L,v.selectionEnd=Math.min(U,v.value.length);else{var V=v.ownerDocument||document,z=V&&V.defaultView||window;if(z.getSelection){var N=z.getSelection(),re=v.textContent.length,he=Math.min(b.start,re),He=b.end===void 0?he:Math.min(b.end,re);!N.extend&&he>He&&(g=He,He=he,he=g);var k=Jf(v,he),x=Jf(v,He);if(k&&x&&(N.rangeCount!==1||N.anchorNode!==k.node||N.anchorOffset!==k.offset||N.focusNode!==x.node||N.focusOffset!==x.offset)){var O=V.createRange();O.setStart(k.node,k.offset),N.removeAllRanges(),he>He?(N.addRange(O),N.extend(x.node,x.offset)):(O.setEnd(x.node,x.offset),N.addRange(O))}}}}for(V=[],N=v;N=N.parentNode;)N.nodeType===1&&V.push({element:N,left:N.scrollLeft,top:N.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<V.length;v++){var K=V[v];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Ba=!!ph,Sh=ph=null}finally{Ae=c,W.p=a,M.T=r}}t.current=s,ct=2}}function gm(){if(ct===2){ct=0;var t=ys,s=qr,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var a=W.p;W.p=2;var c=Ae;Ae|=4;try{K_(t,s.alternate,s)}finally{Ae=c,W.p=a,M.T=r}}ct=3}}function vm(){if(ct===4||ct===3){ct=0,Gp();var t=ys,s=qr,r=Ii,a=sm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ct=5:(ct=0,qr=ys=null,pm(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(Ss=null),xo(r),s=s.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(rn,s,void 0,(s.current.flags&128)===128)}catch{}if(a!==null){s=M.T,c=W.p,W.p=2,M.T=null;try{for(var u=t.onRecoverableError,g=0;g<a.length;g++){var v=a[g];u(v.value,{componentStack:v.stack})}}finally{M.T=s,W.p=c}}(Ii&3)!==0&&ya(),Ti(t),c=t.pendingLanes,(r&261930)!==0&&(c&42)!==0?t===nh?qn++:(qn=0,nh=t):qn=0,jn(0)}}function pm(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,yn(s)))}function ya(){return mm(),gm(),vm(),Sm()}function Sm(){if(ct!==5)return!1;var t=ys,s=sh;sh=0;var r=xo(Ii),a=M.T,c=W.p;try{W.p=32>r?32:r,M.T=null,r=rh,rh=null;var u=ys,g=Ii;if(ct=0,qr=ys=null,Ii=0,(Ae&6)!==0)throw Error(l(331));var v=Ae;if(Ae|=4,em(u.current),Z_(u,u.current,g,r),Ae=v,jn(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(rn,u)}catch{}return!0}finally{W.p=c,M.T=a,pm(t,s)}}function ym(t,s,r){s=ri(r,s),s=Hc(t.stateNode,s,2),t=ds(t,s,2),t!==null&&(ln(t,2),Ti(t))}function Le(t,s,r){if(t.tag===3)ym(t,t,r);else for(;s!==null;){if(s.tag===3){ym(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ss===null||!Ss.has(a))){t=ri(r,t),r=b_(2),a=ds(s,r,2),a!==null&&(C_(r,a,s,t),ln(a,2),Ti(a));break}}s=s.return}}function oh(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new p0;var c=new Set;a.set(s,c)}else c=a.get(s),c===void 0&&(c=new Set,a.set(s,c));c.has(r)||(eh=!0,c.add(r),t=w0.bind(null,t,s,r),s.then(t,t))}function w0(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,qe===t&&(Ee&r)===r&&(Ie===4||Ie===3&&(Ee&62914560)===Ee&&300>Pt()-_a?(Ae&2)===0&&jr(t,0):th|=r,Ur===Ee&&(Ur=0)),Ti(t)}function bm(t,s){s===0&&(s=mf()),t=Ps(t,s),t!==null&&(ln(t,s),Ti(t))}function E0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),bm(t,r)}function x0(t,s){var r=0;switch(t.tag){case 31:case 13:var a=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(l(314))}a!==null&&a.delete(s),bm(t,r)}function T0(t,s){return bo(t,s)}var ba=null,Wr=null,ch=!1,Ca=!1,hh=!1,Cs=0;function Ti(t){t!==Wr&&t.next===null&&(Wr===null?ba=Wr=t:Wr=Wr.next=t),Ca=!0,ch||(ch=!0,D0())}function jn(t,s){if(!hh&&Ca){hh=!0;do for(var r=!1,a=ba;a!==null;){if(t!==0){var c=a.pendingLanes;if(c===0)var u=0;else{var g=a.suspendedLanes,v=a.pingedLanes;u=(1<<31-Yt(42|t)+1)-1,u&=c&~(g&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(r=!0,xm(a,u))}else u=Ee,u=Tl(a,a===qe?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||nn(a,u)||(r=!0,xm(a,u));a=a.next}while(r);hh=!1}}function R0(){Cm()}function Cm(){Ca=ch=!1;var t=0;Cs!==0&&U0()&&(t=Cs);for(var s=Pt(),r=null,a=ba;a!==null;){var c=a.next,u=wm(a,s);u===0?(a.next=null,r===null?ba=c:r.next=c,c===null&&(Wr=r)):(r=a,(t!==0||(u&3)!==0)&&(Ca=!0)),a=c}ct!==0&&ct!==5||jn(t),Cs!==0&&(Cs=0)}function wm(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,c=t.expirationTimes,u=t.pendingLanes&-62914561;0<u;){var g=31-Yt(u),v=1<<g,b=c[g];b===-1?((v&r)===0||(v&a)!==0)&&(c[g]=eS(v,s)):b<=s&&(t.expiredLanes|=v),u&=~v}if(s=qe,r=Ee,r=Tl(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,r===0||t===s&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Co(a),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||nn(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(a!==null&&Co(a),xo(r)){case 2:case 8:r=df;break;case 32:r=Cl;break;case 268435456:r=_f;break;default:r=Cl}return a=Em.bind(null,t),r=bo(r,a),t.callbackPriority=s,t.callbackNode=r,s}return a!==null&&a!==null&&Co(a),t.callbackPriority=2,t.callbackNode=null,2}function Em(t,s){if(ct!==0&&ct!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(ya()&&t.callbackNode!==r)return null;var a=Ee;return a=Tl(t,t===qe?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(nm(t,a,s),wm(t,Pt()),t.callbackNode!=null&&t.callbackNode===r?Em.bind(null,t):null)}function xm(t,s){if(ya())return null;nm(t,s,!0)}function D0(){j0(function(){(Ae&6)!==0?bo(ff,R0):Cm()})}function uh(){if(Cs===0){var t=Rr;t===0&&(t=wl,wl<<=1,(wl&261888)===0&&(wl=256)),Cs=t}return Cs}function Tm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:kl(""+t)}function Rm(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function M0(t,s,r,a,c){if(s==="submit"&&r&&r.stateNode===c){var u=Tm((c[Ot]||null).action),g=a.submitter;g&&(s=(s=g[Ot]||null)?Tm(s.formAction):g.getAttribute("formAction"),s!==null&&(u=s,g=null));var v=new Ll("action","action",null,a,c);t.push({event:v,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Cs!==0){var b=g?Rm(c,g):new FormData(c);Ac(r,{pending:!0,data:b,method:c.method,action:u},null,b)}}else typeof u=="function"&&(v.preventDefault(),b=g?Rm(c,g):new FormData(c),Ac(r,{pending:!0,data:b,method:c.method,action:u},u,b))},currentTarget:c}]})}}for(var fh=0;fh<Xo.length;fh++){var dh=Xo[fh],k0=dh.toLowerCase(),A0=dh[0].toUpperCase()+dh.slice(1);gi(k0,"on"+A0)}gi(rd,"onAnimationEnd"),gi(nd,"onAnimationIteration"),gi(ld,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(FS,"onTransitionRun"),gi(XS,"onTransitionStart"),gi($S,"onTransitionCancel"),gi(ad,"onTransitionEnd"),dr("onMouseEnter",["mouseout","mouseover"]),dr("onMouseLeave",["mouseout","mouseover"]),dr("onPointerEnter",["pointerout","pointerover"]),dr("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pn));function Dm(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],c=a.event;a=a.listeners;e:{var u=void 0;if(s)for(var g=a.length-1;0<=g;g--){var v=a[g],b=v.instance,L=v.currentTarget;if(v=v.listener,b!==u&&c.isPropagationStopped())break e;u=v,c.currentTarget=L;try{u(c)}catch(U){Hl(U)}c.currentTarget=null,u=b}else for(g=0;g<a.length;g++){if(v=a[g],b=v.instance,L=v.currentTarget,v=v.listener,b!==u&&c.isPropagationStopped())break e;u=v,c.currentTarget=L;try{u(c)}catch(U){Hl(U)}c.currentTarget=null,u=b}}}}function we(t,s){var r=s[To];r===void 0&&(r=s[To]=new Set);var a=t+"__bubble";r.has(a)||(Mm(s,t,2,!1),r.add(a))}function _h(t,s,r){var a=0;s&&(a|=4),Mm(r,t,a,s)}var wa="_reactListening"+Math.random().toString(36).slice(2);function mh(t){if(!t[wa]){t[wa]=!0,Cf.forEach(function(r){r!=="selectionchange"&&(B0.has(r)||_h(r,!1,t),_h(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[wa]||(s[wa]=!0,_h("selectionchange",!1,s))}}function Mm(t,s,r,a){switch(rg(s)){case 2:var c=ly;break;case 8:c=ay;break;default:c=kh}r=c.bind(null,s,r,t),c=void 0,!zo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(c=!0),a?c!==void 0?t.addEventListener(s,r,{capture:!0,passive:c}):t.addEventListener(s,r,!0):c!==void 0?t.addEventListener(s,r,{passive:c}):t.addEventListener(s,r,!1)}function gh(t,s,r,a,c){var u=a;if((s&1)===0&&(s&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var v=a.stateNode.containerInfo;if(v===c)break;if(g===4)for(g=a.return;g!==null;){var b=g.tag;if((b===3||b===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;v!==null;){if(g=hr(v),g===null)return;if(b=g.tag,b===5||b===6||b===26||b===27){a=u=g;continue e}v=v.parentNode}}a=a.return}Lf(function(){var L=u,U=Oo(r),V=[];e:{var z=od.get(t);if(z!==void 0){var N=Ll,re=t;switch(t){case"keypress":if(Bl(r)===0)break e;case"keydown":case"keyup":N=xS;break;case"focusin":re="focus",N=qo;break;case"focusout":re="blur",N=qo;break;case"beforeblur":case"afterblur":N=qo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=dS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=DS;break;case rd:case nd:case ld:N=gS;break;case ad:N=kS;break;case"scroll":case"scrollend":N=uS;break;case"wheel":N=BS;break;case"copy":case"cut":case"paste":N=pS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=qf;break;case"toggle":case"beforetoggle":N=LS}var he=(s&4)!==0,He=!he&&(t==="scroll"||t==="scrollend"),k=he?z!==null?z+"Capture":null:z;he=[];for(var x=L,O;x!==null;){var K=x;if(O=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||O===null||k===null||(K=cn(x,k),K!=null&&he.push(Wn(x,K,O))),He)break;x=x.return}0<he.length&&(z=new N(z,re,null,r,U),V.push({event:z,listeners:he}))}}if((s&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",z&&r!==Bo&&(re=r.relatedTarget||r.fromElement)&&(hr(re)||re[cr]))break e;if((N||z)&&(z=U.window===U?U:(z=U.ownerDocument)?z.defaultView||z.parentWindow:window,N?(re=r.relatedTarget||r.toElement,N=L,re=re?hr(re):null,re!==null&&(He=h(re),he=re.tag,re!==He||he!==5&&he!==27&&he!==6)&&(re=null)):(N=null,re=L),N!==re)){if(he=Hf,K="onMouseLeave",k="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(he=qf,K="onPointerLeave",k="onPointerEnter",x="pointer"),He=N==null?z:on(N),O=re==null?z:on(re),z=new he(K,x+"leave",N,r,U),z.target=He,z.relatedTarget=O,K=null,hr(U)===L&&(he=new he(k,x+"enter",re,r,U),he.target=O,he.relatedTarget=He,K=he),He=K,N&&re)t:{for(he=O0,k=N,x=re,O=0,K=k;K;K=he(K))O++;K=0;for(var ae=x;ae;ae=he(ae))K++;for(;0<O-K;)k=he(k),O--;for(;0<K-O;)x=he(x),K--;for(;O--;){if(k===x||x!==null&&k===x.alternate){he=k;break t}k=he(k),x=he(x)}he=null}else he=null;N!==null&&km(V,z,N,he,!1),re!==null&&He!==null&&km(V,He,re,he,!0)}}e:{if(z=L?on(L):window,N=z.nodeName&&z.nodeName.toLowerCase(),N==="select"||N==="input"&&z.type==="file")var Me=Ff;else if(Vf(z))if(Xf)Me=KS;else{Me=WS;var ne=PS}else N=z.nodeName,!N||N.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Ao(L.elementType)&&(Me=Ff):Me=YS;if(Me&&(Me=Me(t,L))){Gf(V,Me,r,U);break e}ne&&ne(t,z,L),t==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&ko(z,"number",z.value)}switch(ne=L?on(L):window,t){case"focusin":(Vf(ne)||ne.contentEditable==="true")&&(Sr=ne,Vo=L,vn=null);break;case"focusout":vn=Vo=Sr=null;break;case"mousedown":Go=!0;break;case"contextmenu":case"mouseup":case"dragend":Go=!1,id(V,r,U);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":id(V,r,U)}var pe;if(Po)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else pr?Yf(t,r)&&(xe="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(jf&&r.locale!=="ko"&&(pr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&pr&&(pe=zf()):(ls=U,No="value"in ls?ls.value:ls.textContent,pr=!0)),ne=Ea(L,xe),0<ne.length&&(xe=new Uf(xe,t,null,r,U),V.push({event:xe,listeners:ne}),pe?xe.data=pe:(pe=Kf(r),pe!==null&&(xe.data=pe)))),(pe=NS?HS(t,r):US(t,r))&&(xe=Ea(L,"onBeforeInput"),0<xe.length&&(ne=new Uf("onBeforeInput","beforeinput",null,r,U),V.push({event:ne,listeners:xe}),ne.data=pe)),M0(V,t,L,r,U)}Dm(V,s)})}function Wn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Ea(t,s){for(var r=s+"Capture",a=[];t!==null;){var c=t,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=cn(t,r),c!=null&&a.unshift(Wn(t,c,u)),c=cn(t,s),c!=null&&a.push(Wn(t,c,u))),t.tag===3)return a;t=t.return}return[]}function O0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function km(t,s,r,a,c){for(var u=s._reactName,g=[];r!==null&&r!==a;){var v=r,b=v.alternate,L=v.stateNode;if(v=v.tag,b!==null&&b===a)break;v!==5&&v!==26&&v!==27||L===null||(b=L,c?(L=cn(r,u),L!=null&&g.unshift(Wn(r,L,b))):c||(L=cn(r,u),L!=null&&g.push(Wn(r,L,b)))),r=r.return}g.length!==0&&t.push({event:s,listeners:g})}var L0=/\r\n?/g,z0=/\u0000|\uFFFD/g;function Am(t){return(typeof t=="string"?t:""+t).replace(L0,`
`).replace(z0,"")}function Bm(t,s){return s=Am(s),Am(t)===s}function Ne(t,s,r,a,c,u){switch(r){case"children":typeof a=="string"?s==="body"||s==="textarea"&&a===""||mr(t,a):(typeof a=="number"||typeof a=="bigint")&&s!=="body"&&mr(t,""+a);break;case"className":Dl(t,"class",a);break;case"tabIndex":Dl(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Dl(t,r,a);break;case"style":Bf(t,a,u);break;case"data":if(s!=="object"){Dl(t,"data",a);break}case"src":case"href":if(a===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(r);break}a=kl(""+a),t.setAttribute(r,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(r==="formAction"?(s!=="input"&&Ne(t,s,"name",c.name,c,null),Ne(t,s,"formEncType",c.formEncType,c,null),Ne(t,s,"formMethod",c.formMethod,c,null),Ne(t,s,"formTarget",c.formTarget,c,null)):(Ne(t,s,"encType",c.encType,c,null),Ne(t,s,"method",c.method,c,null),Ne(t,s,"target",c.target,c,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(r);break}a=kl(""+a),t.setAttribute(r,a);break;case"onClick":a!=null&&(t.onclick=zi);break;case"onScroll":a!=null&&we("scroll",t);break;case"onScrollEnd":a!=null&&we("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}r=kl(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(r,""+a):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":a===!0?t.setAttribute(r,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(r,a):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(r,a):t.removeAttribute(r);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(r):t.setAttribute(r,a);break;case"popover":we("beforetoggle",t),we("toggle",t),Rl(t,"popover",a);break;case"xlinkActuate":Li(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Li(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Li(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Li(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Li(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Li(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Li(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Li(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Li(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Rl(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=cS.get(r)||r,Rl(t,r,a))}}function vh(t,s,r,a,c,u){switch(r){case"style":Bf(t,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(l(61));if(r=a.__html,r!=null){if(c.children!=null)throw Error(l(60));t.innerHTML=r}}break;case"children":typeof a=="string"?mr(t,a):(typeof a=="number"||typeof a=="bigint")&&mr(t,""+a);break;case"onScroll":a!=null&&we("scroll",t);break;case"onScrollEnd":a!=null&&we("scrollend",t);break;case"onClick":a!=null&&(t.onclick=zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wf.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),s=r.slice(2,c?r.length-7:void 0),u=t[Ot]||null,u=u!=null?u[r]:null,typeof u=="function"&&t.removeEventListener(s,u,c),typeof a=="function")){typeof u!="function"&&u!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,a,c);break e}r in t?t[r]=a:a===!0?t.setAttribute(r,""):Rl(t,r,a)}}}function Et(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",t),we("load",t);var a=!1,c=!1,u;for(u in r)if(r.hasOwnProperty(u)){var g=r[u];if(g!=null)switch(u){case"src":a=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,s));default:Ne(t,s,u,g,r,null)}}c&&Ne(t,s,"srcSet",r.srcSet,r,null),a&&Ne(t,s,"src",r.src,r,null);return;case"input":we("invalid",t);var v=u=g=c=null,b=null,L=null;for(a in r)if(r.hasOwnProperty(a)){var U=r[a];if(U!=null)switch(a){case"name":c=U;break;case"type":g=U;break;case"checked":b=U;break;case"defaultChecked":L=U;break;case"value":u=U;break;case"defaultValue":v=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,s));break;default:Ne(t,s,a,U,r,null)}}Df(t,u,v,b,L,g,c,!1);return;case"select":we("invalid",t),a=g=u=null;for(c in r)if(r.hasOwnProperty(c)&&(v=r[c],v!=null))switch(c){case"value":u=v;break;case"defaultValue":g=v;break;case"multiple":a=v;default:Ne(t,s,c,v,r,null)}s=u,r=g,t.multiple=!!a,s!=null?_r(t,!!a,s,!1):r!=null&&_r(t,!!a,r,!0);return;case"textarea":we("invalid",t),u=c=a=null;for(g in r)if(r.hasOwnProperty(g)&&(v=r[g],v!=null))switch(g){case"value":a=v;break;case"defaultValue":c=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:Ne(t,s,g,v,r,null)}kf(t,a,c,u);return;case"option":for(b in r)if(r.hasOwnProperty(b)&&(a=r[b],a!=null))switch(b){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ne(t,s,b,a,r,null)}return;case"dialog":we("beforetoggle",t),we("toggle",t),we("cancel",t),we("close",t);break;case"iframe":case"object":we("load",t);break;case"video":case"audio":for(a=0;a<Pn.length;a++)we(Pn[a],t);break;case"image":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"embed":case"source":case"link":we("error",t),we("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(a=r[L],a!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,s));default:Ne(t,s,L,a,r,null)}return;default:if(Ao(s)){for(U in r)r.hasOwnProperty(U)&&(a=r[U],a!==void 0&&vh(t,s,U,a,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(a=r[v],a!=null&&Ne(t,s,v,a,r,null))}function N0(t,s,r,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,g=null,v=null,b=null,L=null,U=null;for(N in r){var V=r[N];if(r.hasOwnProperty(N)&&V!=null)switch(N){case"checked":break;case"value":break;case"defaultValue":b=V;default:a.hasOwnProperty(N)||Ne(t,s,N,null,a,V)}}for(var z in a){var N=a[z];if(V=r[z],a.hasOwnProperty(z)&&(N!=null||V!=null))switch(z){case"type":u=N;break;case"name":c=N;break;case"checked":L=N;break;case"defaultChecked":U=N;break;case"value":g=N;break;case"defaultValue":v=N;break;case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(l(137,s));break;default:N!==V&&Ne(t,s,z,N,a,V)}}Mo(t,g,v,b,L,U,u,c);return;case"select":N=g=v=z=null;for(u in r)if(b=r[u],r.hasOwnProperty(u)&&b!=null)switch(u){case"value":break;case"multiple":N=b;default:a.hasOwnProperty(u)||Ne(t,s,u,null,a,b)}for(c in a)if(u=a[c],b=r[c],a.hasOwnProperty(c)&&(u!=null||b!=null))switch(c){case"value":z=u;break;case"defaultValue":v=u;break;case"multiple":g=u;default:u!==b&&Ne(t,s,c,u,a,b)}s=v,r=g,a=N,z!=null?_r(t,!!r,z,!1):!!a!=!!r&&(s!=null?_r(t,!!r,s,!0):_r(t,!!r,r?[]:"",!1));return;case"textarea":N=z=null;for(v in r)if(c=r[v],r.hasOwnProperty(v)&&c!=null&&!a.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Ne(t,s,v,null,a,c)}for(g in a)if(c=a[g],u=r[g],a.hasOwnProperty(g)&&(c!=null||u!=null))switch(g){case"value":z=c;break;case"defaultValue":N=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==u&&Ne(t,s,g,c,a,u)}Mf(t,z,N);return;case"option":for(var re in r)if(z=r[re],r.hasOwnProperty(re)&&z!=null&&!a.hasOwnProperty(re))switch(re){case"selected":t.selected=!1;break;default:Ne(t,s,re,null,a,z)}for(b in a)if(z=a[b],N=r[b],a.hasOwnProperty(b)&&z!==N&&(z!=null||N!=null))switch(b){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ne(t,s,b,z,a,N)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in r)z=r[he],r.hasOwnProperty(he)&&z!=null&&!a.hasOwnProperty(he)&&Ne(t,s,he,null,a,z);for(L in a)if(z=a[L],N=r[L],a.hasOwnProperty(L)&&z!==N&&(z!=null||N!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(l(137,s));break;default:Ne(t,s,L,z,a,N)}return;default:if(Ao(s)){for(var He in r)z=r[He],r.hasOwnProperty(He)&&z!==void 0&&!a.hasOwnProperty(He)&&vh(t,s,He,void 0,a,z);for(U in a)z=a[U],N=r[U],!a.hasOwnProperty(U)||z===N||z===void 0&&N===void 0||vh(t,s,U,z,a,N);return}}for(var k in r)z=r[k],r.hasOwnProperty(k)&&z!=null&&!a.hasOwnProperty(k)&&Ne(t,s,k,null,a,z);for(V in a)z=a[V],N=r[V],!a.hasOwnProperty(V)||z===N||z==null&&N==null||Ne(t,s,V,z,a,N)}function Om(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),a=0;a<r.length;a++){var c=r[a],u=c.transferSize,g=c.initiatorType,v=c.duration;if(u&&v&&Om(g)){for(g=0,v=c.responseEnd,a+=1;a<r.length;a++){var b=r[a],L=b.startTime;if(L>v)break;var U=b.transferSize,V=b.initiatorType;U&&Om(V)&&(b=b.responseEnd,g+=U*(b<v?1:(v-L)/(b-L)))}if(--a,s+=8*(u+g)/(c.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ph=null,Sh=null;function xa(t){return t.nodeType===9?t:t.ownerDocument}function Lm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zm(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function yh(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bh=null;function U0(){var t=window.event;return t&&t.type==="popstate"?t===bh?!1:(bh=t,!0):(bh=null,!1)}var Nm=typeof setTimeout=="function"?setTimeout:void 0,q0=typeof clearTimeout=="function"?clearTimeout:void 0,Hm=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof Hm<"u"?function(t){return Hm.resolve(null).then(t).catch(P0)}:Nm;function P0(t){setTimeout(function(){throw t})}function ws(t){return t==="head"}function Um(t,s){var r=s,a=0;do{var c=r.nextSibling;if(t.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"||r==="/&"){if(a===0){t.removeChild(c),Gr(s);return}a--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")a++;else if(r==="html")Yn(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Yn(r);for(var u=r.firstChild;u;){var g=u.nextSibling,v=u.nodeName;u[an]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&u.rel.toLowerCase()==="stylesheet"||r.removeChild(u),u=g}}else r==="body"&&Yn(t.ownerDocument.body);r=c}while(r);Gr(s)}function qm(t,s){var r=t;t=0;do{var a=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=a}while(r)}function Ch(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ch(r),Ro(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function W0(t,s,r,a){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[an])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(u=t.getAttribute("rel"),u==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(u!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(u=t.getAttribute("src"),(u!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===u)return t}else return t;if(t=ci(t.nextSibling),t===null)break}return null}function Y0(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ci(t.nextSibling),t===null))return null;return t}function jm(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ci(t.nextSibling),t===null))return null;return t}function wh(t){return t.data==="$?"||t.data==="$~"}function Eh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function K0(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var a=function(){s(),r.removeEventListener("DOMContentLoaded",a)};r.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function ci(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var xh=null;function Pm(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return ci(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Wm(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function Ym(t,s,r){switch(s=xa(r),t){case"html":if(t=s.documentElement,!t)throw Error(l(452));return t;case"head":if(t=s.head,!t)throw Error(l(453));return t;case"body":if(t=s.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Yn(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ro(t)}var hi=new Map,Km=new Set;function Ta(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zi=W.d;W.d={f:V0,r:G0,D:F0,C:X0,L:$0,m:I0,X:Q0,S:Z0,M:J0};function V0(){var t=Zi.f(),s=va();return t||s}function G0(t){var s=ur(t);s!==null&&s.tag===5&&s.type==="form"?a_(s):Zi.r(t)}var Yr=typeof document>"u"?null:document;function Vm(t,s,r){var a=Yr;if(a&&typeof s=="string"&&s){var c=ii(s);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Km.has(c)||(Km.add(c),t={rel:t,crossOrigin:r,href:s},a.querySelector(c)===null&&(s=a.createElement("link"),Et(s,"link",t),dt(s),a.head.appendChild(s)))}}function F0(t){Zi.D(t),Vm("dns-prefetch",t,null)}function X0(t,s){Zi.C(t,s),Vm("preconnect",t,s)}function $0(t,s,r){Zi.L(t,s,r);var a=Yr;if(a&&t&&s){var c='link[rel="preload"][as="'+ii(s)+'"]';s==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+ii(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+ii(r.imageSizes)+'"]')):c+='[href="'+ii(t)+'"]';var u=c;switch(s){case"style":u=Kr(t);break;case"script":u=Vr(t)}hi.has(u)||(t=p({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),hi.set(u,t),a.querySelector(c)!==null||s==="style"&&a.querySelector(Kn(u))||s==="script"&&a.querySelector(Vn(u))||(s=a.createElement("link"),Et(s,"link",t),dt(s),a.head.appendChild(s)))}}function I0(t,s){Zi.m(t,s);var r=Yr;if(r&&t){var a=s&&typeof s.as=="string"?s.as:"script",c='link[rel="modulepreload"][as="'+ii(a)+'"][href="'+ii(t)+'"]',u=c;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Vr(t)}if(!hi.has(u)&&(t=p({rel:"modulepreload",href:t},s),hi.set(u,t),r.querySelector(c)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Vn(u)))return}a=r.createElement("link"),Et(a,"link",t),dt(a),r.head.appendChild(a)}}}function Z0(t,s,r){Zi.S(t,s,r);var a=Yr;if(a&&t){var c=fr(a).hoistableStyles,u=Kr(t);s=s||"default";var g=c.get(u);if(!g){var v={loading:0,preload:null};if(g=a.querySelector(Kn(u)))v.loading=5;else{t=p({rel:"stylesheet",href:t,"data-precedence":s},r),(r=hi.get(u))&&Th(t,r);var b=g=a.createElement("link");dt(b),Et(b,"link",t),b._p=new Promise(function(L,U){b.onload=L,b.onerror=U}),b.addEventListener("load",function(){v.loading|=1}),b.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Ra(g,s,a)}g={type:"stylesheet",instance:g,count:1,state:v},c.set(u,g)}}}function Q0(t,s){Zi.X(t,s);var r=Yr;if(r&&t){var a=fr(r).hoistableScripts,c=Vr(t),u=a.get(c);u||(u=r.querySelector(Vn(c)),u||(t=p({src:t,async:!0},s),(s=hi.get(c))&&Rh(t,s),u=r.createElement("script"),dt(u),Et(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(c,u))}}function J0(t,s){Zi.M(t,s);var r=Yr;if(r&&t){var a=fr(r).hoistableScripts,c=Vr(t),u=a.get(c);u||(u=r.querySelector(Vn(c)),u||(t=p({src:t,async:!0,type:"module"},s),(s=hi.get(c))&&Rh(t,s),u=r.createElement("script"),dt(u),Et(u,"link",t),r.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(c,u))}}function Gm(t,s,r,a){var c=(c=ue.current)?Ta(c):null;if(!c)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Kr(r.href),r=fr(c).hoistableStyles,a=r.get(s),a||(a={type:"style",instance:null,count:0,state:null},r.set(s,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Kr(r.href);var u=fr(c).hoistableStyles,g=u.get(t);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(t,g),(u=c.querySelector(Kn(t)))&&!u._p&&(g.instance=u,g.state.loading=5),hi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},hi.set(t,r),u||ey(c,t,r,g.state))),s&&a===null)throw Error(l(528,""));return g}if(s&&a!==null)throw Error(l(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Vr(r),r=fr(c).hoistableScripts,a=r.get(s),a||(a={type:"script",instance:null,count:0,state:null},r.set(s,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Kr(t){return'href="'+ii(t)+'"'}function Kn(t){return'link[rel="stylesheet"]['+t+"]"}function Fm(t){return p({},t,{"data-precedence":t.precedence,precedence:null})}function ey(t,s,r,a){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?a.loading=1:(s=t.createElement("link"),a.preload=s,s.addEventListener("load",function(){return a.loading|=1}),s.addEventListener("error",function(){return a.loading|=2}),Et(s,"link",r),dt(s),t.head.appendChild(s))}function Vr(t){return'[src="'+ii(t)+'"]'}function Vn(t){return"script[async]"+t}function Xm(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var a=t.querySelector('style[data-href~="'+ii(r.href)+'"]');if(a)return s.instance=a,dt(a),a;var c=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),dt(a),Et(a,"style",c),Ra(a,r.precedence,t),s.instance=a;case"stylesheet":c=Kr(r.href);var u=t.querySelector(Kn(c));if(u)return s.state.loading|=4,s.instance=u,dt(u),u;a=Fm(r),(c=hi.get(c))&&Th(a,c),u=(t.ownerDocument||t).createElement("link"),dt(u);var g=u;return g._p=new Promise(function(v,b){g.onload=v,g.onerror=b}),Et(u,"link",a),s.state.loading|=4,Ra(u,r.precedence,t),s.instance=u;case"script":return u=Vr(r.src),(c=t.querySelector(Vn(u)))?(s.instance=c,dt(c),c):(a=r,(c=hi.get(u))&&(a=p({},r),Rh(a,c)),t=t.ownerDocument||t,c=t.createElement("script"),dt(c),Et(c,"link",a),t.head.appendChild(c),s.instance=c);case"void":return null;default:throw Error(l(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(a=s.instance,s.state.loading|=4,Ra(a,r.precedence,t));return s.instance}function Ra(t,s,r){for(var a=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=a.length?a[a.length-1]:null,u=c,g=0;g<a.length;g++){var v=a[g];if(v.dataset.precedence===s)u=v;else if(u!==c)break}u?u.parentNode.insertBefore(t,u.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Th(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Rh(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Da=null;function $m(t,s,r){if(Da===null){var a=new Map,c=Da=new Map;c.set(r,a)}else c=Da,a=c.get(r),a||(a=new Map,c.set(r,a));if(a.has(t))return a;for(a.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var u=r[c];if(!(u[an]||u[yt]||t==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(s)||"";g=t+g;var v=a.get(g);v?v.push(u):a.set(g,[u])}}return a}function Im(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function ty(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function iy(t,s,r,a){if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var c=Kr(a.href),u=s.querySelector(Kn(c));if(u){s=u._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ma.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=u,dt(u);return}u=s.ownerDocument||s,a=Fm(a),(c=hi.get(c))&&Th(a,c),u=u.createElement("link"),dt(u);var g=u;g._p=new Promise(function(v,b){g.onload=v,g.onerror=b}),Et(u,"link",a),r.instance=u}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Ma.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var Dh=0;function sy(t,s){return t.stylesheets&&t.count===0&&Aa(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var a=setTimeout(function(){if(t.stylesheets&&Aa(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4+s);0<t.imgBytes&&Dh===0&&(Dh=62500*H0());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Aa(t,t.stylesheets),t.unsuspend)){var u=t.unsuspend;t.unsuspend=null,u()}},(t.imgBytes>Dh?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(c)}}:null}function Ma(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Aa(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ka=null;function Aa(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ka=new Map,s.forEach(ry,t),ka=null,Ma.call(t))}function ry(t,s){if(!(s.state.loading&4)){var r=ka.get(t);if(r)var a=r.get(null);else{r=new Map,ka.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var g=c[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(r.set(g.dataset.precedence,g),a=g)}a&&r.set(null,a)}c=s.instance,g=c.getAttribute("data-precedence"),u=r.get(g)||a,u===a&&r.set(null,c),r.set(g,c),this.count++,a=Ma.bind(this),c.addEventListener("load",a),c.addEventListener("error",a),u?u.parentNode.insertBefore(c,u.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),s.state.loading|=4}}var Gn={$$typeof:R,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function ny(t,s,r,a,c,u,g,v,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wo(0),this.hiddenUpdates=wo(null),this.identifierPrefix=a,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Qm(t,s,r,a,c,u,g,v,b,L,U,V){return t=new ny(t,s,r,g,b,L,U,V,v),s=1,u===!0&&(s|=24),u=Vt(3,null,null,s),t.current=u,u.stateNode=t,s=ac(),s.refCount++,t.pooledCache=s,s.refCount++,u.memoizedState={element:a,isDehydrated:r,cache:s},uc(u),t}function Jm(t){return t?(t=Cr,t):Cr}function eg(t,s,r,a,c,u){c=Jm(c),a.context===null?a.context=c:a.pendingContext=c,a=fs(s),a.payload={element:r},u=u===void 0?null:u,u!==null&&(a.callback=u),r=ds(t,a,s),r!==null&&(qt(r,t,s),En(r,t,s))}function tg(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Mh(t,s){tg(t,s),(t=t.alternate)&&tg(t,s)}function ig(t){if(t.tag===13||t.tag===31){var s=Ps(t,67108864);s!==null&&qt(s,t,67108864),Mh(t,67108864)}}function sg(t){if(t.tag===13||t.tag===31){var s=It();s=Eo(s);var r=Ps(t,s);r!==null&&qt(r,t,s),Mh(t,s)}}var Ba=!0;function ly(t,s,r,a){var c=M.T;M.T=null;var u=W.p;try{W.p=2,kh(t,s,r,a)}finally{W.p=u,M.T=c}}function ay(t,s,r,a){var c=M.T;M.T=null;var u=W.p;try{W.p=8,kh(t,s,r,a)}finally{W.p=u,M.T=c}}function kh(t,s,r,a){if(Ba){var c=Ah(a);if(c===null)gh(t,s,a,Oa,r),ng(t,a);else if(cy(c,t,s,r,a))a.stopPropagation();else if(ng(t,a),s&4&&-1<oy.indexOf(t)){for(;c!==null;){var u=ur(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=Ns(u.pendingLanes);if(g!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;g;){var b=1<<31-Yt(g);v.entanglements[1]|=b,g&=~b}Ti(u),(Ae&6)===0&&(ma=Pt()+500,jn(0))}}break;case 31:case 13:v=Ps(u,2),v!==null&&qt(v,u,2),va(),Mh(u,2)}if(u=Ah(a),u===null&&gh(t,s,a,Oa,r),u===c)break;c=u}c!==null&&a.stopPropagation()}else gh(t,s,a,null,r)}}function Ah(t){return t=Oo(t),Bh(t)}var Oa=null;function Bh(t){if(Oa=null,t=hr(t),t!==null){var s=h(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=f(s),t!==null)return t;t=null}else if(r===31){if(t=_(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Oa=t,null}function rg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fp()){case ff:return 2;case df:return 8;case Cl:case Xp:return 32;case _f:return 268435456;default:return 32}default:return 32}}var Oh=!1,Es=null,xs=null,Ts=null,Fn=new Map,Xn=new Map,Rs=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ng(t,s){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Fn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(s.pointerId)}}function $n(t,s,r,a,c,u){return t===null||t.nativeEvent!==u?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:u,targetContainers:[c]},s!==null&&(s=ur(s),s!==null&&ig(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,c!==null&&s.indexOf(c)===-1&&s.push(c),t)}function cy(t,s,r,a,c){switch(s){case"focusin":return Es=$n(Es,t,s,r,a,c),!0;case"dragenter":return xs=$n(xs,t,s,r,a,c),!0;case"mouseover":return Ts=$n(Ts,t,s,r,a,c),!0;case"pointerover":var u=c.pointerId;return Fn.set(u,$n(Fn.get(u)||null,t,s,r,a,c)),!0;case"gotpointercapture":return u=c.pointerId,Xn.set(u,$n(Xn.get(u)||null,t,s,r,a,c)),!0}return!1}function lg(t){var s=hr(t.target);if(s!==null){var r=h(s);if(r!==null){if(s=r.tag,s===13){if(s=f(r),s!==null){t.blockedOn=s,yf(t.priority,function(){sg(r)});return}}else if(s===31){if(s=_(r),s!==null){t.blockedOn=s,yf(t.priority,function(){sg(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function La(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Ah(t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);Bo=a,r.target.dispatchEvent(a),Bo=null}else return s=ur(r),s!==null&&ig(s),t.blockedOn=r,!1;s.shift()}return!0}function ag(t,s,r){La(t)&&r.delete(s)}function hy(){Oh=!1,Es!==null&&La(Es)&&(Es=null),xs!==null&&La(xs)&&(xs=null),Ts!==null&&La(Ts)&&(Ts=null),Fn.forEach(ag),Xn.forEach(ag)}function za(t,s){t.blockedOn===s&&(t.blockedOn=null,Oh||(Oh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hy)))}var Na=null;function og(t){Na!==t&&(Na=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Na===t&&(Na=null);for(var s=0;s<t.length;s+=3){var r=t[s],a=t[s+1],c=t[s+2];if(typeof a!="function"){if(Bh(a||r)===null)continue;break}var u=ur(r);u!==null&&(t.splice(s,3),s-=3,Ac(u,{pending:!0,data:c,method:r.method,action:a},a,c))}}))}function Gr(t){function s(b){return za(b,t)}Es!==null&&za(Es,t),xs!==null&&za(xs,t),Ts!==null&&za(Ts,t),Fn.forEach(s),Xn.forEach(s);for(var r=0;r<Rs.length;r++){var a=Rs[r];a.blockedOn===t&&(a.blockedOn=null)}for(;0<Rs.length&&(r=Rs[0],r.blockedOn===null);)lg(r),r.blockedOn===null&&Rs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(a=0;a<r.length;a+=3){var c=r[a],u=r[a+1],g=c[Ot]||null;if(typeof u=="function")g||og(r);else if(g){var v=null;if(u&&u.hasAttribute("formAction")){if(c=u,g=u[Ot]||null)v=g.formAction;else if(Bh(c)!==null)continue}else v=g.action;typeof v=="function"?r[a+1]=v:(r.splice(a,3),a-=3),og(r)}}}function cg(){function t(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(g){return c=g})},focusReset:"manual",scroll:"manual"})}function s(){c!==null&&(c(),c=null),a||setTimeout(r,20)}function r(){if(!a&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),c!==null&&(c(),c=null)}}}function Lh(t){this._internalRoot=t}Ha.prototype.render=Lh.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(l(409));var r=s.current,a=It();eg(r,a,t,s,null,null)},Ha.prototype.unmount=Lh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;eg(t.current,2,null,t,null,null),va(),s[cr]=null}};function Ha(t){this._internalRoot=t}Ha.prototype.unstable_scheduleHydration=function(t){if(t){var s=Sf();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Rs.length&&s!==0&&s<Rs[r].priority;r++);Rs.splice(r,0,t),r===0&&lg(t)}};var hg=i.version;if(hg!=="19.2.4")throw Error(l(527,hg,"19.2.4"));W.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=d(s),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var uy={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ua.isDisabled&&Ua.supportsFiber)try{rn=Ua.inject(uy),Wt=Ua}catch{}}return Zn.createRoot=function(t,s){if(!o(t))throw Error(l(299));var r=!1,a="",c=v_,u=p_,g=S_;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(u=s.onCaughtError),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Qm(t,1,!1,null,null,r,a,null,c,u,g,cg),t[cr]=s.current,mh(t),new Lh(s)},Zn.hydrateRoot=function(t,s,r){if(!o(t))throw Error(l(299));var a=!1,c="",u=v_,g=p_,v=S_,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.formState!==void 0&&(b=r.formState)),s=Qm(t,1,!0,s,r??null,a,c,b,u,g,v,cg),s.context=Jm(null),r=s.current,a=It(),a=Eo(a),c=fs(a),c.callback=null,ds(r,c,a),r=a,s.current.lanes=r,ln(s,r),Ti(s),t[cr]=s.current,mh(t),new Ha(s)},Zn.version="19.2.4",Zn}var yg;function by(){if(yg)return Nh.exports;yg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}return e(),Nh.exports=yy(),Nh.exports}var Cy=by(),T=Ku();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bg="popstate";function wy(e={}){function i(l,o){let{pathname:h,search:f,hash:_}=l.location;return ru("",{pathname:h,search:f,hash:_},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(l,o){return typeof o=="string"?o:ul(o)}return xy(i,n,null,e)}function Ke(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function yi(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function Ey(){return Math.random().toString(36).substring(2,10)}function Cg(e,i){return{usr:e.state,key:e.key,idx:i}}function ru(e,i,n=null,l){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof i=="string"?Qr(i):i,state:n,key:i&&i.key||l||Ey()}}function ul({pathname:e="/",search:i="",hash:n=""}){return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Qr(e){let i={};if(e){let n=e.indexOf("#");n>=0&&(i.hash=e.substring(n),e=e.substring(0,n));let l=e.indexOf("?");l>=0&&(i.search=e.substring(l),e=e.substring(0,l)),e&&(i.pathname=e)}return i}function xy(e,i,n,l={}){let{window:o=document.defaultView,v5Compat:h=!1}=l,f=o.history,_="POP",m=null,d=S();d==null&&(d=0,f.replaceState({...f.state,idx:d},""));function S(){return(f.state||{idx:null}).idx}function p(){_="POP";let A=S(),B=A==null?null:A-d;d=A,m&&m({action:_,location:D.location,delta:B})}function y(A,B){_="PUSH";let j=ru(D.location,A,B);d=S()+1;let R=Cg(j,d),q=D.createHref(j);try{f.pushState(R,"",q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;o.location.assign(q)}h&&m&&m({action:_,location:D.location,delta:1})}function w(A,B){_="REPLACE";let j=ru(D.location,A,B);d=S();let R=Cg(j,d),q=D.createHref(j);f.replaceState(R,"",q),h&&m&&m({action:_,location:D.location,delta:0})}function C(A){return Ty(A)}let D={get action(){return _},get location(){return e(o,f)},listen(A){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(bg,p),m=A,()=>{o.removeEventListener(bg,p),m=null}},createHref(A){return i(o,A)},createURL:C,encodeLocation(A){let B=C(A);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:y,replace:w,go(A){return f.go(A)}};return D}function Ty(e,i=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(n,"No window.location.(origin|href) available to create URL");let l=typeof e=="string"?e:ul(e);return l=l.replace(/ $/,"%20"),!i&&l.startsWith("//")&&(l=n+l),new URL(l,n)}function Dv(e,i,n="/"){return Ry(e,i,n,!1)}function Ry(e,i,n,l){let o=typeof i=="string"?Qr(i):i,h=ts(o.pathname||"/",n);if(h==null)return null;let f=Mv(e);Dy(f);let _=null;for(let m=0;_==null&&m<f.length;++m){let d=qy(h);_=Hy(f[m],d,l)}return _}function Mv(e,i=[],n=[],l="",o=!1){let h=(f,_,m=o,d)=>{let S={relativePath:d===void 0?f.path||"":d,caseSensitive:f.caseSensitive===!0,childrenIndex:_,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(l)&&m)return;Ke(S.relativePath.startsWith(l),`Absolute route path "${S.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(l.length)}let p=es([l,S.relativePath]),y=n.concat(S);f.children&&f.children.length>0&&(Ke(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Mv(f.children,i,y,p,m)),!(f.path==null&&!f.index)&&i.push({path:p,score:zy(p,f.index),routesMeta:y})};return e.forEach((f,_)=>{var m;if(f.path===""||!((m=f.path)!=null&&m.includes("?")))h(f,_);else for(let d of kv(f.path))h(f,_,!0,d)}),i}function kv(e){let i=e.split("/");if(i.length===0)return[];let[n,...l]=i,o=n.endsWith("?"),h=n.replace(/\?$/,"");if(l.length===0)return o?[h,""]:[h];let f=kv(l.join("/")),_=[];return _.push(...f.map(m=>m===""?h:[h,m].join("/"))),o&&_.push(...f),_.map(m=>e.startsWith("/")&&m===""?"/":m)}function Dy(e){e.sort((i,n)=>i.score!==n.score?n.score-i.score:Ny(i.routesMeta.map(l=>l.childrenIndex),n.routesMeta.map(l=>l.childrenIndex)))}var My=/^:[\w-]+$/,ky=3,Ay=2,By=1,Oy=10,Ly=-2,wg=e=>e==="*";function zy(e,i){let n=e.split("/"),l=n.length;return n.some(wg)&&(l+=Ly),i&&(l+=Ay),n.filter(o=>!wg(o)).reduce((o,h)=>o+(My.test(h)?ky:h===""?By:Oy),l)}function Ny(e,i){return e.length===i.length&&e.slice(0,-1).every((l,o)=>l===i[o])?e[e.length-1]-i[i.length-1]:0}function Hy(e,i,n=!1){let{routesMeta:l}=e,o={},h="/",f=[];for(let _=0;_<l.length;++_){let m=l[_],d=_===l.length-1,S=h==="/"?i:i.slice(h.length)||"/",p=io({path:m.relativePath,caseSensitive:m.caseSensitive,end:d},S),y=m.route;if(!p&&d&&n&&!l[l.length-1].route.index&&(p=io({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},S)),!p)return null;Object.assign(o,p.params),f.push({params:o,pathname:es([h,p.pathname]),pathnameBase:Yy(es([h,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(h=es([h,p.pathnameBase]))}return f}function io(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,l]=Uy(e.path,e.caseSensitive,e.end),o=i.match(n);if(!o)return null;let h=o[0],f=h.replace(/(.)\/+$/,"$1"),_=o.slice(1);return{params:l.reduce((d,{paramName:S,isOptional:p},y)=>{if(S==="*"){let C=_[y]||"";f=h.slice(0,h.length-C.length).replace(/(.)\/+$/,"$1")}const w=_[y];return p&&!w?d[S]=void 0:d[S]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:h,pathnameBase:f,pattern:e}}function Uy(e,i=!1,n=!0){yi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let l=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,m)=>(l.push({paramName:_,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(l.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,i?void 0:"i"),l]}function qy(e){try{return e.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return yi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),e}}function ts(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let n=i.endsWith("/")?i.length-1:i.length,l=e.charAt(n);return l&&l!=="/"?null:e.slice(n)||"/"}var jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Py(e,i="/"){let{pathname:n,search:l="",hash:o=""}=typeof e=="string"?Qr(e):e,h;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?h=Eg(n.substring(1),"/"):h=Eg(n,i)):h=i,{pathname:h,search:Ky(l),hash:Vy(o)}}function Eg(e,i){let n=i.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ph(e,i,n,l){return`Cannot include a '${e}' character in a manually specified \`to.${i}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wy(e){return e.filter((i,n)=>n===0||i.route.path&&i.route.path.length>0)}function Vu(e){let i=Wy(e);return i.map((n,l)=>l===i.length-1?n.pathname:n.pathnameBase)}function Gu(e,i,n,l=!1){let o;typeof e=="string"?o=Qr(e):(o={...e},Ke(!o.pathname||!o.pathname.includes("?"),Ph("?","pathname","search",o)),Ke(!o.pathname||!o.pathname.includes("#"),Ph("#","pathname","hash",o)),Ke(!o.search||!o.search.includes("#"),Ph("#","search","hash",o)));let h=e===""||o.pathname==="",f=h?"/":o.pathname,_;if(f==null)_=n;else{let p=i.length-1;if(!l&&f.startsWith("..")){let y=f.split("/");for(;y[0]==="..";)y.shift(),p-=1;o.pathname=y.join("/")}_=p>=0?i[p]:"/"}let m=Py(o,_),d=f&&f!=="/"&&f.endsWith("/"),S=(h||f===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(d||S)&&(m.pathname+="/"),m}var es=e=>e.join("/").replace(/\/\/+/g,"/"),Yy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ky=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Vy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Gy=class{constructor(e,i,n,l=!1){this.status=e,this.statusText=i||"",this.internal=l,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Fy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Xy(e){return e.map(i=>i.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Av=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bv(e,i){let n=e;if(typeof n!="string"||!jy.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let l=n,o=!1;if(Av)try{let h=new URL(window.location.href),f=n.startsWith("//")?new URL(h.protocol+n):new URL(n),_=ts(f.pathname,i);f.origin===h.origin&&_!=null?n=_+f.search+f.hash:o=!0}catch{yi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:l,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ov=["POST","PUT","PATCH","DELETE"];new Set(Ov);var $y=["GET",...Ov];new Set($y);var Jr=T.createContext(null);Jr.displayName="DataRouter";var co=T.createContext(null);co.displayName="DataRouterState";var Iy=T.createContext(!1),Lv=T.createContext({isTransitioning:!1});Lv.displayName="ViewTransition";var Zy=T.createContext(new Map);Zy.displayName="Fetchers";var Qy=T.createContext(null);Qy.displayName="Await";var Jt=T.createContext(null);Jt.displayName="Navigation";var ml=T.createContext(null);ml.displayName="Location";var Oi=T.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var Fu=T.createContext(null);Fu.displayName="RouteError";var zv="REACT_ROUTER_ERROR",Jy="REDIRECT",eb="ROUTE_ERROR_RESPONSE";function tb(e){if(e.startsWith(`${zv}:${Jy}:{`))try{let i=JSON.parse(e.slice(28));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.location=="string"&&typeof i.reloadDocument=="boolean"&&typeof i.replace=="boolean")return i}catch{}}function ib(e){if(e.startsWith(`${zv}:${eb}:{`))try{let i=JSON.parse(e.slice(40));if(typeof i=="object"&&i&&typeof i.status=="number"&&typeof i.statusText=="string")return new Gy(i.status,i.statusText,i.data)}catch{}}function sb(e,{relative:i}={}){Ke(en(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:l}=T.useContext(Jt),{hash:o,pathname:h,search:f}=gl(e,{relative:i}),_=h;return n!=="/"&&(_=h==="/"?n:es([n,h])),l.createHref({pathname:_,search:f,hash:o})}function en(){return T.useContext(ml)!=null}function zs(){return Ke(en(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(ml).location}var Nv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hv(e){T.useContext(Jt).static||T.useLayoutEffect(e)}function ho(){let{isDataRoute:e}=T.useContext(Oi);return e?gb():rb()}function rb(){Ke(en(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(Jr),{basename:i,navigator:n}=T.useContext(Jt),{matches:l}=T.useContext(Oi),{pathname:o}=zs(),h=JSON.stringify(Vu(l)),f=T.useRef(!1);return Hv(()=>{f.current=!0}),T.useCallback((m,d={})=>{if(yi(f.current,Nv),!f.current)return;if(typeof m=="number"){n.go(m);return}let S=Gu(m,JSON.parse(h),o,d.relative==="path");e==null&&i!=="/"&&(S.pathname=S.pathname==="/"?i:es([i,S.pathname])),(d.replace?n.replace:n.push)(S,d.state,d)},[i,n,h,o,e])}T.createContext(null);function gl(e,{relative:i}={}){let{matches:n}=T.useContext(Oi),{pathname:l}=zs(),o=JSON.stringify(Vu(n));return T.useMemo(()=>Gu(e,JSON.parse(o),l,i==="path"),[e,o,l,i])}function nb(e,i){return Uv(e,i)}function Uv(e,i,n,l,o){var j;Ke(en(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=T.useContext(Jt),{matches:f}=T.useContext(Oi),_=f[f.length-1],m=_?_.params:{},d=_?_.pathname:"/",S=_?_.pathnameBase:"/",p=_&&_.route;{let R=p&&p.path||"";jv(d,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let y=zs(),w;if(i){let R=typeof i=="string"?Qr(i):i;Ke(S==="/"||((j=R.pathname)==null?void 0:j.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=y;let C=w.pathname||"/",D=C;if(S!=="/"){let R=S.replace(/^\//,"").split("/");D="/"+C.replace(/^\//,"").split("/").slice(R.length).join("/")}let A=Dv(e,{pathname:D});yi(p||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),yi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=hb(A&&A.map(R=>Object.assign({},R,{params:Object.assign({},m,R.params),pathname:es([S,h.encodeLocation?h.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?S:es([S,h.encodeLocation?h.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),f,n,l,o);return i&&B?T.createElement(ml.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},B):B}function lb(){let e=mb(),i=Fy(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},h={padding:"2px 4px",backgroundColor:l},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:h},"ErrorBoundary")," or"," ",T.createElement("code",{style:h},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},i),n?T.createElement("pre",{style:o},n):null,f)}var ab=T.createElement(lb,null),qv=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,i){return i.location!==e.location||i.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:i.error,location:i.location,revalidation:e.revalidation||i.revalidation}}componentDidCatch(e,i){this.props.onError?this.props.onError(e,i):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=ib(e.digest);n&&(e=n)}let i=e!==void 0?T.createElement(Oi.Provider,{value:this.props.routeContext},T.createElement(Fu.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?T.createElement(ob,{error:e},i):i}};qv.contextType=Iy;var Wh=new WeakMap;function ob({children:e,error:i}){let{basename:n}=T.useContext(Jt);if(typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){let l=tb(i.digest);if(l){let o=Wh.get(i);if(o)throw o;let h=Bv(l.location,n);if(Av&&!Wh.get(i))if(h.isExternal||l.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:l.replace}));throw Wh.set(i,f),f}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return e}function cb({routeContext:e,match:i,children:n}){let l=T.useContext(Jr);return l&&l.static&&l.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=i.route.id),T.createElement(Oi.Provider,{value:e},n)}function hb(e,i=[],n=null,l=null,o=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(i.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let h=e,f=n==null?void 0:n.errors;if(f!=null){let S=h.findIndex(p=>p.route.id&&(f==null?void 0:f[p.route.id])!==void 0);Ke(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),h=h.slice(0,Math.min(h.length,S+1))}let _=!1,m=-1;if(n)for(let S=0;S<h.length;S++){let p=h[S];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=S),p.route.id){let{loaderData:y,errors:w}=n,C=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||C){_=!0,m>=0?h=h.slice(0,m+1):h=[h[0]];break}}}let d=n&&l?(S,p)=>{var y,w;l(S,{location:n.location,params:((w=(y=n.matches)==null?void 0:y[0])==null?void 0:w.params)??{},unstable_pattern:Xy(n.matches),errorInfo:p})}:void 0;return h.reduceRight((S,p,y)=>{let w,C=!1,D=null,A=null;n&&(w=f&&p.route.id?f[p.route.id]:void 0,D=p.route.errorElement||ab,_&&(m<0&&y===0?(jv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,A=null):m===y&&(C=!0,A=p.route.hydrateFallbackElement||null)));let B=i.concat(h.slice(0,y+1)),j=()=>{let R;return w?R=D:C?R=A:p.route.Component?R=T.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=S,T.createElement(cb,{match:p,routeContext:{outlet:S,matches:B,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?T.createElement(qv,{location:n.location,revalidation:n.revalidation,component:D,error:w,children:j(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:d}):j()},null)}function Xu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ub(e){let i=T.useContext(Jr);return Ke(i,Xu(e)),i}function fb(e){let i=T.useContext(co);return Ke(i,Xu(e)),i}function db(e){let i=T.useContext(Oi);return Ke(i,Xu(e)),i}function $u(e){let i=db(e),n=i.matches[i.matches.length-1];return Ke(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function _b(){return $u("useRouteId")}function mb(){var l;let e=T.useContext(Fu),i=fb("useRouteError"),n=$u("useRouteError");return e!==void 0?e:(l=i.errors)==null?void 0:l[n]}function gb(){let{router:e}=ub("useNavigate"),i=$u("useNavigate"),n=T.useRef(!1);return Hv(()=>{n.current=!0}),T.useCallback(async(o,h={})=>{yi(n.current,Nv),n.current&&(typeof o=="number"?await e.navigate(o):await e.navigate(o,{fromRouteId:i,...h}))},[e,i])}var xg={};function jv(e,i,n){!i&&!xg[e]&&(xg[e]=!0,yi(!1,n))}T.memo(vb);function vb({routes:e,future:i,state:n,onError:l}){return Uv(e,void 0,n,l,i)}function pb({to:e,replace:i,state:n,relative:l}){Ke(en(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=T.useContext(Jt);yi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=T.useContext(Oi),{pathname:f}=zs(),_=ho(),m=Gu(e,Vu(h),f,l==="path"),d=JSON.stringify(m);return T.useEffect(()=>{_(JSON.parse(d),{replace:i,state:n,relative:l})},[_,d,l,i,n]),null}function Ga(e){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sb({basename:e="/",children:i=null,location:n,navigationType:l="POP",navigator:o,static:h=!1,unstable_useTransitions:f}){Ke(!en(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let _=e.replace(/^\/*/,"/"),m=T.useMemo(()=>({basename:_,navigator:o,static:h,unstable_useTransitions:f,future:{}}),[_,o,h,f]);typeof n=="string"&&(n=Qr(n));let{pathname:d="/",search:S="",hash:p="",state:y=null,key:w="default"}=n,C=T.useMemo(()=>{let D=ts(d,_);return D==null?null:{location:{pathname:D,search:S,hash:p,state:y,key:w},navigationType:l}},[_,d,S,p,y,w,l]);return yi(C!=null,`<Router basename="${_}"> is not able to match the URL "${d}${S}${p}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:T.createElement(Jt.Provider,{value:m},T.createElement(ml.Provider,{children:i,value:C}))}function yb({children:e,location:i}){return nb(nu(e),i)}function nu(e,i=[]){let n=[];return T.Children.forEach(e,(l,o)=>{if(!T.isValidElement(l))return;let h=[...i,o];if(l.type===T.Fragment){n.push.apply(n,nu(l.props.children,h));return}Ke(l.type===Ga,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!l.props.index||!l.props.children,"An index route cannot have child routes.");let f={id:l.props.id||h.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(f.children=nu(l.props.children,h)),n.push(f)}),n}var Fa="get",Xa="application/x-www-form-urlencoded";function uo(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function bb(e){return uo(e)&&e.tagName.toLowerCase()==="button"}function Cb(e){return uo(e)&&e.tagName.toLowerCase()==="form"}function wb(e){return uo(e)&&e.tagName.toLowerCase()==="input"}function Eb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xb(e,i){return e.button===0&&(!i||i==="_self")&&!Eb(e)}var qa=null;function Tb(){if(qa===null)try{new FormData(document.createElement("form"),0),qa=!1}catch{qa=!0}return qa}var Rb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yh(e){return e!=null&&!Rb.has(e)?(yi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xa}"`),null):e}function Db(e,i){let n,l,o,h,f;if(Cb(e)){let _=e.getAttribute("action");l=_?ts(_,i):null,n=e.getAttribute("method")||Fa,o=Yh(e.getAttribute("enctype"))||Xa,h=new FormData(e)}else if(bb(e)||wb(e)&&(e.type==="submit"||e.type==="image")){let _=e.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||_.getAttribute("action");if(l=m?ts(m,i):null,n=e.getAttribute("formmethod")||_.getAttribute("method")||Fa,o=Yh(e.getAttribute("formenctype"))||Yh(_.getAttribute("enctype"))||Xa,h=new FormData(_,e),!Tb()){let{name:d,type:S,value:p}=e;if(S==="image"){let y=d?`${d}.`:"";h.append(`${y}x`,"0"),h.append(`${y}y`,"0")}else d&&h.append(d,p)}}else{if(uo(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fa,l=null,o=Xa,f=e}return h&&o==="text/plain"&&(f=h,h=void 0),{action:l,method:n.toLowerCase(),encType:o,formData:h,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iu(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function Mb(e,i,n,l){let o=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${l}`:o.pathname=`${o.pathname}.${l}`:o.pathname==="/"?o.pathname=`_root.${l}`:i&&ts(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${l}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${l}`,o}async function kb(e,i){if(e.id in i)return i[e.id];try{let n=await import(e.module);return i[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ab(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Bb(e,i,n){let l=await Promise.all(e.map(async o=>{let h=i.routes[o.route.id];if(h){let f=await kb(h,n);return f.links?f.links():[]}return[]}));return Nb(l.flat(1).filter(Ab).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Tg(e,i,n,l,o,h){let f=(m,d)=>n[d]?m.route.id!==n[d].route.id:!0,_=(m,d)=>{var S;return n[d].pathname!==m.pathname||((S=n[d].route.path)==null?void 0:S.endsWith("*"))&&n[d].params["*"]!==m.params["*"]};return h==="assets"?i.filter((m,d)=>f(m,d)||_(m,d)):h==="data"?i.filter((m,d)=>{var p;let S=l.routes[m.route.id];if(!S||!S.hasLoader)return!1;if(f(m,d)||_(m,d))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Ob(e,i,{includeHydrateFallback:n}={}){return Lb(e.map(l=>{let o=i.routes[l.route.id];if(!o)return[];let h=[o.module];return o.clientActionModule&&(h=h.concat(o.clientActionModule)),o.clientLoaderModule&&(h=h.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(h=h.concat(o.hydrateFallbackModule)),o.imports&&(h=h.concat(o.imports)),h}).flat(1))}function Lb(e){return[...new Set(e)]}function zb(e){let i={},n=Object.keys(e).sort();for(let l of n)i[l]=e[l];return i}function Nb(e,i){let n=new Set;return new Set(i),e.reduce((l,o)=>{let h=JSON.stringify(zb(o));return n.has(h)||(n.add(h),l.push({key:h,link:o})),l},[])}function Pv(){let e=T.useContext(Jr);return Iu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Hb(){let e=T.useContext(co);return Iu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Zu=T.createContext(void 0);Zu.displayName="FrameworkContext";function Wv(){let e=T.useContext(Zu);return Iu(e,"You must render this element inside a <HydratedRouter> element"),e}function Ub(e,i){let n=T.useContext(Zu),[l,o]=T.useState(!1),[h,f]=T.useState(!1),{onFocus:_,onBlur:m,onMouseEnter:d,onMouseLeave:S,onTouchStart:p}=i,y=T.useRef(null);T.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let D=B=>{B.forEach(j=>{f(j.isIntersecting)})},A=new IntersectionObserver(D,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[e]),T.useEffect(()=>{if(l){let D=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(D)}}},[l]);let w=()=>{o(!0)},C=()=>{o(!1),f(!1)};return n?e!=="intent"?[h,y,{}]:[h,y,{onFocus:Qn(_,w),onBlur:Qn(m,C),onMouseEnter:Qn(d,w),onMouseLeave:Qn(S,C),onTouchStart:Qn(p,w)}]:[!1,y,{}]}function Qn(e,i){return n=>{e&&e(n),n.defaultPrevented||i(n)}}function qb({page:e,...i}){let{router:n}=Pv(),l=T.useMemo(()=>Dv(n.routes,e,n.basename),[n.routes,e,n.basename]);return l?T.createElement(Pb,{page:e,matches:l,...i}):null}function jb(e){let{manifest:i,routeModules:n}=Wv(),[l,o]=T.useState([]);return T.useEffect(()=>{let h=!1;return Bb(e,i,n).then(f=>{h||o(f)}),()=>{h=!0}},[e,i,n]),l}function Pb({page:e,matches:i,...n}){let l=zs(),{future:o,manifest:h,routeModules:f}=Wv(),{basename:_}=Pv(),{loaderData:m,matches:d}=Hb(),S=T.useMemo(()=>Tg(e,i,d,h,l,"data"),[e,i,d,h,l]),p=T.useMemo(()=>Tg(e,i,d,h,l,"assets"),[e,i,d,h,l]),y=T.useMemo(()=>{if(e===l.pathname+l.search+l.hash)return[];let D=new Set,A=!1;if(i.forEach(j=>{var q;let R=h.routes[j.route.id];!R||!R.hasLoader||(!S.some(Z=>Z.route.id===j.route.id)&&j.route.id in m&&((q=f[j.route.id])!=null&&q.shouldRevalidate)||R.hasClientLoader?A=!0:D.add(j.route.id))}),D.size===0)return[];let B=Mb(e,_,o.unstable_trailingSlashAwareDataRequests,"data");return A&&D.size>0&&B.searchParams.set("_routes",i.filter(j=>D.has(j.route.id)).map(j=>j.route.id).join(",")),[B.pathname+B.search]},[_,o.unstable_trailingSlashAwareDataRequests,m,l,h,S,i,e,f]),w=T.useMemo(()=>Ob(p,h),[p,h]),C=jb(p);return T.createElement(T.Fragment,null,y.map(D=>T.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),w.map(D=>T.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),C.map(({key:D,link:A})=>T.createElement("link",{key:D,nonce:n.nonce,...A,crossOrigin:A.crossOrigin??n.crossOrigin})))}function Wb(...e){return i=>{e.forEach(n=>{typeof n=="function"?n(i):n!=null&&(n.current=i)})}}var Yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yb&&(window.__reactRouterVersion="7.13.0")}catch{}function Kb({basename:e,children:i,unstable_useTransitions:n,window:l}){let o=T.useRef();o.current==null&&(o.current=wy({window:l,v5Compat:!0}));let h=o.current,[f,_]=T.useState({action:h.action,location:h.location}),m=T.useCallback(d=>{n===!1?_(d):T.startTransition(()=>_(d))},[n]);return T.useLayoutEffect(()=>h.listen(m),[h,m]),T.createElement(Sb,{basename:e,children:i,location:f.location,navigationType:f.action,navigator:h,unstable_useTransitions:n})}var Yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kv=T.forwardRef(function({onClick:i,discover:n="render",prefetch:l="none",relative:o,reloadDocument:h,replace:f,state:_,target:m,to:d,preventScrollReset:S,viewTransition:p,unstable_defaultShouldRevalidate:y,...w},C){let{basename:D,unstable_useTransitions:A}=T.useContext(Jt),B=typeof d=="string"&&Yv.test(d),j=Bv(d,D);d=j.to;let R=sb(d,{relative:o}),[q,Z,F]=Ub(l,w),H=Xb(d,{replace:f,state:_,target:m,preventScrollReset:S,relative:o,viewTransition:p,unstable_defaultShouldRevalidate:y,unstable_useTransitions:A});function le(Re){i&&i(Re),Re.defaultPrevented||H(Re)}let fe=T.createElement("a",{...w,...F,href:j.absoluteURL||R,onClick:j.isExternal||h?i:le,ref:Wb(C,Z),target:m,"data-discover":!B&&n==="render"?"true":void 0});return q&&!B?T.createElement(T.Fragment,null,fe,T.createElement(qb,{page:R})):fe});Kv.displayName="Link";var Vb=T.forwardRef(function({"aria-current":i="page",caseSensitive:n=!1,className:l="",end:o=!1,style:h,to:f,viewTransition:_,children:m,...d},S){let p=gl(f,{relative:d.relative}),y=zs(),w=T.useContext(co),{navigator:C,basename:D}=T.useContext(Jt),A=w!=null&&Jb(p)&&_===!0,B=C.encodeLocation?C.encodeLocation(p).pathname:p.pathname,j=y.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(j=j.toLowerCase(),R=R?R.toLowerCase():null,B=B.toLowerCase()),R&&D&&(R=ts(R,D)||R);const q=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let Z=j===B||!o&&j.startsWith(B)&&j.charAt(q)==="/",F=R!=null&&(R===B||!o&&R.startsWith(B)&&R.charAt(B.length)==="/"),H={isActive:Z,isPending:F,isTransitioning:A},le=Z?i:void 0,fe;typeof l=="function"?fe=l(H):fe=[l,Z?"active":null,F?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let Re=typeof h=="function"?h(H):h;return T.createElement(Kv,{...d,"aria-current":le,className:fe,ref:S,style:Re,to:f,viewTransition:_},typeof m=="function"?m(H):m)});Vb.displayName="NavLink";var Gb=T.forwardRef(({discover:e="render",fetcherKey:i,navigate:n,reloadDocument:l,replace:o,state:h,method:f=Fa,action:_,onSubmit:m,relative:d,preventScrollReset:S,viewTransition:p,unstable_defaultShouldRevalidate:y,...w},C)=>{let{unstable_useTransitions:D}=T.useContext(Jt),A=Zb(),B=Qb(_,{relative:d}),j=f.toLowerCase()==="get"?"get":"post",R=typeof _=="string"&&Yv.test(_),q=Z=>{if(m&&m(Z),Z.defaultPrevented)return;Z.preventDefault();let F=Z.nativeEvent.submitter,H=(F==null?void 0:F.getAttribute("formmethod"))||f,le=()=>A(F||Z.currentTarget,{fetcherKey:i,method:H,navigate:n,replace:o,state:h,relative:d,preventScrollReset:S,viewTransition:p,unstable_defaultShouldRevalidate:y});D&&n!==!1?T.startTransition(()=>le()):le()};return T.createElement("form",{ref:C,method:j,action:B,onSubmit:l?m:q,...w,"data-discover":!R&&e==="render"?"true":void 0})});Gb.displayName="Form";function Fb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vv(e){let i=T.useContext(Jr);return Ke(i,Fb(e)),i}function Xb(e,{target:i,replace:n,state:l,preventScrollReset:o,relative:h,viewTransition:f,unstable_defaultShouldRevalidate:_,unstable_useTransitions:m}={}){let d=ho(),S=zs(),p=gl(e,{relative:h});return T.useCallback(y=>{if(xb(y,i)){y.preventDefault();let w=n!==void 0?n:ul(S)===ul(p),C=()=>d(e,{replace:w,state:l,preventScrollReset:o,relative:h,viewTransition:f,unstable_defaultShouldRevalidate:_});m?T.startTransition(()=>C()):C()}},[S,d,p,n,l,i,e,o,h,f,_,m])}var $b=0,Ib=()=>`__${String(++$b)}__`;function Zb(){let{router:e}=Vv("useSubmit"),{basename:i}=T.useContext(Jt),n=_b(),l=e.fetch,o=e.navigate;return T.useCallback(async(h,f={})=>{let{action:_,method:m,encType:d,formData:S,body:p}=Db(h,i);if(f.navigate===!1){let y=f.fetcherKey||Ib();await l(y,n,f.action||_,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:p,formMethod:f.method||m,formEncType:f.encType||d,flushSync:f.flushSync})}else await o(f.action||_,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:p,formMethod:f.method||m,formEncType:f.encType||d,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[l,o,i,n])}function Qb(e,{relative:i}={}){let{basename:n}=T.useContext(Jt),l=T.useContext(Oi);Ke(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),h={...gl(e||".",{relative:i})},f=zs();if(e==null){h.search=f.search;let _=new URLSearchParams(h.search),m=_.getAll("index");if(m.some(S=>S==="")){_.delete("index"),m.filter(p=>p).forEach(p=>_.append("index",p));let S=_.toString();h.search=S?`?${S}`:""}}return(!e||e===".")&&o.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(h.pathname=h.pathname==="/"?n:es([n,h.pathname])),ul(h)}function Jb(e,{relative:i}={}){let n=T.useContext(Lv);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=Vv("useViewTransitionState"),o=gl(e,{relative:i});if(!n.isTransitioning)return!1;let h=ts(n.currentLocation.pathname,l)||n.currentLocation.pathname,f=ts(n.nextLocation.pathname,l)||n.nextLocation.pathname;return io(o.pathname,f)!=null||io(o.pathname,h)!=null}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lu=function(e,i){return lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var o in l)l.hasOwnProperty(o)&&(n[o]=l[o])},lu(e,i)};function Gv(e,i){lu(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}function e1(e){var i=typeof Symbol=="function"&&e[Symbol.iterator],n=0;return i?i.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function t1(e,i){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var l=n.call(e),o,h=[],f;try{for(;(i===void 0||i-- >0)&&!(o=l.next()).done;)h.push(o.value)}catch(_){f={error:_}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(f)throw f.error}}return h}function i1(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(t1(arguments[i]));return e}var Fv=(function(){function e(i,n){this.target=n,this.type=i}return e})(),s1=(function(e){Gv(i,e);function i(n,l){var o=e.call(this,"error",l)||this;return o.message=n.message,o.error=n,o}return i})(Fv),r1=(function(e){Gv(i,e);function i(n,l,o){n===void 0&&(n=1e3),l===void 0&&(l="");var h=e.call(this,"close",o)||this;return h.wasClean=!0,h.code=n,h.reason=l,h}return i})(Fv);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var n1=function(){if(typeof WebSocket<"u")return WebSocket},l1=function(e){return typeof e<"u"&&!!e&&e.CLOSING===2},er={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0},a1=(function(){function e(i,n,l){var o=this;l===void 0&&(l={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(h){o._debug("open event");var f=o._options.minUptime,_=f===void 0?er.minUptime:f;clearTimeout(o._connectTimeout),o._uptimeTimeout=setTimeout(function(){return o._acceptOpen()},_),o._ws.binaryType=o._binaryType,o._messageQueue.forEach(function(m){return o._ws.send(m)}),o._messageQueue=[],o.onopen&&o.onopen(h),o._listeners.open.forEach(function(m){return o._callEventListener(h,m)})},this._handleMessage=function(h){o._debug("message event"),o.onmessage&&o.onmessage(h),o._listeners.message.forEach(function(f){return o._callEventListener(h,f)})},this._handleError=function(h){o._debug("error event",h.message),o._disconnect(void 0,h.message==="TIMEOUT"?"timeout":void 0),o.onerror&&o.onerror(h),o._debug("exec error listeners"),o._listeners.error.forEach(function(f){return o._callEventListener(h,f)}),o._connect()},this._handleClose=function(h){o._debug("close event"),o._clearTimeouts(),o._shouldReconnect&&o._connect(),o.onclose&&o.onclose(h),o._listeners.close.forEach(function(f){return o._callEventListener(h,f)})},this._url=i,this._protocols=n,this._options=l,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(e,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CONNECTING",{get:function(){return e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OPEN",{get:function(){return e.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSING",{get:function(){return e.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CLOSED",{get:function(){return e.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(i){this._binaryType=i,this._ws&&(this._ws.binaryType=i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){var i=this._messageQueue.reduce(function(n,l){return typeof l=="string"?n+=l.length:l instanceof Blob?n+=l.size:n+=l.byteLength,n},0);return i+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),e.prototype.close=function(i,n){if(i===void 0&&(i=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(i,n)},e.prototype.reconnect=function(i,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(i,n),this._connect())},e.prototype.send=function(i){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",i),this._ws.send(i);else{var n=this._options.maxEnqueuedMessages,l=n===void 0?er.maxEnqueuedMessages:n;this._messageQueue.length<l&&(this._debug("enqueue",i),this._messageQueue.push(i))}},e.prototype.addEventListener=function(i,n){this._listeners[i]&&this._listeners[i].push(n)},e.prototype.dispatchEvent=function(i){var n,l,o=this._listeners[i.type];if(o)try{for(var h=e1(o),f=h.next();!f.done;f=h.next()){var _=f.value;this._callEventListener(i,_)}}catch(m){n={error:m}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(n)throw n.error}}return!0},e.prototype.removeEventListener=function(i,n){this._listeners[i]&&(this._listeners[i]=this._listeners[i].filter(function(l){return l!==n}))},e.prototype._debug=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];this._options.debug&&console.log.apply(console,i1(["RWS>"],i))},e.prototype._getNextDelay=function(){var i=this._options,n=i.reconnectionDelayGrowFactor,l=n===void 0?er.reconnectionDelayGrowFactor:n,o=i.minReconnectionDelay,h=o===void 0?er.minReconnectionDelay:o,f=i.maxReconnectionDelay,_=f===void 0?er.maxReconnectionDelay:f,m=0;return this._retryCount>0&&(m=h*Math.pow(l,this._retryCount-1),m>_&&(m=_)),this._debug("next delay",m),m},e.prototype._wait=function(){var i=this;return new Promise(function(n){setTimeout(n,i._getNextDelay())})},e.prototype._getNextUrl=function(i){if(typeof i=="string")return Promise.resolve(i);if(typeof i=="function"){var n=i();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},e.prototype._connect=function(){var i=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,l=n.maxRetries,o=l===void 0?er.maxRetries:l,h=n.connectionTimeout,f=h===void 0?er.connectionTimeout:h,_=n.WebSocket,m=_===void 0?n1():_;if(this._retryCount>=o){this._debug("max retries reached",this._retryCount,">=",o);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!l1(m))throw Error("No valid WebSocket class provided");this._wait().then(function(){return i._getNextUrl(i._url)}).then(function(d){i._closeCalled||(i._debug("connect",{url:d,protocols:i._protocols}),i._ws=i._protocols?new m(d,i._protocols):new m(d),i._ws.binaryType=i._binaryType,i._connectLock=!1,i._addListeners(),i._connectTimeout=setTimeout(function(){return i._handleTimeout()},f))})}},e.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new s1(Error("TIMEOUT"),this))},e.prototype._disconnect=function(i,n){if(i===void 0&&(i=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(i,n),this._handleClose(new r1(i,n,this))}catch{}}},e.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},e.prototype._callEventListener=function(i,n){"handleEvent"in n?n.handleEvent(i):n(i)},e.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},e.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},e.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},e})();const Qu=new TextEncoder,o1=new TextDecoder;function Xv(e,i){const n=Qu.encode(e);if(n.length>255)throw new Error(`Session ID too long: ${n.length} bytes (max 255)`);const l=new Uint8Array(1+n.length+i.length);return l[0]=n.length,l.set(n,1),l.set(i,1+n.length),l}function c1(e){if(e.length<1)throw new Error("Frame too short: missing session ID length byte");const i=e[0];if(e.length<1+i)throw new Error(`Frame too short: expected ${1+i} bytes for header, got ${e.length}`);const n=e.slice(1,1+i),l=o1.decode(n),o=e.slice(1+i);return{sessionId:l,payload:o}}function h1(e,i,n){const l=Qu.encode(JSON.stringify({type:"resize",cols:i,rows:n}));return Xv(e,l)}function u1(e,i){const n=Qu.encode(i);return Xv(e,n)}const Ju="terminal-session-code";function f1(){try{return sessionStorage.getItem(Ju)}catch{return null}}function d1(e){try{sessionStorage.setItem(Ju,e)}catch{}}function Kh(){try{sessionStorage.removeItem(Ju)}catch{}}const $v=T.createContext(null);function vl(){const e=T.useContext($v);if(!e)throw new Error("useConnection must be used within ConnectionProvider");return e}function _1({children:e}){const[i,n]=T.useState("disconnected"),[l,o]=T.useState(null),[h,f]=T.useState(null),_=T.useRef(null),m=T.useRef(null),d=T.useRef(null),S=T.useRef(new Set),p=T.useRef(new Set),y=T.useRef("disconnected"),w=T.useCallback(F=>(S.current.add(F),()=>{S.current.delete(F)}),[]),C=T.useCallback(F=>(p.current.add(F),()=>{p.current.delete(F)}),[]),D=T.useCallback(F=>{const H=_.current;H&&H.readyState===WebSocket.OPEN&&H.send(JSON.stringify(F))},[]),A=T.useCallback(F=>{const H=_.current;y.current==="connected"&&H&&H.readyState===WebSocket.OPEN&&H.send(F)},[]),B=T.useCallback((F,H)=>{const le=u1(F,H);A(le)},[A]),j=T.useCallback((F,H,le)=>{const fe=h1(F,H,le);A(fe)},[A]),R=T.useCallback(()=>{_.current&&(_.current.close(),_.current=null),n("disconnected"),y.current="disconnected",o(null),f(null),m.current=null,Kh();for(const F of S.current)F({type:"__disconnect"})},[]),q=T.useCallback((F,H)=>{_.current&&(_.current.close(),_.current=null),n("connecting"),y.current="connecting",o(null),f(null),m.current=F,d.current=H??null;const le=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/ws`,fe=new a1(le,[],{maxReconnectionDelay:3e4,minReconnectionDelay:1e3,reconnectionDelayGrowFactor:2,maxRetries:10});fe.binaryType="arraybuffer",fe.addEventListener("open",()=>{if(n("authenticating"),y.current="authenticating",m.current){const Re={type:"auth",session_code:m.current};fe.send(JSON.stringify(Re))}}),fe.addEventListener("message",Re=>{if(Re.data instanceof ArrayBuffer){try{const de=new Uint8Array(Re.data),{sessionId:$,payload:X}=c1(de);for(const te of p.current)te($,X)}catch(de){console.error("[Connection] Failed to decode binary frame:",de)}return}try{const de=JSON.parse(Re.data);switch(de.type){case"auth_success":{if(n("connected"),y.current="connected",f(m.current),o(null),m.current&&d1(m.current),d.current){const $=d.current;d.current=null,$()}for(const $ of S.current)$(de);break}case"auth_failed":{const $=de;console.error("[Connection] Auth failed:",$.reason),o($.reason),n("disconnected"),y.current="disconnected",f(null),Kh(),_.current&&(_.current.close(),_.current=null);break}case"error":{const $=de;console.error("[Connection] Error:",$.code,$.message),o($.message),n("disconnected"),y.current="disconnected",f(null),Kh(),_.current&&(_.current.close(),_.current=null);break}case"session_list":case"session_connected":case"session_disconnected":case"config":case"tab_list":case"tab_switch":case"tab_created":case"tab_closed":{for(const $ of S.current)$(de);break}default:console.log("[Connection] Unhandled message type:",de.type)}}catch(de){console.error("[Connection] Failed to parse message:",de)}}),fe.addEventListener("close",()=>{(y.current==="connected"||y.current!=="disconnected"&&_.current)&&(n("reconnecting"),y.current="reconnecting")}),fe.addEventListener("error",()=>{}),_.current=fe},[]);T.useEffect(()=>{const F=f1();F&&y.current==="disconnected"&&q(F)},[q]);const Z={state:i,error:l,sessionCode:h,isConnected:i==="connected",connect:q,disconnect:R,sendMessage:D,sendTerminalInput:B,sendTerminalResize:j,sendBinary:A,registerMessageHandler:w,registerBinaryHandler:C};return I.jsx($v.Provider,{value:Z,children:e})}const m1=100,Rg=20,Dg=5,Iv=5e4,Fe={foreground:"#d2d2d2",background:"#1e1e1e",cursor:"#aeafad",cursorAccent:"#1e1e1e",selectionBackground:"#3a3a5a",selectionForeground:void 0,black:"#1e1e1e",red:"#f44747",green:"#6a9955",yellow:"#d7ba7d",blue:"#569cd6",magenta:"#c586c0",cyan:"#4ec9b0",white:"#d4d4d4",brightBlack:"#808080",brightRed:"#f44747",brightGreen:"#6a9955",brightYellow:"#d7ba7d",brightBlue:"#569cd6",brightMagenta:"#c586c0",brightCyan:"#4ec9b0",brightWhite:"#e8e8e8"},g1=typeof window<"u"&&window.innerWidth<768,$a={fontFamily:'Menlo, Monaco, "Courier New", monospace',fontSize:g1?12:14,cursorStyle:"block",cursorBlink:!0,scrollback:Iv,theme:Fe,allowTransparency:!1,macOptionIsMeta:!1,customGlyphs:!0,drawBoldTextInBrightColors:!0,scrollOnUserInput:!0,convertEol:!1,wordSeparator:` ()[]{}'"`};function v1(e){switch(e){case"underline":return"underline";case"bar":return"bar";default:return"block"}}function p1(e){return{foreground:e.foreground??Fe.foreground,background:e.background??Fe.background,cursor:e.cursor??Fe.cursor,cursorAccent:e.cursorAccent??Fe.cursorAccent,selectionBackground:e.selectionBackground??Fe.selectionBackground,selectionForeground:e.selectionForeground??Fe.selectionForeground,black:e.black??Fe.black,red:e.red??Fe.red,green:e.green??Fe.green,yellow:e.yellow??Fe.yellow,blue:e.blue??Fe.blue,magenta:e.magenta??Fe.magenta,cyan:e.cyan??Fe.cyan,white:e.white??Fe.white,brightBlack:e.brightBlack??Fe.brightBlack,brightRed:e.brightRed??Fe.brightRed,brightGreen:e.brightGreen??Fe.brightGreen,brightYellow:e.brightYellow??Fe.brightYellow,brightBlue:e.brightBlue??Fe.brightBlue,brightMagenta:e.brightMagenta??Fe.brightMagenta,brightCyan:e.brightCyan??Fe.brightCyan,brightWhite:e.brightWhite??Fe.brightWhite}}function S1(e){const i=typeof window<"u"&&window.innerWidth<768;let n=e.fontSize||$a.fontSize;return i&&n&&n>12&&(n=12),{...$a,fontFamily:e.font||$a.fontFamily,fontSize:n,cursorStyle:v1(e.cursorStyle),cursorBlink:e.cursorBlink,scrollback:e.scrollback||Iv,theme:p1(e.theme)}}const y1=!1,Mg=(...e)=>y1,Zv=T.createContext(null);function fo(){const e=T.useContext(Zv);if(!e)throw new Error("useTerminal must be used within TerminalProvider");return e}function b1({children:e}){const[i,n]=T.useState(null),[l,o]=T.useState({...$a}),h=T.useRef(new Map),f=T.useRef(new Map),{registerMessageHandler:_,registerBinaryHandler:m}=vl(),d=T.useCallback(A=>{n(A)},[]),S=T.useCallback(A=>{o(S1(A))},[]),p=T.useCallback((A,B)=>{var R;h.current.set(A,B);const j=f.current.get(A);if(j&&j.length>0){Mg("registerTerminal: flushing",j.length,"buffered chunks");for(const q of j)((R=B.writeUtf8)==null?void 0:R.call(B,q))??B.write(new TextDecoder().decode(q));f.current.delete(A)}},[]),y=T.useCallback(A=>{h.current.delete(A)},[]),w=T.useCallback((A,B)=>{Mg("writeBinaryData:",A,"len:",B.length);const j=h.current.get(A);if(j){const R=j;R.writeUtf8?R.writeUtf8(B):j.write(new TextDecoder().decode(B))}else f.current.has(A)||f.current.set(A,[]),f.current.get(A).push(B)},[]),C=T.useCallback(A=>h.current.get(A),[]);T.useEffect(()=>m((B,j)=>{w(B,j)}),[m,w]),T.useEffect(()=>_(B=>{switch(B.type){case"config":{S(B);break}case"__disconnect":{d(null),f.current.clear();break}}}),[_,d,S]);const D={activeSessionId:i,options:l,setActiveSession:d,applyConfig:S,registerTerminal:p,unregisterTerminal:y,writeBinaryData:w,getTerminal:C};return I.jsx(Zv.Provider,{value:D,children:e})}const Qv=T.createContext(null);function Jv(){const e=T.useContext(Qv);if(!e)throw new Error("useTabs must be used within TabsProvider");return e}const C1=5e3;function w1({children:e}){const[i,n]=T.useState([]),[l,o]=T.useState(null),h=T.useRef(null),f=T.useRef([]),_=T.useRef(new Map),{registerMessageHandler:m,registerBinaryHandler:d,sendMessage:S}=vl(),{setActiveSession:p}=fo();T.useEffect(()=>{h.current=l},[l]),T.useEffect(()=>{f.current=i},[i]);const y=T.useCallback((R,q)=>{n(F=>{if(F.find(Re=>Re.id===R))return F.map(Re=>Re.id===R?{...Re,connected:!0,lastActivity:Date.now(),name:q??Re.name}:Re);const le={id:R,name:q??R,connected:!0,lastActivity:Date.now()},fe=[...F,le];return F.length===0&&setTimeout(()=>{o(R),h.current=R,p(R)},0),fe});const Z=_.current.get(R);Z&&(clearTimeout(Z),_.current.delete(R))},[p]),w=T.useCallback(R=>{n(Z=>Z.map(F=>F.id===R?{...F,connected:!1}:F));const q=setTimeout(()=>{n(Z=>{const F=Z.filter(H=>H.id!==R);if(h.current===R){const H=F[0];H?(o(H.id),h.current=H.id,p(H.id)):(o(null),h.current=null,p(null))}return F}),_.current.delete(R)},C1);_.current.set(R,q)},[p]),C=T.useCallback(()=>{n([]),o(null),h.current=null;for(const R of _.current.values())clearTimeout(R);_.current.clear()},[]);T.useEffect(()=>d((q,Z)=>{y(q)}),[d,y]),T.useEffect(()=>m(q=>{switch(q.type){case"session_list":{const Z=q;console.log("[TabsContext] Received session_list:",Z.sessions.length,"sessions");for(const F of Z.sessions)y(F.id,F.name);break}case"session_connected":{const Z=q;y(Z.session_id,Z.name);break}case"session_disconnected":{w(q.session_id);break}case"__disconnect":{C();break}}}),[m,y,w,C]),T.useEffect(()=>()=>{for(const R of _.current.values())clearTimeout(R)},[]);const D=T.useCallback(R=>{f.current.find(Z=>Z.id===R)&&(o(R),h.current=R,p(R))},[p]),A=T.useCallback(()=>{S({type:"create_session"})},[S]),B=T.useCallback(R=>{S({type:"close_session",session_id:R}),n(Z=>{const F=Z.filter(H=>H.id!==R);if(h.current===R){const H=F[0];H?(o(H.id),h.current=H.id,p(H.id)):(o(null),h.current=null,p(null))}return F});const q=_.current.get(R);q&&(clearTimeout(q),_.current.delete(R))},[S,p]),j={sessions:i,activeSessionId:l,activeSession:i.find(R=>R.id===l),switchSession:D,createTab:A,closeTab:B,tabs:i,activeTabId:l,activeTab:i.find(R=>R.id===l),switchTab:D};return I.jsx(Qv.Provider,{value:j,children:e})}const E1="modulepreload",x1=function(e){return"/"+e},kg={},Fr=function(i,n,l){let o=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(S=>Promise.resolve(S).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),m=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));o=f(n.map(d=>{if(d=x1(d),d in kg)return;kg[d]=!0;const S=d.endsWith(".css"),p=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=S?"stylesheet":E1,S||(y.as="script"),y.crossOrigin="",y.href=d,m&&y.setAttribute("nonce",m),document.head.appendChild(y),S)return new Promise((w,C)=>{y.addEventListener("load",w),y.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function h(f){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=f,window.dispatchEvent(_),!_.defaultPrevented)throw f}return o.then(f=>{for(const _ of f||[])_.status==="rejected"&&h(_.reason);return i().catch(h)})};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var ep=Object.defineProperty,T1=Object.getOwnPropertyDescriptor,R1=(e,i)=>{for(var n in i)ep(e,n,{get:i[n],enumerable:!0})},Qe=(e,i,n,l)=>{for(var o=l>1?void 0:l?T1(i,n):i,h=e.length-1,f;h>=0;h--)(f=e[h])&&(o=(l?f(i,n,o):f(o))||o);return l&&o&&ep(i,n,o),o},se=(e,i)=>(n,l)=>i(n,l,e),Ag="Terminal input",au={get:()=>Ag,set:e=>Ag=e},Bg="Too much output to announce, navigate to rows manually to read",ou={get:()=>Bg,set:e=>Bg=e};function D1(e){return e.replace(/\r?\n/g,"\r")}function M1(e,i){return i?"\x1B[200~"+e+"\x1B[201~":e}function k1(e,i){e.clipboardData&&e.clipboardData.setData("text/plain",i.selectionText),e.preventDefault()}function A1(e,i,n,l){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");tp(o,i,n,l)}}function tp(e,i,n,l){e=D1(e),e=M1(e,n.decPrivateModes.bracketedPasteMode&&l.rawOptions.ignoreBracketedPasteMode!==!0),n.triggerDataEvent(e,!0),i.value=""}function ip(e,i,n){let l=n.getBoundingClientRect(),o=e.clientX-l.left-10,h=e.clientY-l.top-10;i.style.width="20px",i.style.height="20px",i.style.left=`${o}px`,i.style.top=`${h}px`,i.style.zIndex="1000",i.focus()}function Og(e,i,n,l,o){ip(e,i,n),o&&l.rightClickSelect(e),i.value=l.selectionText,i.select()}function Bs(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function _o(e,i=0,n=e.length){let l="";for(let o=i;o<n;++o){let h=e[o];h>65535?(h-=65536,l+=String.fromCharCode((h>>10)+55296)+String.fromCharCode(h%1024+56320)):l+=String.fromCharCode(h)}return l}var B1=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,i){let n=e.length;if(!n)return 0;let l=0,o=0;if(this._interim){let h=e.charCodeAt(o++);56320<=h&&h<=57343?i[l++]=(this._interim-55296)*1024+h-56320+65536:(i[l++]=this._interim,i[l++]=h),this._interim=0}for(let h=o;h<n;++h){let f=e.charCodeAt(h);if(55296<=f&&f<=56319){if(++h>=n)return this._interim=f,l;let _=e.charCodeAt(h);56320<=_&&_<=57343?i[l++]=(f-55296)*1024+_-56320+65536:(i[l++]=f,i[l++]=_);continue}f!==65279&&(i[l++]=f)}return l}},O1=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,i){let n=e.length;if(!n)return 0;let l=0,o,h,f,_,m=0,d=0;if(this.interim[0]){let y=!1,w=this.interim[0];w&=(w&224)===192?31:(w&240)===224?15:7;let C=0,D;for(;(D=this.interim[++C]&63)&&C<4;)w<<=6,w|=D;let A=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,B=A-C;for(;d<B;){if(d>=n)return 0;if(D=e[d++],(D&192)!==128){d--,y=!0;break}else this.interim[C++]=D,w<<=6,w|=D&63}y||(A===2?w<128?d--:i[l++]=w:A===3?w<2048||w>=55296&&w<=57343||w===65279||(i[l++]=w):w<65536||w>1114111||(i[l++]=w)),this.interim.fill(0)}let S=n-4,p=d;for(;p<n;){for(;p<S&&!((o=e[p])&128)&&!((h=e[p+1])&128)&&!((f=e[p+2])&128)&&!((_=e[p+3])&128);)i[l++]=o,i[l++]=h,i[l++]=f,i[l++]=_,p+=4;if(o=e[p++],o<128)i[l++]=o;else if((o&224)===192){if(p>=n)return this.interim[0]=o,l;if(h=e[p++],(h&192)!==128){p--;continue}if(m=(o&31)<<6|h&63,m<128){p--;continue}i[l++]=m}else if((o&240)===224){if(p>=n)return this.interim[0]=o,l;if(h=e[p++],(h&192)!==128){p--;continue}if(p>=n)return this.interim[0]=o,this.interim[1]=h,l;if(f=e[p++],(f&192)!==128){p--;continue}if(m=(o&15)<<12|(h&63)<<6|f&63,m<2048||m>=55296&&m<=57343||m===65279)continue;i[l++]=m}else if((o&248)===240){if(p>=n)return this.interim[0]=o,l;if(h=e[p++],(h&192)!==128){p--;continue}if(p>=n)return this.interim[0]=o,this.interim[1]=h,l;if(f=e[p++],(f&192)!==128){p--;continue}if(p>=n)return this.interim[0]=o,this.interim[1]=h,this.interim[2]=f,l;if(_=e[p++],(_&192)!==128){p--;continue}if(m=(o&7)<<18|(h&63)<<12|(f&63)<<6|_&63,m<65536||m>1114111)continue;i[l++]=m}}return l}},sp="",Os=" ",pl=class rp{constructor(){this.fg=0,this.bg=0,this.extended=new so}static toColorRGB(i){return[i>>>16&255,i>>>8&255,i&255]}static fromColorRGB(i){return(i[0]&255)<<16|(i[1]&255)<<8|i[2]&255}clone(){let i=new rp;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},so=class np{constructor(i=0,n=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=n}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(i){this._ext&=-67108864,this._ext|=i&67108863}get urlId(){return this._urlId}set urlId(i){this._urlId=i}get underlineVariantOffset(){let i=(this._ext&3758096384)>>29;return i<0?i^4294967288:i}set underlineVariantOffset(i){this._ext&=536870911,this._ext|=i<<29&3758096384}clone(){return new np(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},_i=class lp extends pl{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new so,this.combinedData=""}static fromCharData(i){let n=new lp;return n.setFromCharData(i),n}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Bs(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(i){this.fg=i[0],this.bg=0;let n=!1;if(i[1].length>2)n=!0;else if(i[1].length===2){let l=i[1].charCodeAt(0);if(55296<=l&&l<=56319){let o=i[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(l-55296)*1024+o-56320+65536|i[2]<<22:n=!0}else n=!0}else this.content=i[1].charCodeAt(0)|i[2]<<22;n&&(this.combinedData=i[1],this.content=2097152|i[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Lg="di$target",cu="di$dependencies",Vh=new Map;function L1(e){return e[cu]||[]}function St(e){if(Vh.has(e))return Vh.get(e);let i=function(n,l,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");z1(i,n,o)};return i._id=e,Vh.set(e,i),i}function z1(e,i,n){i[Lg]===i?i[cu].push({id:e,index:n}):(i[cu]=[{id:e,index:n}],i[Lg]=i)}var At=St("BufferService"),ap=St("CoreMouseService"),or=St("CoreService"),N1=St("CharsetService"),ef=St("InstantiationService"),op=St("LogService"),Bt=St("OptionsService"),cp=St("OscLinkService"),H1=St("UnicodeService"),Sl=St("DecorationService"),hu=class{constructor(e,i,n){this._bufferService=e,this._optionsService=i,this._oscLinkService=n}provideLinks(e,i){var S;let n=this._bufferService.buffer.lines.get(e-1);if(!n){i(void 0);return}let l=[],o=this._optionsService.rawOptions.linkHandler,h=new _i,f=n.getTrimmedLength(),_=-1,m=-1,d=!1;for(let p=0;p<f;p++)if(!(m===-1&&!n.hasContent(p))){if(n.loadCell(p,h),h.hasExtendedAttrs()&&h.extended.urlId)if(m===-1){m=p,_=h.extended.urlId;continue}else d=h.extended.urlId!==_;else m!==-1&&(d=!0);if(d||m!==-1&&p===f-1){let y=(S=this._oscLinkService.getLinkData(_))==null?void 0:S.uri;if(y){let w={start:{x:m+1,y:e},end:{x:p+(!d&&p===f-1?1:0),y:e}},C=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{let D=new URL(y);["http:","https:"].includes(D.protocol)||(C=!0)}catch{C=!0}C||l.push({text:y,range:w,activate:(D,A)=>o?o.activate(D,A,w):U1(D,A),hover:(D,A)=>{var B;return(B=o==null?void 0:o.hover)==null?void 0:B.call(o,D,A,w)},leave:(D,A)=>{var B;return(B=o==null?void 0:o.leave)==null?void 0:B.call(o,D,A,w)}})}d=!1,h.hasExtendedAttrs()&&h.extended.urlId?(m=p,_=h.extended.urlId):(m=-1,_=-1)}}i(l)}};hu=Qe([se(0,At),se(1,Bt),se(2,cp)],hu);function U1(e,i){if(confirm(`Do you want to navigate to ${i}?

WARNING: This link could potentially be dangerous`)){let n=window.open();if(n){try{n.opener=null}catch{}n.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}}var mo=St("CharSizeService"),is=St("CoreBrowserService"),tf=St("MouseService"),ss=St("RenderService"),q1=St("SelectionService"),hp=St("CharacterJoinerService"),tn=St("ThemeService"),up=St("LinkProviderService"),j1=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?zg.isErrorNoTelemetry(e)?new zg(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(i=>{i(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},P1=new j1;function Ia(e){W1(e)||P1.onUnexpectedError(e)}var uu="Canceled";function W1(e){return e instanceof Y1?!0:e instanceof Error&&e.name===uu&&e.message===uu}var Y1=class extends Error{constructor(){super(uu),this.name=this.message}};function K1(e){return new Error(`Illegal argument: ${e}`)}var zg=class fu extends Error{constructor(i){super(i),this.name="CodeExpectedError"}static fromError(i){if(i instanceof fu)return i;let n=new fu;return n.message=i.message,n.stack=i.stack,n}static isErrorNoTelemetry(i){return i.name==="CodeExpectedError"}},du=class fp extends Error{constructor(i){super(i||"An unexpected bug occurred."),Object.setPrototypeOf(this,fp.prototype)}};function Zt(e,i=0){return e[e.length-(1+i)]}var V1;(e=>{function i(h){return h<0}e.isLessThan=i;function n(h){return h<=0}e.isLessThanOrEqual=n;function l(h){return h>0}e.isGreaterThan=l;function o(h){return h===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(V1||(V1={}));function G1(e,i){let n=this,l=!1,o;return function(){return l||(l=!0,i||(o=e.apply(n,arguments))),o}}var dp;(e=>{function i(q){return q&&typeof q=="object"&&typeof q[Symbol.iterator]=="function"}e.is=i;let n=Object.freeze([]);function l(){return n}e.empty=l;function*o(q){yield q}e.single=o;function h(q){return i(q)?q:o(q)}e.wrap=h;function f(q){return q||n}e.from=f;function*_(q){for(let Z=q.length-1;Z>=0;Z--)yield q[Z]}e.reverse=_;function m(q){return!q||q[Symbol.iterator]().next().done===!0}e.isEmpty=m;function d(q){return q[Symbol.iterator]().next().value}e.first=d;function S(q,Z){let F=0;for(let H of q)if(Z(H,F++))return!0;return!1}e.some=S;function p(q,Z){for(let F of q)if(Z(F))return F}e.find=p;function*y(q,Z){for(let F of q)Z(F)&&(yield F)}e.filter=y;function*w(q,Z){let F=0;for(let H of q)yield Z(H,F++)}e.map=w;function*C(q,Z){let F=0;for(let H of q)yield*Z(H,F++)}e.flatMap=C;function*D(...q){for(let Z of q)yield*Z}e.concat=D;function A(q,Z,F){let H=F;for(let le of q)H=Z(H,le);return H}e.reduce=A;function*B(q,Z,F=q.length){for(Z<0&&(Z+=q.length),F<0?F+=q.length:F>q.length&&(F=q.length);Z<F;Z++)yield q[Z]}e.slice=B;function j(q,Z=Number.POSITIVE_INFINITY){let F=[];if(Z===0)return[F,q];let H=q[Symbol.iterator]();for(let le=0;le<Z;le++){let fe=H.next();if(fe.done)return[F,e.empty()];F.push(fe.value)}return[F,{[Symbol.iterator](){return H}}]}e.consume=j;async function R(q){let Z=[];for await(let F of q)Z.push(F);return Promise.resolve(Z)}e.asyncToArray=R})(dp||(dp={}));function lr(e){if(dp.is(e)){let i=[];for(let n of e)if(n)try{n.dispose()}catch(l){i.push(l)}if(i.length===1)throw i[0];if(i.length>1)throw new AggregateError(i,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function F1(...e){return Ve(()=>lr(e))}function Ve(e){return{dispose:G1(()=>{e()})}}var _p=class mp{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{lr(this._toDispose)}finally{this._toDispose.clear()}}add(i){if(!i)return i;if(i===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?mp.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(i),i}delete(i){if(i){if(i===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(i),i.dispose()}}deleteAndLeak(i){i&&this._toDispose.has(i)&&(this._toDispose.delete(i),void 0)}};_p.DISABLE_DISPOSED_WARNING=!1;var Ls=_p,ye=class{constructor(){this._store=new Ls,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};ye.None=Object.freeze({dispose(){}});var Zr=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var i;this._isDisposed||e===this._value||((i=this._value)==null||i.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},Ji=typeof window=="object"?window:globalThis,_u=class mu{constructor(i){this.element=i,this.next=mu.Undefined,this.prev=mu.Undefined}};_u.Undefined=new _u(void 0);var Ge=_u,Ng=class{constructor(){this._first=Ge.Undefined,this._last=Ge.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Ge.Undefined}clear(){let e=this._first;for(;e!==Ge.Undefined;){let i=e.next;e.prev=Ge.Undefined,e.next=Ge.Undefined,e=i}this._first=Ge.Undefined,this._last=Ge.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,i){let n=new Ge(e);if(this._first===Ge.Undefined)this._first=n,this._last=n;else if(i){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let l=!1;return()=>{l||(l=!0,this._remove(n))}}shift(){if(this._first!==Ge.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ge.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Ge.Undefined&&e.next!==Ge.Undefined){let i=e.prev;i.next=e.next,e.next.prev=i}else e.prev===Ge.Undefined&&e.next===Ge.Undefined?(this._first=Ge.Undefined,this._last=Ge.Undefined):e.next===Ge.Undefined?(this._last=this._last.prev,this._last.next=Ge.Undefined):e.prev===Ge.Undefined&&(this._first=this._first.next,this._first.prev=Ge.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ge.Undefined;)yield e.element,e=e.next}},X1=globalThis.performance&&typeof globalThis.performance.now=="function",$1=class gp{static create(i){return new gp(i)}constructor(i){this._now=X1&&i===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Tt;(e=>{e.None=()=>ye.None;function i($,X){return p($,()=>{},0,void 0,!0,void 0,X)}e.defer=i;function n($){return(X,te=null,ee)=>{let M=!1,W;return W=$(Y=>{if(!M)return W?W.dispose():M=!0,X.call(te,Y)},null,ee),M&&W.dispose(),W}}e.once=n;function l($,X,te){return d((ee,M=null,W)=>$(Y=>ee.call(M,X(Y)),null,W),te)}e.map=l;function o($,X,te){return d((ee,M=null,W)=>$(Y=>{X(Y),ee.call(M,Y)},null,W),te)}e.forEach=o;function h($,X,te){return d((ee,M=null,W)=>$(Y=>X(Y)&&ee.call(M,Y),null,W),te)}e.filter=h;function f($){return $}e.signal=f;function _(...$){return(X,te=null,ee)=>{let M=F1(...$.map(W=>W(Y=>X.call(te,Y))));return S(M,ee)}}e.any=_;function m($,X,te,ee){let M=te;return l($,W=>(M=X(M,W),M),ee)}e.reduce=m;function d($,X){let te,ee={onWillAddFirstListener(){te=$(M.fire,M)},onDidRemoveLastListener(){te==null||te.dispose()}},M=new J(ee);return X==null||X.add(M),M.event}function S($,X){return X instanceof Array?X.push($):X&&X.add($),$}function p($,X,te=100,ee=!1,M=!1,W,Y){let oe,me,E,P=0,Q,ie={leakWarningThreshold:W,onWillAddFirstListener(){oe=$(ue=>{P++,me=X(me,ue),ee&&!E&&(ce.fire(me),me=void 0),Q=()=>{let be=me;me=void 0,E=void 0,(!ee||P>1)&&ce.fire(be),P=0},typeof te=="number"?(clearTimeout(E),E=setTimeout(Q,te)):E===void 0&&(E=0,queueMicrotask(Q))})},onWillRemoveListener(){M&&P>0&&(Q==null||Q())},onDidRemoveLastListener(){Q=void 0,oe.dispose()}},ce=new J(ie);return Y==null||Y.add(ce),ce.event}e.debounce=p;function y($,X=0,te){return e.debounce($,(ee,M)=>ee?(ee.push(M),ee):[M],X,void 0,!0,void 0,te)}e.accumulate=y;function w($,X=(ee,M)=>ee===M,te){let ee=!0,M;return h($,W=>{let Y=ee||!X(W,M);return ee=!1,M=W,Y},te)}e.latch=w;function C($,X,te){return[e.filter($,X,te),e.filter($,ee=>!X(ee),te)]}e.split=C;function D($,X=!1,te=[],ee){let M=te.slice(),W=$(me=>{M?M.push(me):oe.fire(me)});ee&&ee.add(W);let Y=()=>{M==null||M.forEach(me=>oe.fire(me)),M=null},oe=new J({onWillAddFirstListener(){W||(W=$(me=>oe.fire(me)),ee&&ee.add(W))},onDidAddFirstListener(){M&&(X?setTimeout(Y):Y())},onDidRemoveLastListener(){W&&W.dispose(),W=null}});return ee&&ee.add(oe),oe.event}e.buffer=D;function A($,X){return(te,ee,M)=>{let W=X(new j);return $(function(Y){let oe=W.evaluate(Y);oe!==B&&te.call(ee,oe)},void 0,M)}}e.chain=A;let B=Symbol("HaltChainable");class j{constructor(){this.steps=[]}map(X){return this.steps.push(X),this}forEach(X){return this.steps.push(te=>(X(te),te)),this}filter(X){return this.steps.push(te=>X(te)?te:B),this}reduce(X,te){let ee=te;return this.steps.push(M=>(ee=X(ee,M),ee)),this}latch(X=(te,ee)=>te===ee){let te=!0,ee;return this.steps.push(M=>{let W=te||!X(M,ee);return te=!1,ee=M,W?M:B}),this}evaluate(X){for(let te of this.steps)if(X=te(X),X===B)break;return X}}function R($,X,te=ee=>ee){let ee=(...oe)=>Y.fire(te(...oe)),M=()=>$.on(X,ee),W=()=>$.removeListener(X,ee),Y=new J({onWillAddFirstListener:M,onDidRemoveLastListener:W});return Y.event}e.fromNodeEventEmitter=R;function q($,X,te=ee=>ee){let ee=(...oe)=>Y.fire(te(...oe)),M=()=>$.addEventListener(X,ee),W=()=>$.removeEventListener(X,ee),Y=new J({onWillAddFirstListener:M,onDidRemoveLastListener:W});return Y.event}e.fromDOMEventEmitter=q;function Z($){return new Promise(X=>n($)(X))}e.toPromise=Z;function F($){let X=new J;return $.then(te=>{X.fire(te)},()=>{X.fire(void 0)}).finally(()=>{X.dispose()}),X.event}e.fromPromise=F;function H($,X){return $(te=>X.fire(te))}e.forward=H;function le($,X,te){return X(te),$(ee=>X(ee))}e.runAndSubscribe=le;class fe{constructor(X,te){this._observable=X,this._counter=0,this._hasChanged=!1;let ee={onWillAddFirstListener:()=>{X.addObserver(this)},onDidRemoveLastListener:()=>{X.removeObserver(this)}};this.emitter=new J(ee),te&&te.add(this.emitter)}beginUpdate(X){this._counter++}handlePossibleChange(X){}handleChange(X,te){this._hasChanged=!0}endUpdate(X){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Re($,X){return new fe($,X).emitter.event}e.fromObservable=Re;function de($){return(X,te,ee)=>{let M=0,W=!1,Y={beginUpdate(){M++},endUpdate(){M--,M===0&&($.reportChanges(),W&&(W=!1,X.call(te)))},handlePossibleChange(){},handleChange(){W=!0}};$.addObserver(Y),$.reportChanges();let oe={dispose(){$.removeObserver(Y)}};return ee instanceof Ls?ee.add(oe):Array.isArray(ee)&&ee.push(oe),oe}}e.fromObservableLight=de})(Tt||(Tt={}));var gu=class vu{constructor(i){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${i}_${vu._idPool++}`,vu.all.add(this)}start(i){this._stopWatch=new $1,this.listenerCount=i}stop(){if(this._stopWatch){let i=this._stopWatch.elapsed();this.durations.push(i),this.elapsedOverall+=i,this.invocationCount+=1,this._stopWatch=void 0}}};gu.all=new Set,gu._idPool=0;var I1=gu,Z1=-1,vp=class pp{constructor(i,n,l=(pp._idPool++).toString(16).padStart(3,"0")){this._errorHandler=i,this.threshold=n,this.name=l,this._warnCountdown=0}dispose(){var i;(i=this._stacks)==null||i.clear()}check(i,n){let l=this.threshold;if(l<=0||n<l)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(i.value)||0;if(this._stacks.set(i.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=l*.5;let[h,f]=this.getMostFrequentStack(),_=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${f}):`;console.warn(_),console.warn(h);let m=new eC(_,h);this._errorHandler(m)}return()=>{let h=this._stacks.get(i.value)||0;this._stacks.set(i.value,h-1)}}getMostFrequentStack(){if(!this._stacks)return;let i,n=0;for(let[l,o]of this._stacks)(!i||n<o)&&(i=[l,o],n=o);return i}};vp._idPool=1;var Q1=vp,J1=class Sp{constructor(i){this.value=i}static create(){let i=new Error;return new Sp(i.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},eC=class extends Error{constructor(e,i){super(e),this.name="ListenerLeakError",this.stack=i}},tC=class extends Error{constructor(e,i){super(e),this.name="ListenerRefusalError",this.stack=i}},iC=0,Gh=class{constructor(e){this.value=e,this.id=iC++}},sC=2,rC,J=class{constructor(e){var i,n,l,o;this._size=0,this._options=e,this._leakageMon=(i=this._options)!=null&&i.leakWarningThreshold?new Q1((e==null?void 0:e.onListenerError)??Ia,((n=this._options)==null?void 0:n.leakWarningThreshold)??Z1):void 0,this._perfMon=(l=this._options)!=null&&l._profName?new I1(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,i,n,l;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(i=this._options)==null?void 0:i.onDidRemoveLastListener)==null||n.call(i),(l=this._leakageMon)==null||l.dispose())}get event(){return this._event??(this._event=(e,i,n)=>{var f,_,m,d,S;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let p=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(p);let y=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],w=new tC(`${p}. HINT: Stack shows most frequent listener (${y[1]}-times)`,y[0]);return(((f=this._options)==null?void 0:f.onListenerError)||Ia)(w),ye.None}if(this._disposed)return ye.None;i&&(e=e.bind(i));let l=new Gh(e),o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(l.stack=J1.create(),o=this._leakageMon.check(l.stack,this._size+1)),this._listeners?this._listeners instanceof Gh?(this._deliveryQueue??(this._deliveryQueue=new nC),this._listeners=[this._listeners,l]):this._listeners.push(l):((m=(_=this._options)==null?void 0:_.onWillAddFirstListener)==null||m.call(_,this),this._listeners=l,(S=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||S.call(d,this)),this._size++;let h=Ve(()=>{o==null||o(),this._removeListener(l)});return n instanceof Ls?n.add(h):Array.isArray(n)&&n.push(h),h}),this._event}_removeListener(e){var o,h,f,_;if((h=(o=this._options)==null?void 0:o.onWillRemoveListener)==null||h.call(o,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(_=(f=this._options)==null?void 0:f.onDidRemoveLastListener)==null||_.call(f,this),this._size=0;return}let i=this._listeners,n=i.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,i[n]=void 0;let l=this._deliveryQueue.current===this;if(this._size*sC<=i.length){let m=0;for(let d=0;d<i.length;d++)i[d]?i[m++]=i[d]:l&&(this._deliveryQueue.end--,m<this._deliveryQueue.i&&this._deliveryQueue.i--);i.length=m}}_deliver(e,i){var l;if(!e)return;let n=((l=this._options)==null?void 0:l.onListenerError)||Ia;if(!n){e.value(i);return}try{e.value(i)}catch(o){n(o)}}_deliverQueue(e){let i=e.current._listeners;for(;e.i<e.end;)this._deliver(i[e.i++],e.value);e.reset()}fire(e){var i,n,l,o;if((i=this._deliveryQueue)!=null&&i.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(l=this._perfMon)==null||l.start(this._size),this._listeners)if(this._listeners instanceof Gh)this._deliver(this._listeners,e);else{let h=this._deliveryQueue;h.enqueue(this,e,this._listeners.length),this._deliverQueue(h)}(o=this._perfMon)==null||o.stop()}hasListeners(){return this._size>0}},nC=class{constructor(){this.i=-1,this.end=0}enqueue(e,i,n){this.i=0,this.end=n,this.current=e,this.value=i}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},pu=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new J,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new J,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(i){return this.mapWindowIdToZoomLevel.get(this.getWindowId(i))??0}setZoomLevel(i,n){if(this.getZoomLevel(n)===i)return;let l=this.getWindowId(n);this.mapWindowIdToZoomLevel.set(l,i),this._onDidChangeZoomLevel.fire(l)}getZoomFactor(i){return this.mapWindowIdToZoomFactor.get(this.getWindowId(i))??1}setZoomFactor(i,n){this.mapWindowIdToZoomFactor.set(this.getWindowId(n),i)}setFullscreen(i,n){if(this.isFullscreen(n)===i)return;let l=this.getWindowId(n);this.mapWindowIdToFullScreen.set(l,i),this._onDidChangeFullscreen.fire(l)}isFullscreen(i){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(i))}getWindowId(i){return i.vscodeWindowId}};pu.INSTANCE=new pu;var sf=pu;function lC(e,i,n){typeof i=="string"&&(i=e.matchMedia(i)),i.addEventListener("change",n)}sf.INSTANCE.onDidChangeZoomLevel;function aC(e){return sf.INSTANCE.getZoomFactor(e)}sf.INSTANCE.onDidChangeFullscreen;var sn=typeof navigator=="object"?navigator.userAgent:"",Su=sn.indexOf("Firefox")>=0,oC=sn.indexOf("AppleWebKit")>=0,rf=sn.indexOf("Chrome")>=0,cC=!rf&&sn.indexOf("Safari")>=0;sn.indexOf("Electron/")>=0;sn.indexOf("Android")>=0;var Fh=!1;if(typeof Ji.matchMedia=="function"){let e=Ji.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),i=Ji.matchMedia("(display-mode: fullscreen)");Fh=e.matches,lC(Ji,e,({matches:n})=>{Fh&&i.matches||(Fh=n)})}var Ir="en",yu=!1,bu=!1,Za=!1,yp=!1,ja,Qa=Ir,Hg=Ir,hC,Si,nr=globalThis,xt,xv;typeof nr.vscode<"u"&&typeof nr.vscode.process<"u"?xt=nr.vscode.process:typeof process<"u"&&typeof((xv=process==null?void 0:process.versions)==null?void 0:xv.node)=="string"&&(xt=process);var Tv,uC=typeof((Tv=xt==null?void 0:xt.versions)==null?void 0:Tv.electron)=="string",fC=uC&&(xt==null?void 0:xt.type)==="renderer",Rv;if(typeof xt=="object"){yu=xt.platform==="win32",bu=xt.platform==="darwin",Za=xt.platform==="linux",Za&&xt.env.SNAP&&xt.env.SNAP_REVISION,xt.env.CI||xt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ja=Ir,Qa=Ir;let e=xt.env.VSCODE_NLS_CONFIG;if(e)try{let i=JSON.parse(e);ja=i.userLocale,Hg=i.osLocale,Qa=i.resolvedLanguage||Ir,hC=(Rv=i.languagePack)==null?void 0:Rv.translationsConfigFile}catch{}yp=!0}else typeof navigator=="object"&&!fC?(Si=navigator.userAgent,yu=Si.indexOf("Windows")>=0,bu=Si.indexOf("Macintosh")>=0,(Si.indexOf("Macintosh")>=0||Si.indexOf("iPad")>=0||Si.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Za=Si.indexOf("Linux")>=0,(Si==null?void 0:Si.indexOf("Mobi"))>=0,Qa=globalThis._VSCODE_NLS_LANGUAGE||Ir,ja=navigator.language.toLowerCase(),Hg=ja):console.error("Unable to resolve platform.");var bp=yu,Ai=bu,dC=Za,Ug=yp,Bi=Si,Ms=Qa,_C;(e=>{function i(){return Ms}e.value=i;function n(){return Ms.length===2?Ms==="en":Ms.length>=3?Ms[0]==="e"&&Ms[1]==="n"&&Ms[2]==="-":!1}e.isDefaultVariant=n;function l(){return Ms==="en"}e.isDefault=l})(_C||(_C={}));var mC=typeof nr.postMessage=="function"&&!nr.importScripts;(()=>{if(mC){let e=[];nr.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let l=0,o=e.length;l<o;l++){let h=e[l];if(h.id===n.data.vscodeScheduleAsyncWork){e.splice(l,1),h.callback();return}}});let i=0;return n=>{let l=++i;e.push({id:l,callback:n}),nr.postMessage({vscodeScheduleAsyncWork:l},"*")}}return e=>setTimeout(e)})();var gC=!!(Bi&&Bi.indexOf("Chrome")>=0);Bi&&Bi.indexOf("Firefox")>=0;!gC&&Bi&&Bi.indexOf("Safari")>=0;Bi&&Bi.indexOf("Edg/")>=0;Bi&&Bi.indexOf("Android")>=0;var Xr=typeof navigator=="object"?navigator:{};Ug||document.queryCommandSupported&&document.queryCommandSupported("copy")||Xr&&Xr.clipboard&&Xr.clipboard.writeText,Ug||Xr&&Xr.clipboard&&Xr.clipboard.readText;var nf=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,i){this._keyCodeToStr[e]=i,this._strToKeyCode[i.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},Xh=new nf,qg=new nf,jg=new nf,vC=new Array(230),Cp;(e=>{function i(_){return Xh.keyCodeToStr(_)}e.toString=i;function n(_){return Xh.strToKeyCode(_)}e.fromString=n;function l(_){return qg.keyCodeToStr(_)}e.toUserSettingsUS=l;function o(_){return jg.keyCodeToStr(_)}e.toUserSettingsGeneral=o;function h(_){return qg.strToKeyCode(_)||jg.strToKeyCode(_)}e.fromUserSettings=h;function f(_){if(_>=98&&_<=113)return null;switch(_){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Xh.keyCodeToStr(_)}e.toElectronAccelerator=f})(Cp||(Cp={}));var pC=class wp{constructor(i,n,l,o,h){this.ctrlKey=i,this.shiftKey=n,this.altKey=l,this.metaKey=o,this.keyCode=h}equals(i){return i instanceof wp&&this.ctrlKey===i.ctrlKey&&this.shiftKey===i.shiftKey&&this.altKey===i.altKey&&this.metaKey===i.metaKey&&this.keyCode===i.keyCode}getHashCode(){let i=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",l=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${i}${n}${l}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new SC([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},SC=class{constructor(e){if(e.length===0)throw K1("chords");this.chords=e}getHashCode(){let e="";for(let i=0,n=this.chords.length;i<n;i++)i!==0&&(e+=";"),e+=this.chords[i].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let i=0;i<this.chords.length;i++)if(!this.chords[i].equals(e.chords[i]))return!1;return!0}};function yC(e){if(e.charCode){let n=String.fromCharCode(e.charCode).toUpperCase();return Cp.fromString(n)}let i=e.keyCode;if(i===3)return 7;if(Su)switch(i){case 59:return 85;case 60:if(dC)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ai)return 57;break}else if(oC&&(Ai&&i===93||!Ai&&i===92))return 57;return vC[i]||0}var bC=Ai?256:2048,CC=512,wC=1024,EC=Ai?2048:256,Pg=class{constructor(e){var n;this._standardKeyboardEventBrand=!0;let i=e;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=(n=i.getModifierState)==null?void 0:n.call(i,"AltGraph"),this.keyCode=yC(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let i=0;return this.ctrlKey&&(i|=bC),this.altKey&&(i|=CC),this.shiftKey&&(i|=wC),this.metaKey&&(i|=EC),i|=e,i}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new pC(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},Wg=new WeakMap;function xC(e){if(!e.parent||e.parent===e)return null;try{let i=e.location,n=e.parent.location;if(i.origin!=="null"&&n.origin!=="null"&&i.origin!==n.origin)return null}catch{return null}return e.parent}var TC=class{static getSameOriginWindowChain(e){let i=Wg.get(e);if(!i){i=[],Wg.set(e,i);let n=e,l;do l=xC(n),l?i.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):i.push({window:new WeakRef(n),iframeElement:null}),n=l;while(n)}return i.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,i){if(!i||e===i)return{top:0,left:0};let n=0,l=0,o=this.getSameOriginWindowChain(e);for(let h of o){let f=h.window.deref();if(n+=(f==null?void 0:f.scrollY)??0,l+=(f==null?void 0:f.scrollX)??0,f===i||!h.iframeElement)break;let _=h.iframeElement.getBoundingClientRect();n+=_.top,l+=_.left}return{top:n,left:l}}},Pa=class{constructor(e,i){this.timestamp=Date.now(),this.browserEvent=i,this.leftButton=i.button===0,this.middleButton=i.button===1,this.rightButton=i.button===2,this.buttons=i.buttons,this.target=i.target,this.detail=i.detail||1,i.type==="dblclick"&&(this.detail=2),this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,typeof i.pageX=="number"?(this.posx=i.pageX,this.posy=i.pageY):(this.posx=i.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=i.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=TC.getPositionOfChildWindowRelativeToAncestorWindow(e,i.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Yg=class{constructor(e,i=0,n=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=i;let l=!1;if(rf){let h=navigator.userAgent.match(/Chrome\/(\d+)/);l=(h?parseInt(h[1]):123)<=122}if(e){let h=e,f=e,_=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof h.wheelDeltaY<"u")l?this.deltaY=h.wheelDeltaY/(120*_):this.deltaY=h.wheelDeltaY/120;else if(typeof f.VERTICAL_AXIS<"u"&&f.axis===f.VERTICAL_AXIS)this.deltaY=-f.detail/3;else if(e.type==="wheel"){let m=e;m.deltaMode===m.DOM_DELTA_LINE?Su&&!Ai?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof h.wheelDeltaX<"u")cC&&bp?this.deltaX=-(h.wheelDeltaX/120):l?this.deltaX=h.wheelDeltaX/(120*_):this.deltaX=h.wheelDeltaX/120;else if(typeof f.HORIZONTAL_AXIS<"u"&&f.axis===f.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let m=e;m.deltaMode===m.DOM_DELTA_LINE?Su&&!Ai?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(l?this.deltaY=e.wheelDelta/(120*_):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},Ep=Object.freeze(function(e,i){let n=setTimeout(e.bind(i),0);return{dispose(){clearTimeout(n)}}}),RC;(e=>{function i(n){return n===e.None||n===e.Cancelled||n instanceof DC?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}e.isCancellationToken=i,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Tt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ep})})(RC||(RC={}));var DC=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ep:(this._emitter||(this._emitter=new J),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},lf=class{constructor(e,i){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof i=="number"&&this.setIfNotSet(e,i)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,i){if(this._isDisposed)throw new du("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},i)}setIfNotSet(e,i){if(this._isDisposed)throw new du("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},i))}},MC=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,i,n=globalThis){if(this.isDisposed)throw new du("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let l=n.setInterval(()=>{e()},i);this.disposable=Ve(()=>{n.clearInterval(l),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},kC;(e=>{async function i(l){let o,h=await Promise.all(l.map(f=>f.then(_=>_,_=>{o||(o=_)})));if(typeof o<"u")throw o;return h}e.settled=i;function n(l){return new Promise(async(o,h)=>{try{await l(o,h)}catch(f){h(f)}})}e.withAsyncBody=n})(kC||(kC={}));var Kg=class fi{static fromArray(i){return new fi(n=>{n.emitMany(i)})}static fromPromise(i){return new fi(async n=>{n.emitMany(await i)})}static fromPromises(i){return new fi(async n=>{await Promise.all(i.map(async l=>n.emitOne(await l)))})}static merge(i){return new fi(async n=>{await Promise.all(i.map(async l=>{for await(let o of l)n.emitOne(o)}))})}constructor(i,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new J,queueMicrotask(async()=>{let l={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(i(l)),this.resolve()}catch(o){this.reject(o)}finally{l.emitOne=void 0,l.emitMany=void 0,l.reject=void 0}})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await Tt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var n;return(n=this._onReturn)==null||n.call(this),{done:!0,value:void 0}}}}static map(i,n){return new fi(async l=>{for await(let o of i)l.emitOne(n(o))})}map(i){return fi.map(this,i)}static filter(i,n){return new fi(async l=>{for await(let o of i)n(o)&&l.emitOne(o)})}filter(i){return fi.filter(this,i)}static coalesce(i){return fi.filter(i,n=>!!n)}coalesce(){return fi.coalesce(this)}static async toPromise(i){let n=[];for await(let l of i)n.push(l);return n}toPromise(){return fi.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}};Kg.EMPTY=Kg.fromArray([]);var{getWindow:ki,getWindowId:AC,onDidRegisterWindow:BC}=(function(){let e=new Map,i={window:Ji,disposables:new Ls};e.set(Ji.vscodeWindowId,i);let n=new J,l=new J,o=new J;function h(f,_){return(typeof f=="number"?e.get(f):void 0)??(_?i:void 0)}return{onDidRegisterWindow:n.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:l.event,registerWindow(f){if(e.has(f.vscodeWindowId))return ye.None;let _=new Ls,m={window:f,disposables:_.add(new Ls)};return e.set(f.vscodeWindowId,m),_.add(Ve(()=>{e.delete(f.vscodeWindowId),l.fire(f)})),_.add(_e(f,mt.BEFORE_UNLOAD,()=>{o.fire(f)})),n.fire(m),_},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(f){return f.vscodeWindowId},hasWindow(f){return e.has(f)},getWindowById:h,getWindow(f){var d;let _=f;if((d=_==null?void 0:_.ownerDocument)!=null&&d.defaultView)return _.ownerDocument.defaultView.window;let m=f;return m!=null&&m.view?m.view.window:Ji},getDocument(f){return ki(f).document}}})(),OC=class{constructor(e,i,n,l){this._node=e,this._type=i,this._handler=n,this._options=l||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function _e(e,i,n,l){return new OC(e,i,n,l)}var Vg=function(e,i,n,l){return _e(e,i,n,l)},af,LC=class extends MC{constructor(e){super(),this.defaultTarget=e&&ki(e)}cancelAndSet(e,i,n){return super.cancelAndSet(e,i,n??this.defaultTarget)}},Gg=class{constructor(e,i=0){this._runner=e,this.priority=i,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ia(e)}}static sort(e,i){return i.priority-e.priority}};(function(){let e=new Map,i=new Map,n=new Map,l=new Map,o=h=>{n.set(h,!1);let f=e.get(h)??[];for(i.set(h,f),e.set(h,[]),l.set(h,!0);f.length>0;)f.sort(Gg.sort),f.shift().execute();l.set(h,!1)};af=(h,f,_=0)=>{let m=AC(h),d=new Gg(f,_),S=e.get(m);return S||(S=[],e.set(m,S)),S.push(d),n.get(m)||(n.set(m,!0),h.requestAnimationFrame(()=>o(m))),d}})();function zC(e){let i=e.getBoundingClientRect(),n=ki(e);return{left:i.left+n.scrollX,top:i.top+n.scrollY,width:i.width,height:i.height}}var mt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},NC=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let i=jt(e);this._maxWidth!==i&&(this._maxWidth=i,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let i=jt(e);this._width!==i&&(this._width=i,this.domNode.style.width=this._width)}setHeight(e){let i=jt(e);this._height!==i&&(this._height=i,this.domNode.style.height=this._height)}setTop(e){let i=jt(e);this._top!==i&&(this._top=i,this.domNode.style.top=this._top)}setLeft(e){let i=jt(e);this._left!==i&&(this._left=i,this.domNode.style.left=this._left)}setBottom(e){let i=jt(e);this._bottom!==i&&(this._bottom=i,this.domNode.style.bottom=this._bottom)}setRight(e){let i=jt(e);this._right!==i&&(this._right=i,this.domNode.style.right=this._right)}setPaddingTop(e){let i=jt(e);this._paddingTop!==i&&(this._paddingTop=i,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let i=jt(e);this._paddingLeft!==i&&(this._paddingLeft=i,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let i=jt(e);this._paddingBottom!==i&&(this._paddingBottom=i,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let i=jt(e);this._paddingRight!==i&&(this._paddingRight=i,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let i=jt(e);this._fontSize!==i&&(this._fontSize=i,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let i=jt(e);this._lineHeight!==i&&(this._lineHeight=i,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let i=jt(e);this._letterSpacing!==i&&(this._letterSpacing=i,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,i){this.domNode.classList.toggle(e,i),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,i){this.domNode.setAttribute(e,i)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function jt(e){return typeof e=="number"?`${e}px`:e}function hl(e){return new NC(e)}var xp=class{constructor(){this._hooks=new Ls,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,i){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(i)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,i,n,l,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=l,this._onStopCallback=o;let h=e;try{e.setPointerCapture(i),this._hooks.add(Ve(()=>{try{e.releasePointerCapture(i)}catch{}}))}catch{h=ki(e)}this._hooks.add(_e(h,mt.POINTER_MOVE,f=>{if(f.buttons!==n){this.stopMonitoring(!0);return}f.preventDefault(),this._pointerMoveCallback(f)})),this._hooks.add(_e(h,mt.POINTER_UP,f=>this.stopMonitoring(!0)))}};function HC(e,i,n){let l=null,o=null;if(typeof n.value=="function"?(l="value",o=n.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(l="get",o=n.get),!o)throw new Error("not supported");let h=`$memoize$${i}`;n[l]=function(...f){return this.hasOwnProperty(h)||Object.defineProperty(this,h,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,f)}),this[h]}}var Mi;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Mi||(Mi={}));var nl=class Dt extends ye{constructor(){super(),this.dispatched=!1,this.targets=new Ng,this.ignoreTargets=new Ng,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Tt.runAndSubscribe(BC,({window:i,disposables:n})=>{n.add(_e(i.document,"touchstart",l=>this.onTouchStart(l),{passive:!1})),n.add(_e(i.document,"touchend",l=>this.onTouchEnd(i,l))),n.add(_e(i.document,"touchmove",l=>this.onTouchMove(l),{passive:!1}))},{window:Ji,disposables:this._store}))}static addTarget(i){if(!Dt.isTouchDevice())return ye.None;Dt.INSTANCE||(Dt.INSTANCE=new Dt);let n=Dt.INSTANCE.targets.push(i);return Ve(n)}static ignoreTarget(i){if(!Dt.isTouchDevice())return ye.None;Dt.INSTANCE||(Dt.INSTANCE=new Dt);let n=Dt.INSTANCE.ignoreTargets.push(i);return Ve(n)}static isTouchDevice(){return"ontouchstart"in Ji||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(i){let n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let l=0,o=i.targetTouches.length;l<o;l++){let h=i.targetTouches.item(l);this.activeTouches[h.identifier]={id:h.identifier,initialTarget:h.target,initialTimeStamp:n,initialPageX:h.pageX,initialPageY:h.pageY,rollingTimestamps:[n],rollingPageX:[h.pageX],rollingPageY:[h.pageY]};let f=this.newGestureEvent(Mi.Start,h.target);f.pageX=h.pageX,f.pageY=h.pageY,this.dispatchEvent(f)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}onTouchEnd(i,n){let l=Date.now(),o=Object.keys(this.activeTouches).length;for(let h=0,f=n.changedTouches.length;h<f;h++){let _=n.changedTouches.item(h);if(!this.activeTouches.hasOwnProperty(String(_.identifier))){console.warn("move of an UNKNOWN touch",_);continue}let m=this.activeTouches[_.identifier],d=Date.now()-m.initialTimeStamp;if(d<Dt.HOLD_DELAY&&Math.abs(m.initialPageX-Zt(m.rollingPageX))<30&&Math.abs(m.initialPageY-Zt(m.rollingPageY))<30){let S=this.newGestureEvent(Mi.Tap,m.initialTarget);S.pageX=Zt(m.rollingPageX),S.pageY=Zt(m.rollingPageY),this.dispatchEvent(S)}else if(d>=Dt.HOLD_DELAY&&Math.abs(m.initialPageX-Zt(m.rollingPageX))<30&&Math.abs(m.initialPageY-Zt(m.rollingPageY))<30){let S=this.newGestureEvent(Mi.Contextmenu,m.initialTarget);S.pageX=Zt(m.rollingPageX),S.pageY=Zt(m.rollingPageY),this.dispatchEvent(S)}else if(o===1){let S=Zt(m.rollingPageX),p=Zt(m.rollingPageY),y=Zt(m.rollingTimestamps)-m.rollingTimestamps[0],w=S-m.rollingPageX[0],C=p-m.rollingPageY[0],D=[...this.targets].filter(A=>m.initialTarget instanceof Node&&A.contains(m.initialTarget));this.inertia(i,D,l,Math.abs(w)/y,w>0?1:-1,S,Math.abs(C)/y,C>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(Mi.End,m.initialTarget)),delete this.activeTouches[_.identifier]}this.dispatched&&(n.preventDefault(),n.stopPropagation(),this.dispatched=!1)}newGestureEvent(i,n){let l=document.createEvent("CustomEvent");return l.initEvent(i,!1,!0),l.initialTarget=n,l.tapCount=0,l}dispatchEvent(i){if(i.type===Mi.Tap){let n=new Date().getTime(),l=0;n-this._lastSetTapCountTime>Dt.CLEAR_TAP_COUNT_TIME?l=1:l=2,this._lastSetTapCountTime=n,i.tapCount=l}else(i.type===Mi.Change||i.type===Mi.Contextmenu)&&(this._lastSetTapCountTime=0);if(i.initialTarget instanceof Node){for(let l of this.ignoreTargets)if(l.contains(i.initialTarget))return;let n=[];for(let l of this.targets)if(l.contains(i.initialTarget)){let o=0,h=i.initialTarget;for(;h&&h!==l;)o++,h=h.parentElement;n.push([o,l])}n.sort((l,o)=>l[0]-o[0]);for(let[l,o]of n)o.dispatchEvent(i),this.dispatched=!0}}inertia(i,n,l,o,h,f,_,m,d){this.handle=af(i,()=>{let S=Date.now(),p=S-l,y=0,w=0,C=!0;o+=Dt.SCROLL_FRICTION*p,_+=Dt.SCROLL_FRICTION*p,o>0&&(C=!1,y=h*o*p),_>0&&(C=!1,w=m*_*p);let D=this.newGestureEvent(Mi.Change);D.translationX=y,D.translationY=w,n.forEach(A=>A.dispatchEvent(D)),C||this.inertia(i,n,S,o,h,f+y,_,m,d+w)})}onTouchMove(i){let n=Date.now();for(let l=0,o=i.changedTouches.length;l<o;l++){let h=i.changedTouches.item(l);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("end of an UNKNOWN touch",h);continue}let f=this.activeTouches[h.identifier],_=this.newGestureEvent(Mi.Change,f.initialTarget);_.translationX=h.pageX-Zt(f.rollingPageX),_.translationY=h.pageY-Zt(f.rollingPageY),_.pageX=h.pageX,_.pageY=h.pageY,this.dispatchEvent(_),f.rollingPageX.length>3&&(f.rollingPageX.shift(),f.rollingPageY.shift(),f.rollingTimestamps.shift()),f.rollingPageX.push(h.pageX),f.rollingPageY.push(h.pageY),f.rollingTimestamps.push(n)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}};nl.SCROLL_FRICTION=-.005,nl.HOLD_DELAY=700,nl.CLEAR_TAP_COUNT_TIME=400,Qe([HC],nl,"isTouchDevice",1);var UC=nl,of=class extends ye{onclick(e,i){this._register(_e(e,mt.CLICK,n=>i(new Pa(ki(e),n))))}onmousedown(e,i){this._register(_e(e,mt.MOUSE_DOWN,n=>i(new Pa(ki(e),n))))}onmouseover(e,i){this._register(_e(e,mt.MOUSE_OVER,n=>i(new Pa(ki(e),n))))}onmouseleave(e,i){this._register(_e(e,mt.MOUSE_LEAVE,n=>i(new Pa(ki(e),n))))}onkeydown(e,i){this._register(_e(e,mt.KEY_DOWN,n=>i(new Pg(n))))}onkeyup(e,i){this._register(_e(e,mt.KEY_UP,n=>i(new Pg(n))))}oninput(e,i){this._register(_e(e,mt.INPUT,i))}onblur(e,i){this._register(_e(e,mt.BLUR,i))}onfocus(e,i){this._register(_e(e,mt.FOCUS,i))}onchange(e,i){this._register(_e(e,mt.CHANGE,i))}ignoreGesture(e){return UC.ignoreTarget(e)}},Fg=11,qC=class extends of{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=Fg+"px",this.domNode.style.height=Fg+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new xp),this._register(Vg(this.bgDomNode,mt.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._register(Vg(this.domNode,mt.POINTER_DOWN,i=>this._arrowPointerDown(i))),this._pointerdownRepeatTimer=this._register(new LC),this._pointerdownScheduleRepeatTimer=this._register(new lf)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,ki(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(i,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},jC=class Cu{constructor(i,n,l,o,h,f,_){this._forceIntegerValues=i,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n=n|0,l=l|0,o=o|0,h=h|0,f=f|0,_=_|0),this.rawScrollLeft=o,this.rawScrollTop=_,n<0&&(n=0),o+n>l&&(o=l-n),o<0&&(o=0),h<0&&(h=0),_+h>f&&(_=f-h),_<0&&(_=0),this.width=n,this.scrollWidth=l,this.scrollLeft=o,this.height=h,this.scrollHeight=f,this.scrollTop=_}equals(i){return this.rawScrollLeft===i.rawScrollLeft&&this.rawScrollTop===i.rawScrollTop&&this.width===i.width&&this.scrollWidth===i.scrollWidth&&this.scrollLeft===i.scrollLeft&&this.height===i.height&&this.scrollHeight===i.scrollHeight&&this.scrollTop===i.scrollTop}withScrollDimensions(i,n){return new Cu(this._forceIntegerValues,typeof i.width<"u"?i.width:this.width,typeof i.scrollWidth<"u"?i.scrollWidth:this.scrollWidth,n?this.rawScrollLeft:this.scrollLeft,typeof i.height<"u"?i.height:this.height,typeof i.scrollHeight<"u"?i.scrollHeight:this.scrollHeight,n?this.rawScrollTop:this.scrollTop)}withScrollPosition(i){return new Cu(this._forceIntegerValues,this.width,this.scrollWidth,typeof i.scrollLeft<"u"?i.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof i.scrollTop<"u"?i.scrollTop:this.rawScrollTop)}createScrollEvent(i,n){let l=this.width!==i.width,o=this.scrollWidth!==i.scrollWidth,h=this.scrollLeft!==i.scrollLeft,f=this.height!==i.height,_=this.scrollHeight!==i.scrollHeight,m=this.scrollTop!==i.scrollTop;return{inSmoothScrolling:n,oldWidth:i.width,oldScrollWidth:i.scrollWidth,oldScrollLeft:i.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:i.height,oldScrollHeight:i.scrollHeight,oldScrollTop:i.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:l,scrollWidthChanged:o,scrollLeftChanged:h,heightChanged:f,scrollHeightChanged:_,scrollTopChanged:m}}},PC=class extends ye{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new jC(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,i){var l;let n=this._state.withScrollDimensions(e,i);this._setState(n,!!this._smoothScrolling),(l=this._smoothScrolling)==null||l.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let i=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(e,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let l;i?l=new $g(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):l=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=l}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=$g.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),i=this._state.withScrollPosition(e);if(this._setState(i,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,i){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,i)))}},Xg=class{constructor(e,i,n){this.scrollLeft=e,this.scrollTop=i,this.isDone=n}};function $h(e,i){let n=i-e;return function(l){return e+n*KC(l)}}function WC(e,i,n){return function(l){return l<n?e(l/n):i((l-n)/(1-n))}}var $g=class wu{constructor(i,n,l,o){this.from=i,this.to=n,this.duration=o,this.startTime=l,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(i,n,l){if(Math.abs(i-n)>2.5*l){let o,h;return i<n?(o=i+.75*l,h=n-.75*l):(o=i-.75*l,h=n+.75*l),WC($h(i,o),$h(h,n),.33)}return $h(i,n)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(i){this.to=i.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(i){let n=(i-this.startTime)/this.duration;if(n<1){let l=this.scrollLeft(n),o=this.scrollTop(n);return new Xg(l,o,!1)}return new Xg(this.to.scrollLeft,this.to.scrollTop,!0)}combine(i,n,l){return wu.start(i,n,l)}static start(i,n,l){l=l+10;let o=Date.now()-10;return new wu(i,n,o,l)}};function YC(e){return Math.pow(e,3)}function KC(e){return 1-YC(1-e)}var VC=class extends ye{constructor(e,i,n){super(),this._visibility=e,this._visibleClassName=i,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new lf)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var i;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(i=this._domNode)==null||i.setClassName(this._invisibleClassName+(e?" fade":"")))}},GC=140,Tp=class extends of{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new VC(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new xp),this._shouldRender=!0,this.domNode=hl(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(_e(this.domNode.domNode,mt.POINTER_DOWN,i=>this._domNodePointerDown(i)))}_createArrow(e){let i=this._register(new qC(e));this.domNode.domNode.appendChild(i.bgDomNode),this.domNode.domNode.appendChild(i.domNode)}_createSlider(e,i,n,l){this.slider=hl(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(i),typeof n=="number"&&this.slider.setWidth(n),typeof l=="number"&&this.slider.setHeight(l),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(_e(this.slider.domNode,mt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let i=this.domNode.domNode.getClientRects()[0].top,n=i+this._scrollbarState.getSliderPosition(),l=i+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=l?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let i,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")i=e.offsetX,n=e.offsetY;else{let o=zC(this.domNode.domNode);i=e.pageX-o.left,n=e.pageY-o.top}let l=this._pointerDownRelativePosition(i,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(l):this._scrollbarState.getDesiredScrollPositionFromOffset(l)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let i=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),l=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let h=this._sliderOrthogonalPointerPosition(o),f=Math.abs(h-n);if(bp&&f>GC){this._setDesiredScrollPositionNow(l.getScrollPosition());return}let _=this._sliderPointerPosition(o)-i;this._setDesiredScrollPositionNow(l.getDesiredScrollPositionFromDelta(_))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let i={};this.writeScrollPosition(i,e),this._scrollable.setScrollPositionNow(i)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Rp=class Eu{constructor(i,n,l,o,h,f){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(l),this._arrowSize=Math.round(i),this._visibleSize=o,this._scrollSize=h,this._scrollPosition=f,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Eu(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(i){let n=Math.round(i);return this._visibleSize!==n?(this._visibleSize=n,this._refreshComputedValues(),!0):!1}setScrollSize(i){let n=Math.round(i);return this._scrollSize!==n?(this._scrollSize=n,this._refreshComputedValues(),!0):!1}setScrollPosition(i){let n=Math.round(i);return this._scrollPosition!==n?(this._scrollPosition=n,this._refreshComputedValues(),!0):!1}setScrollbarSize(i){this._scrollbarSize=Math.round(i)}setOppositeScrollbarSize(i){this._oppositeScrollbarSize=Math.round(i)}static _computeValues(i,n,l,o,h){let f=Math.max(0,l-i),_=Math.max(0,f-2*n),m=o>0&&o>l;if(!m)return{computedAvailableSize:Math.round(f),computedIsNeeded:m,computedSliderSize:Math.round(_),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(l*_/o))),S=(_-d)/(o-l),p=h*S;return{computedAvailableSize:Math.round(f),computedIsNeeded:m,computedSliderSize:Math.round(d),computedSliderRatio:S,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let i=Eu._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=i.computedAvailableSize,this._computedIsNeeded=i.computedIsNeeded,this._computedSliderSize=i.computedSliderSize,this._computedSliderRatio=i.computedSliderRatio,this._computedSliderPosition=i.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(i){if(!this._computedIsNeeded)return 0;let n=i-this._arrowSize,l=this._scrollPosition;return n<this._computedSliderPosition?l-=this._visibleSize:l+=this._visibleSize,l}getDesiredScrollPositionFromDelta(i){if(!this._computedIsNeeded)return 0;let n=this._computedSliderPosition+i;return Math.round(n/this._computedSliderRatio)}},FC=class extends Tp{constructor(e,i,n){let l=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new Rp(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,l.width,l.scrollWidth,o.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:i.scrollByPage}),i.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize)}_updateSlider(e,i){this.slider.setWidth(e),this.slider.setLeft(i)}_renderDomNode(e,i){this.domNode.setWidth(e),this.domNode.setHeight(i),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,i){e.scrollLeft=i}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},XC=class extends Tp{constructor(e,i,n){let l=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:i.lazyRender,host:n,scrollbarState:new Rp(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,l.height,l.scrollHeight,o.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:i.scrollByPage}),i.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0)}_updateSlider(e,i){this.slider.setHeight(e),this.slider.setTop(i)}_renderDomNode(e,i){this.domNode.setWidth(i),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,i){return i}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,i){e.scrollTop=i}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},$C=500,Ig=50,IC=class{constructor(e,i,n){this.timestamp=e,this.deltaX=i,this.deltaY=n,this.score=0}},xu=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let i=1,n=0,l=1,o=this._rear;do{let h=o===this._front?i:Math.pow(2,-l);if(i-=h,n+=this._memory[o].score*h,o===this._front)break;o=(this._capacity+o-1)%this._capacity,l++}while(!0);return n<=.5}acceptStandardWheelEvent(i){if(rf){let n=ki(i.browserEvent),l=aC(n);this.accept(Date.now(),i.deltaX*l,i.deltaY*l)}else this.accept(Date.now(),i.deltaX,i.deltaY)}accept(i,n,l){let o=null,h=new IC(i,n,l);this._front===-1&&this._rear===-1?(this._memory[0]=h,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=h),h.score=this._computeScore(h,o)}_computeScore(i,n){if(Math.abs(i.deltaX)>0&&Math.abs(i.deltaY)>0)return 1;let l=.5;if((!this._isAlmostInt(i.deltaX)||!this._isAlmostInt(i.deltaY))&&(l+=.25),n){let o=Math.abs(i.deltaX),h=Math.abs(i.deltaY),f=Math.abs(n.deltaX),_=Math.abs(n.deltaY),m=Math.max(Math.min(o,f),1),d=Math.max(Math.min(h,_),1),S=Math.max(o,f),p=Math.max(h,_);S%m===0&&p%d===0&&(l-=.5)}return Math.min(Math.max(l,0),1)}_isAlmostInt(i){return Math.abs(Math.round(i)-i)<.01}};xu.INSTANCE=new xu;var ZC=xu,QC=class extends of{constructor(e,i,n){super(),this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new J),this.onWillScroll=this._onWillScroll.event,this._options=ew(i),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let l={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new XC(this._scrollable,this._options,l)),this._horizontalScrollbar=this._register(new FC(this._scrollable,this._options,l)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=hl(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=hl(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=hl(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new lf),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=lr(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Ai&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Yg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=lr(this._mouseWheelToDispose),e)){let i=n=>{this._onMouseWheel(new Yg(n))};this._mouseWheelToDispose.push(_e(this._listenOnDomNode,mt.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;let i=ZC.INSTANCE;i.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let h=e.deltaY*this._options.mouseWheelScrollSensitivity,f=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&f+h===0?f=h=0:Math.abs(h)>=Math.abs(f)?f=0:h=0),this._options.flipAxes&&([h,f]=[f,h]);let _=!Ai&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||_)&&!f&&(f=h,h=0),e.browserEvent&&e.browserEvent.altKey&&(f=f*this._options.fastScrollSensitivity,h=h*this._options.fastScrollSensitivity);let m=this._scrollable.getFutureScrollPosition(),d={};if(h){let S=Ig*h,p=m.scrollTop-(S<0?Math.floor(S):Math.ceil(S));this._verticalScrollbar.writeScrollPosition(d,p)}if(f){let S=Ig*f,p=m.scrollLeft-(S<0?Math.floor(S):Math.ceil(S));this._horizontalScrollbar.writeScrollPosition(d,p)}d=this._scrollable.validateScrollPosition(d),(m.scrollLeft!==d.scrollLeft||m.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&i.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let l=n;!l&&this._options.alwaysConsumeMouseWheel&&(l=!0),!l&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(l=!0),l&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),i=e.scrollTop>0,n=e.scrollLeft>0,l=n?" left":"",o=i?" top":"",h=n||i?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${l}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${h}${o}${l}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),$C)}},JC=class extends QC{constructor(e,i,n){super(e,i,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function ew(e){let i={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return i.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:i.horizontalScrollbarSize,i.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:i.verticalScrollbarSize,Ai&&(i.className+=" mac"),i}var Tu=class extends ye{constructor(e,i,n,l,o,h,f,_){super(),this._bufferService=n,this._optionsService=f,this._renderService=_,this._onRequestScrollLines=this._register(new J),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let m=this._register(new PC({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>af(l.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{m.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new JC(i,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},m)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Tt.runAndSubscribe(h.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=h.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Ve(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=l.mainDocument.createElement("style"),i.appendChild(this._styleElement),this._register(Ve(()=>this._styleElement.remove())),this._register(Tt.runAndSubscribe(h.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${h.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${h.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${h.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let i=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:i.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,i){i&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!i,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let i=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),n=i-this._bufferService.buffer.ydisp;n!==0&&(this._latestYDisp=i,this._onRequestScrollLines.fire(n)),this._isHandlingScroll=!1}};Tu=Qe([se(2,At),se(3,is),se(4,ap),se(5,tn),se(6,Bt),se(7,ss)],Tu);var Ru=class extends ye{constructor(e,i,n,l,o){super(),this._screenElement=e,this._bufferService=i,this._coreBrowserService=n,this._decorationService=l,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this._register(Ve(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var l;let i=this._coreBrowserService.mainDocument.createElement("div");i.classList.add("xterm-decoration"),i.classList.toggle("xterm-decoration-top-layer",((l=e==null?void 0:e.options)==null?void 0:l.layer)==="top"),i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let n=e.options.x??0;return n&&n>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i}_refreshStyle(e){let i=e.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let n=this._decorationElements.get(e);n||(n=this._createElement(e),e.element=n,this._decorationElements.set(e,n),this._container.appendChild(n),e.onDispose(()=>{this._decorationElements.delete(e),n.remove()})),n.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(n.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,n.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,n.style.top=`${i*this._renderService.dimensions.css.cell.height}px`,n.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(n)}}_refreshXPosition(e,i=e.element){if(!i)return;let n=e.options.x??0;(e.options.anchor||"left")==="right"?i.style.right=n?`${n*this._renderService.dimensions.css.cell.width}px`:"":i.style.left=n?`${n*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var i;(i=this._decorationElements.get(e))==null||i.remove(),this._decorationElements.delete(e),e.dispose()}};Ru=Qe([se(1,At),se(2,is),se(3,Sl),se(4,ss)],Ru);var tw=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let i of this._zones)if(i.color===e.options.overviewRulerOptions.color&&i.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(i,e.marker.line))return;if(this._lineAdjacentToZone(i,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(i,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,i){return i>=e.startBufferLine&&i<=e.endBufferLine}_lineAdjacentToZone(e,i,n){return i>=e.startBufferLine-this._linePadding[n||"full"]&&i<=e.endBufferLine+this._linePadding[n||"full"]}_addLineToZone(e,i){e.startBufferLine=Math.min(e.startBufferLine,i),e.endBufferLine=Math.max(e.endBufferLine,i)}},Ri={full:0,left:0,center:0,right:0},ks={full:0,left:0,center:0,right:0},Jn={full:0,left:0,center:0,right:0},ro=class extends ye{constructor(e,i,n,l,o,h,f,_){var d;super(),this._viewportElement=e,this._screenElement=i,this._bufferService=n,this._decorationService=l,this._renderService=o,this._optionsService=h,this._themeService=f,this._coreBrowserService=_,this._colorZoneStore=new tw,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(d=this._viewportElement.parentElement)==null||d.insertBefore(this._canvas,this._viewportElement),this._register(Ve(()=>{var S;return(S=this._canvas)==null?void 0:S.remove()}));let m=this._canvas.getContext("2d");if(m)this._ctx=m;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),i=Math.ceil((this._canvas.width-1)/3);ks.full=this._canvas.width,ks.left=e,ks.center=i,ks.right=e,this._refreshDrawHeightConstants(),Jn.full=1,Jn.left=1,Jn.center=1+ks.left,Jn.right=1+ks.left+ks.center}_refreshDrawHeightConstants(){Ri.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,i=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Ri.left=i,Ri.center=i,Ri.right=i}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ri.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ri.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ri.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Ri.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let i of this._decorationService.decorations)this._colorZoneStore.addDecoration(i);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let i of e)i.position!=="full"&&this._renderColorZone(i);for(let i of e)i.position==="full"&&this._renderColorZone(i);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Jn[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Ri[e.position||"full"]/2),ks[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Ri[e.position||"full"]))}_queueRefresh(e,i){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=i||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};ro=Qe([se(2,At),se(3,Sl),se(4,ss),se(5,Bt),se(6,tn),se(7,is)],ro);var G;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(G||(G={}));var Ja;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Ja||(Ja={}));var Dp;(e=>e.ST=`${G.ESC}\\`)(Dp||(Dp={}));var Du=class{constructor(e,i,n,l,o,h){this._textarea=e,this._compositionView=i,this._bufferService=n,this._optionsService=l,this._coreService=o,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let i={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let n;i.start+=this._dataAlreadySent.length,this._isComposing?n=this._textarea.value.substring(i.start,this._compositionPosition.start):n=this._textarea.value.substring(i.start),n.length>0&&this._coreService.triggerDataEvent(n,!0)}},0)}else{this._isSendingComposition=!1;let i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let i=this._textarea.value,n=i.replace(e,"");this._dataAlreadySent=n,i.length>e.length?this._coreService.triggerDataEvent(n,!0):i.length<e.length?this._coreService.triggerDataEvent(`${G.DEL}`,!0):i.length===e.length&&i!==e&&this._coreService.triggerDataEvent(i,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=i*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let h=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Du=Qe([se(2,At),se(3,Bt),se(4,or),se(5,ss)],Du);var gt=0,vt=0,pt=0,Ze=0,Zg={css:"#00000000",rgba:0},at;(e=>{function i(o,h,f,_){return _!==void 0?`#${tr(o)}${tr(h)}${tr(f)}${tr(_)}`:`#${tr(o)}${tr(h)}${tr(f)}`}e.toCss=i;function n(o,h,f,_=255){return(o<<24|h<<16|f<<8|_)>>>0}e.toRgba=n;function l(o,h,f,_){return{css:e.toCss(o,h,f,_),rgba:e.toRgba(o,h,f,_)}}e.toColor=l})(at||(at={}));var We;(e=>{function i(m,d){if(Ze=(d.rgba&255)/255,Ze===1)return{css:d.css,rgba:d.rgba};let S=d.rgba>>24&255,p=d.rgba>>16&255,y=d.rgba>>8&255,w=m.rgba>>24&255,C=m.rgba>>16&255,D=m.rgba>>8&255;gt=w+Math.round((S-w)*Ze),vt=C+Math.round((p-C)*Ze),pt=D+Math.round((y-D)*Ze);let A=at.toCss(gt,vt,pt),B=at.toRgba(gt,vt,pt);return{css:A,rgba:B}}e.blend=i;function n(m){return(m.rgba&255)===255}e.isOpaque=n;function l(m,d,S){let p=eo.ensureContrastRatio(m.rgba,d.rgba,S);if(p)return at.toColor(p>>24&255,p>>16&255,p>>8&255)}e.ensureContrastRatio=l;function o(m){let d=(m.rgba|255)>>>0;return[gt,vt,pt]=eo.toChannels(d),{css:at.toCss(gt,vt,pt),rgba:d}}e.opaque=o;function h(m,d){return Ze=Math.round(d*255),[gt,vt,pt]=eo.toChannels(m.rgba),{css:at.toCss(gt,vt,pt,Ze),rgba:at.toRgba(gt,vt,pt,Ze)}}e.opacity=h;function f(m,d){return Ze=m.rgba&255,h(m,Ze*d/255)}e.multiplyOpacity=f;function _(m){return[m.rgba>>24&255,m.rgba>>16&255,m.rgba>>8&255]}e.toColorRGB=_})(We||(We={}));var Xe;(e=>{let i,n;try{let o=document.createElement("canvas");o.width=1,o.height=1;let h=o.getContext("2d",{willReadFrequently:!0});h&&(i=h,i.globalCompositeOperation="copy",n=i.createLinearGradient(0,0,1,1))}catch{}function l(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return gt=parseInt(o.slice(1,2).repeat(2),16),vt=parseInt(o.slice(2,3).repeat(2),16),pt=parseInt(o.slice(3,4).repeat(2),16),at.toColor(gt,vt,pt);case 5:return gt=parseInt(o.slice(1,2).repeat(2),16),vt=parseInt(o.slice(2,3).repeat(2),16),pt=parseInt(o.slice(3,4).repeat(2),16),Ze=parseInt(o.slice(4,5).repeat(2),16),at.toColor(gt,vt,pt,Ze);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let h=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(h)return gt=parseInt(h[1]),vt=parseInt(h[2]),pt=parseInt(h[3]),Ze=Math.round((h[5]===void 0?1:parseFloat(h[5]))*255),at.toColor(gt,vt,pt,Ze);if(!i||!n)throw new Error("css.toColor: Unsupported css format");if(i.fillStyle=n,i.fillStyle=o,typeof i.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(i.fillRect(0,0,1,1),[gt,vt,pt,Ze]=i.getImageData(0,0,1,1).data,Ze!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:at.toRgba(gt,vt,pt,Ze),css:o}}e.toColor=l})(Xe||(Xe={}));var kt;(e=>{function i(l){return n(l>>16&255,l>>8&255,l&255)}e.relativeLuminance=i;function n(l,o,h){let f=l/255,_=o/255,m=h/255,d=f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4),S=_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4),p=m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4);return d*.2126+S*.7152+p*.0722}e.relativeLuminance2=n})(kt||(kt={}));var eo;(e=>{function i(f,_){if(Ze=(_&255)/255,Ze===1)return _;let m=_>>24&255,d=_>>16&255,S=_>>8&255,p=f>>24&255,y=f>>16&255,w=f>>8&255;return gt=p+Math.round((m-p)*Ze),vt=y+Math.round((d-y)*Ze),pt=w+Math.round((S-w)*Ze),at.toRgba(gt,vt,pt)}e.blend=i;function n(f,_,m){let d=kt.relativeLuminance(f>>8),S=kt.relativeLuminance(_>>8);if(Qi(d,S)<m){if(S<d){let w=l(f,_,m),C=Qi(d,kt.relativeLuminance(w>>8));if(C<m){let D=o(f,_,m),A=Qi(d,kt.relativeLuminance(D>>8));return C>A?w:D}return w}let p=o(f,_,m),y=Qi(d,kt.relativeLuminance(p>>8));if(y<m){let w=l(f,_,m),C=Qi(d,kt.relativeLuminance(w>>8));return y>C?p:w}return p}}e.ensureContrastRatio=n;function l(f,_,m){let d=f>>24&255,S=f>>16&255,p=f>>8&255,y=_>>24&255,w=_>>16&255,C=_>>8&255,D=Qi(kt.relativeLuminance2(y,w,C),kt.relativeLuminance2(d,S,p));for(;D<m&&(y>0||w>0||C>0);)y-=Math.max(0,Math.ceil(y*.1)),w-=Math.max(0,Math.ceil(w*.1)),C-=Math.max(0,Math.ceil(C*.1)),D=Qi(kt.relativeLuminance2(y,w,C),kt.relativeLuminance2(d,S,p));return(y<<24|w<<16|C<<8|255)>>>0}e.reduceLuminance=l;function o(f,_,m){let d=f>>24&255,S=f>>16&255,p=f>>8&255,y=_>>24&255,w=_>>16&255,C=_>>8&255,D=Qi(kt.relativeLuminance2(y,w,C),kt.relativeLuminance2(d,S,p));for(;D<m&&(y<255||w<255||C<255);)y=Math.min(255,y+Math.ceil((255-y)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),C=Math.min(255,C+Math.ceil((255-C)*.1)),D=Qi(kt.relativeLuminance2(y,w,C),kt.relativeLuminance2(d,S,p));return(y<<24|w<<16|C<<8|255)>>>0}e.increaseLuminance=o;function h(f){return[f>>24&255,f>>16&255,f>>8&255,f&255]}e.toChannels=h})(eo||(eo={}));function tr(e){let i=e.toString(16);return i.length<2?"0"+i:i}function Qi(e,i){return e<i?(i+.05)/(e+.05):(e+.05)/(i+.05)}var iw=class extends pl{constructor(e,i,n){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=i,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},no=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new _i}register(e){let i={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(i),i.id}deregister(e){for(let i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===e)return this._characterJoiners.splice(i,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let i=this._bufferService.buffer.lines.get(e);if(!i||i.length===0)return[];let n=[],l=i.translateToString(!0),o=0,h=0,f=0,_=i.getFg(0),m=i.getBg(0);for(let d=0;d<i.getTrimmedLength();d++)if(i.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==m){if(d-o>1){let S=this._getJoinedRanges(l,f,h,i,o);for(let p=0;p<S.length;p++)n.push(S[p])}o=d,f=h,_=this._workCell.fg,m=this._workCell.bg}h+=this._workCell.getChars().length||Os.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(l,f,h,i,o);for(let S=0;S<d.length;S++)n.push(d[S])}return n}_getJoinedRanges(e,i,n,l,o){let h=e.substring(i,n),f=[];try{f=this._characterJoiners[0].handler(h)}catch(_){console.error(_)}for(let _=1;_<this._characterJoiners.length;_++)try{let m=this._characterJoiners[_].handler(h);for(let d=0;d<m.length;d++)no._mergeRanges(f,m[d])}catch(m){console.error(m)}return this._stringRangesToCellRanges(f,l,o),f}_stringRangesToCellRanges(e,i,n){let l=0,o=!1,h=0,f=e[l];if(f){for(let _=n;_<this._bufferService.cols;_++){let m=i.getWidth(_),d=i.getString(_).length||Os.length;if(m!==0){if(!o&&f[0]<=h&&(f[0]=_,o=!0),f[1]<=h){if(f[1]=_,f=e[++l],!f)break;f[0]<=h?(f[0]=_,o=!0):o=!1}h+=d}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(e,i){let n=!1;for(let l=0;l<e.length;l++){let o=e[l];if(n){if(i[1]<=o[0])return e[l-1][1]=i[1],e;if(i[1]<=o[1])return e[l-1][1]=Math.max(i[1],o[1]),e.splice(l,1),e;e.splice(l,1),l--}else{if(i[1]<=o[0])return e.splice(l,0,i),e;if(i[1]<=o[1])return o[0]=Math.min(i[0],o[0]),e;i[0]<o[1]&&(o[0]=Math.min(i[0],o[0]),n=!0);continue}}return n?e[e.length-1][1]=i[1]:e.push(i),e}};no=Qe([se(0,At)],no);function sw(e){return 57508<=e&&e<=57558}function rw(e){return 9472<=e&&e<=9631}function nw(e){return sw(e)||rw(e)}function lw(){return{css:{canvas:Wa(),cell:Wa()},device:{canvas:Wa(),cell:Wa(),char:{width:0,height:0,left:0,top:0}}}}function Wa(){return{width:0,height:0}}var Mu=class{constructor(e,i,n,l,o,h,f){this._document=e,this._characterJoinerService=i,this._optionsService=n,this._coreBrowserService=l,this._coreService=o,this._decorationService=h,this._themeService=f,this._workCell=new _i,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,i,n){this._selectionStart=e,this._selectionEnd=i,this._columnSelectMode=n}createRow(e,i,n,l,o,h,f,_,m,d,S){let p=[],y=this._characterJoinerService.getJoinedCharacters(i),w=this._themeService.colors,C=e.getNoBgTrimmedLength();n&&C<h+1&&(C=h+1);let D,A=0,B="",j=0,R=0,q=0,Z=0,F=!1,H=0,le=!1,fe=0,Re=0,de=[],$=d!==-1&&S!==-1;for(let X=0;X<C;X++){e.loadCell(X,this._workCell);let te=this._workCell.getWidth();if(te===0)continue;let ee=!1,M=X>=Re,W=X,Y=this._workCell;if(y.length>0&&X===y[0][0]&&M){let De=y.shift(),mi=this._isCellInSelection(De[0],i);for(j=De[0]+1;j<De[1];j++)M&&(M=mi===this._isCellInSelection(j,i));M&&(M=!n||h<De[0]||h>=De[1]),M?(ee=!0,Y=new iw(this._workCell,e.translateToString(!0,De[0],De[1]),De[1]-De[0]),W=De[1]-1,te=Y.getWidth()):Re=De[1]}let oe=this._isCellInSelection(X,i),me=n&&X===h,E=$&&X>=d&&X<=S,P=!1;this._decorationService.forEachDecorationAtCell(X,i,void 0,De=>{P=!0});let Q=Y.getChars()||Os;if(Q===" "&&(Y.isUnderline()||Y.isOverline())&&(Q=""),fe=te*_-m.get(Q,Y.isBold(),Y.isItalic()),!D)D=this._document.createElement("span");else if(A&&(oe&&le||!oe&&!le&&Y.bg===R)&&(oe&&le&&w.selectionForeground||Y.fg===q)&&Y.extended.ext===Z&&E===F&&fe===H&&!me&&!ee&&!P&&M){Y.isInvisible()?B+=Os:B+=Q,A++;continue}else A&&(D.textContent=B),D=this._document.createElement("span"),A=0,B="";if(R=Y.bg,q=Y.fg,Z=Y.extended.ext,F=E,H=fe,le=oe,ee&&h>=X&&h<=W&&(h=X),!this._coreService.isCursorHidden&&me&&this._coreService.isCursorInitialized){if(de.push("xterm-cursor"),this._coreBrowserService.isFocused)f&&de.push("xterm-cursor-blink"),de.push(l==="bar"?"xterm-cursor-bar":l==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":de.push("xterm-cursor-outline");break;case"block":de.push("xterm-cursor-block");break;case"bar":de.push("xterm-cursor-bar");break;case"underline":de.push("xterm-cursor-underline");break}}if(Y.isBold()&&de.push("xterm-bold"),Y.isItalic()&&de.push("xterm-italic"),Y.isDim()&&de.push("xterm-dim"),Y.isInvisible()?B=Os:B=Y.getChars()||Os,Y.isUnderline()&&(de.push(`xterm-underline-${Y.extended.underlineStyle}`),B===" "&&(B=""),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())D.style.textDecorationColor=`rgb(${pl.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let De=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&De<8&&(De+=8),D.style.textDecorationColor=w.ansi[De].css}Y.isOverline()&&(de.push("xterm-overline"),B===" "&&(B="")),Y.isStrikethrough()&&de.push("xterm-strikethrough"),E&&(D.style.textDecoration="underline");let ie=Y.getFgColor(),ce=Y.getFgColorMode(),ue=Y.getBgColor(),be=Y.getBgColorMode(),ot=!!Y.isInverse();if(ot){let De=ie;ie=ue,ue=De;let mi=ce;ce=be,be=mi}let Be,bi,Ci=!1;this._decorationService.forEachDecorationAtCell(X,i,void 0,De=>{De.options.layer!=="top"&&Ci||(De.backgroundColorRGB&&(be=50331648,ue=De.backgroundColorRGB.rgba>>8&16777215,Be=De.backgroundColorRGB),De.foregroundColorRGB&&(ce=50331648,ie=De.foregroundColorRGB.rgba>>8&16777215,bi=De.foregroundColorRGB),Ci=De.options.layer==="top")}),!Ci&&oe&&(Be=this._coreBrowserService.isFocused?w.selectionBackgroundOpaque:w.selectionInactiveBackgroundOpaque,ue=Be.rgba>>8&16777215,be=50331648,Ci=!0,w.selectionForeground&&(ce=50331648,ie=w.selectionForeground.rgba>>8&16777215,bi=w.selectionForeground)),Ci&&de.push("xterm-decoration-top");let ei;switch(be){case 16777216:case 33554432:ei=w.ansi[ue],de.push(`xterm-bg-${ue}`);break;case 50331648:ei=at.toColor(ue>>16,ue>>8&255,ue&255),this._addStyle(D,`background-color:#${Qg((ue>>>0).toString(16),"0",6)}`);break;case 0:default:ot?(ei=w.foreground,de.push("xterm-bg-257")):ei=w.background}switch(Be||Y.isDim()&&(Be=We.multiplyOpacity(ei,.5)),ce){case 16777216:case 33554432:Y.isBold()&&ie<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ie+=8),this._applyMinimumContrast(D,ei,w.ansi[ie],Y,Be,void 0)||de.push(`xterm-fg-${ie}`);break;case 50331648:let De=at.toColor(ie>>16&255,ie>>8&255,ie&255);this._applyMinimumContrast(D,ei,De,Y,Be,bi)||this._addStyle(D,`color:#${Qg(ie.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(D,ei,w.foreground,Y,Be,bi)||ot&&de.push("xterm-fg-257")}de.length&&(D.className=de.join(" "),de.length=0),!me&&!ee&&!P&&M?A++:D.textContent=B,fe!==this.defaultSpacing&&(D.style.letterSpacing=`${fe}px`),p.push(D),X=W}return D&&A&&(D.textContent=B),p}_applyMinimumContrast(e,i,n,l,o,h){if(this._optionsService.rawOptions.minimumContrastRatio===1||nw(l.getCode()))return!1;let f=this._getContrastCache(l),_;if(!o&&!h&&(_=f.getColor(i.rgba,n.rgba)),_===void 0){let m=this._optionsService.rawOptions.minimumContrastRatio/(l.isDim()?2:1);_=We.ensureContrastRatio(o||i,h||n,m),f.setColor((o||i).rgba,(h||n).rgba,_??null)}return _?(this._addStyle(e,`color:${_.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,i){e.setAttribute("style",`${e.getAttribute("style")||""}${i};`)}_isCellInSelection(e,i){let n=this._selectionStart,l=this._selectionEnd;return!n||!l?!1:this._columnSelectMode?n[0]<=l[0]?e>=n[0]&&i>=n[1]&&e<l[0]&&i<=l[1]:e<n[0]&&i>=n[1]&&e>=l[0]&&i<=l[1]:i>n[1]&&i<l[1]||n[1]===l[1]&&i===n[1]&&e>=n[0]&&e<l[0]||n[1]<l[1]&&i===l[1]&&e<l[0]||n[1]<l[1]&&i===n[1]&&e>=n[0]}};Mu=Qe([se(1,hp),se(2,Bt),se(3,is),se(4,or),se(5,Sl),se(6,tn)],Mu);function Qg(e,i,n){for(;e.length<n;)e=i+e;return e}var aw=class{constructor(e,i){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let n=e.createElement("span");n.classList.add("xterm-char-measure-element");let l=e.createElement("span");l.classList.add("xterm-char-measure-element"),l.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let h=e.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold",h.style.fontStyle="italic",this._measureElements=[n,l,o,h],this._container.appendChild(n),this._container.appendChild(l),this._container.appendChild(o),this._container.appendChild(h),i.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,i,n,l){e===this._font&&i===this._fontSize&&n===this._weight&&l===this._weightBold||(this._font=e,this._fontSize=i,this._weight=n,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${n}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${n}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(e,i,n){let l=0;if(!i&&!n&&e.length===1&&(l=e.charCodeAt(0))<256){if(this._flat[l]!==-9999)return this._flat[l];let f=this._measure(e,0);return f>0&&(this._flat[l]=f),f}let o=e;i&&(o+="B"),n&&(o+="I");let h=this._holey.get(o);if(h===void 0){let f=0;i&&(f|=1),n&&(f|=2),h=this._measure(e,f),h>0&&this._holey.set(o,h)}return h}_measure(e,i){let n=this._measureElements[i];return n.textContent=e.repeat(32),n.offsetWidth/32}},ow=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,i,n,l=!1){if(this.selectionStart=i,this.selectionEnd=n,!i||!n||i[0]===n[0]&&i[1]===n[1]){this.clear();return}let o=e.buffers.active.ydisp,h=i[1]-o,f=n[1]-o,_=Math.max(h,0),m=Math.min(f,e.rows-1);if(_>=e.rows||m<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=l,this.viewportStartRow=h,this.viewportEndRow=f,this.viewportCappedStartRow=_,this.viewportCappedEndRow=m,this.startCol=i[0],this.endCol=n[0]}isCellSelected(e,i,n){return this.hasSelection?(n-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&n>=this.viewportCappedStartRow&&i<this.endCol&&n<=this.viewportCappedEndRow:i<this.startCol&&n>=this.viewportCappedStartRow&&i>=this.endCol&&n<=this.viewportCappedEndRow:n>this.viewportStartRow&&n<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&n===this.viewportStartRow&&i>=this.startCol):!1}};function cw(){return new ow}var Ih="xterm-dom-renderer-owner-",ui="xterm-rows",Ya="xterm-fg-",Jg="xterm-bg-",el="xterm-focus",Ka="xterm-selection",hw=1,ku=class extends ye{constructor(e,i,n,l,o,h,f,_,m,d,S,p,y,w){super(),this._terminal=e,this._document=i,this._element=n,this._screenElement=l,this._viewportElement=o,this._helperContainer=h,this._linkifier2=f,this._charSizeService=m,this._optionsService=d,this._bufferService=S,this._coreService=p,this._coreBrowserService=y,this._themeService=w,this._terminalClass=hw++,this._rowElements=[],this._selectionRenderModel=cw(),this.onRequestRedraw=this._register(new J).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(ui),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Ka),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=lw(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(C=>this._injectCss(C))),this._injectCss(this._themeService.colors),this._rowFactory=_.createInstance(Mu,document),this._element.classList.add(Ih+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(C=>this._handleLinkHover(C))),this._register(this._linkifier2.onHideLinkUnderline(C=>this._handleLinkLeave(C))),this._register(Ve(()=>{this._element.classList.remove(Ih+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new aw(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let n of this._rowElements)n.style.width=`${this.dimensions.css.canvas.width}px`,n.style.height=`${this.dimensions.css.cell.height}px`,n.style.lineHeight=`${this.dimensions.css.cell.height}px`,n.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let i=`${this._terminalSelector} .${ui} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=i,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let i=`${this._terminalSelector} .${ui} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;i+=`${this._terminalSelector} .${ui} .xterm-dim { color: ${We.multiplyOpacity(e.foreground,.5).css};}`,i+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let n=`blink_underline_${this._terminalClass}`,l=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;i+=`@keyframes ${n} { 50% {  border-bottom-style: hidden; }}`,i+=`@keyframes ${l} { 50% {  box-shadow: none; }}`,i+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,i+=`${this._terminalSelector} .${ui}.${el} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${ui}.${el} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${l} 1s step-end infinite;}${this._terminalSelector} .${ui}.${el} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${ui} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${ui} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${ui} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${ui} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${ui} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,i+=`${this._terminalSelector} .${Ka} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Ka} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Ka} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[h,f]of e.ansi.entries())i+=`${this._terminalSelector} .${Ya}${h} { color: ${f.css}; }${this._terminalSelector} .${Ya}${h}.xterm-dim { color: ${We.multiplyOpacity(f,.5).css}; }${this._terminalSelector} .${Jg}${h} { background-color: ${f.css}; }`;i+=`${this._terminalSelector} .${Ya}257 { color: ${We.opaque(e.background).css}; }${this._terminalSelector} .${Ya}257.xterm-dim { color: ${We.multiplyOpacity(We.opaque(e.background),.5).css}; }${this._terminalSelector} .${Jg}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=i}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,i){for(let n=this._rowElements.length;n<=i;n++){let l=this._document.createElement("div");this._rowContainer.appendChild(l),this._rowElements.push(l)}for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,i){this._refreshRowElements(e,i),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(el),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(el),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,i,n){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,i,n),this.renderRows(0,this._bufferService.rows-1),!e||!i||(this._selectionRenderModel.update(this._terminal,e,i,n),!this._selectionRenderModel.hasSelection))return;let l=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,h=this._selectionRenderModel.viewportCappedStartRow,f=this._selectionRenderModel.viewportCappedEndRow,_=this._document.createDocumentFragment();if(n){let m=e[0]>i[0];_.appendChild(this._createSelectionElement(h,m?i[0]:e[0],m?e[0]:i[0],f-h+1))}else{let m=l===h?e[0]:0,d=h===o?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(h,m,d));let S=f-h-1;if(_.appendChild(this._createSelectionElement(h+1,0,this._bufferService.cols,S)),h!==f){let p=o===f?i[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(f,0,p))}}this._selectionContainer.appendChild(_)}_createSelectionElement(e,i,n,l=1){let o=this._document.createElement("div"),h=i*this.dimensions.css.cell.width,f=this.dimensions.css.cell.width*(n-i);return h+f>this.dimensions.css.canvas.width&&(f=this.dimensions.css.canvas.width-h),o.style.height=`${l*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${h}px`,o.style.width=`${f}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,i){let n=this._bufferService.buffer,l=n.ybase+n.y,o=Math.min(n.x,this._bufferService.cols-1),h=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,f=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let m=e;m<=i;m++){let d=m+n.ydisp,S=this._rowElements[m],p=n.lines.get(d);if(!S||!p)break;S.replaceChildren(...this._rowFactory.createRow(p,d,d===l,f,_,o,h,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${Ih}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,i,n,l,o,h){n<0&&(e=0),l<0&&(i=0);let f=this._bufferService.rows-1;n=Math.max(Math.min(n,f),0),l=Math.max(Math.min(l,f),0),o=Math.min(o,this._bufferService.cols);let _=this._bufferService.buffer,m=_.ybase+_.y,d=Math.min(_.x,o-1),S=this._optionsService.rawOptions.cursorBlink,p=this._optionsService.rawOptions.cursorStyle,y=this._optionsService.rawOptions.cursorInactiveStyle;for(let w=n;w<=l;++w){let C=w+_.ydisp,D=this._rowElements[w],A=_.lines.get(C);if(!D||!A)break;D.replaceChildren(...this._rowFactory.createRow(A,C,C===m,p,y,d,S,this.dimensions.css.cell.width,this._widthCache,h?w===n?e:0:-1,h?(w===l?i:o)-1:-1))}}};ku=Qe([se(7,ef),se(8,mo),se(9,Bt),se(10,At),se(11,or),se(12,is),se(13,tn)],ku);var Au=class extends ye{constructor(e,i,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this._register(new J),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new fw(this._optionsService))}catch{this._measureStrategy=this._register(new uw(e,i,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};Au=Qe([se(2,Bt)],Au);var Mp=class extends ye{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,i){e!==void 0&&e>0&&i!==void 0&&i>0&&(this._result.width=e,this._result.height=i)}},uw=class extends Mp{constructor(e,i,n){super(),this._document=e,this._parentElement=i,this._optionsService=n,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},fw=class extends Mp{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let i=this._ctx.measureText("W");if(!("width"in i&&"fontBoundingBoxAscent"in i&&"fontBoundingBoxDescent"in i))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},dw=class extends ye{constructor(e,i,n){super(),this._textarea=e,this._window=i,this.mainDocument=n,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new _w(this._window)),this._onDprChange=this._register(new J),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new J),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(l=>this._screenDprMonitor.setWindow(l))),this._register(Tt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(_e(this._textarea,"focus",()=>this._isFocused=!0)),this._register(_e(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},_w=class extends ye{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Zr),this._onDprChange=this._register(new J),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ve(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=_e(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},mw=class extends ye{constructor(){super(),this.linkProviders=[],this._register(Ve(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let i=this.linkProviders.indexOf(e);i!==-1&&this.linkProviders.splice(i,1)}}}};function cf(e,i,n){let l=n.getBoundingClientRect(),o=e.getComputedStyle(n),h=parseInt(o.getPropertyValue("padding-left")),f=parseInt(o.getPropertyValue("padding-top"));return[i.clientX-l.left-h,i.clientY-l.top-f]}function gw(e,i,n,l,o,h,f,_,m){if(!h)return;let d=cf(e,i,n);if(d)return d[0]=Math.ceil((d[0]+(m?f/2:0))/f),d[1]=Math.ceil(d[1]/_),d[0]=Math.min(Math.max(d[0],1),l+(m?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var Bu=class{constructor(e,i){this._renderService=e,this._charSizeService=i}getCoords(e,i,n,l,o){return gw(window,e,i,n,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,i){let n=cf(window,e,i);if(this._charSizeService.hasValidSize)return n[0]=Math.min(Math.max(n[0],0),this._renderService.dimensions.css.canvas.width-1),n[1]=Math.min(Math.max(n[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(n[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(n[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(n[0]),y:Math.floor(n[1])}}};Bu=Qe([se(0,ss),se(1,mo)],Bu);var vw=class{constructor(e,i){this._renderCallback=e,this._coreBrowserService=i,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},kp={};R1(kp,{getSafariVersion:()=>Sw,isChromeOS:()=>Lp,isFirefox:()=>Ap,isIpad:()=>yw,isIphone:()=>bw,isLegacyEdge:()=>pw,isLinux:()=>hf,isMac:()=>lo,isNode:()=>go,isSafari:()=>Bp,isWindows:()=>Op});var go=typeof process<"u"&&"title"in process,yl=go?"node":navigator.userAgent,bl=go?"node":navigator.platform,Ap=yl.includes("Firefox"),pw=yl.includes("Edge"),Bp=/^((?!chrome|android).)*safari/i.test(yl);function Sw(){if(!Bp)return 0;let e=yl.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var lo=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(bl),yw=bl==="iPad",bw=bl==="iPhone",Op=["Windows","Win16","Win32","WinCE"].includes(bl),hf=bl.indexOf("Linux")>=0,Lp=/\bCrOS\b/.test(yl),zp=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let i=0,n=0,l=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(i=performance.now(),this._tasks[this._i]()||this._i++,i=Math.max(1,performance.now()-i),n=Math.max(i,n),o=e.timeRemaining(),n*1.5>o){l-i<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-i))}ms`),this._start();return}l=o}this.clear()}},Cw=class extends zp{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let i=performance.now()+e;return{timeRemaining:()=>Math.max(0,i-performance.now())}}},ww=class extends zp{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},ao=!go&&"requestIdleCallback"in window?ww:Cw,Ew=class{constructor(){this._queue=new ao}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},Ou=class extends ye{constructor(e,i,n,l,o,h,f,_,m){super(),this._rowCount=e,this._optionsService=n,this._charSizeService=l,this._coreService=o,this._coreBrowserService=_,this._renderer=this._register(new Zr),this._pausedResizeTask=new Ew,this._observerDisposable=this._register(new Zr),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new J),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new J),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new J),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new J),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new vw((d,S)=>this._renderRows(d,S),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new xw(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ve(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(f.onResize(()=>this._fullRefresh())),this._register(f.buffers.onBufferActivate(()=>{var d;return(d=this._renderer.value)==null?void 0:d.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(h.onDecorationRegistered(()=>this._fullRefresh())),this._register(h.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(f.cols,f.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(f.buffer.y,f.buffer.y,!0))),this._register(m.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,i),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,i)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,i){if("IntersectionObserver"in e){let n=new e.IntersectionObserver(l=>this._handleIntersectionChange(l[l.length-1]),{threshold:0});n.observe(i),this._observerDisposable.value=Ve(()=>n.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,i,n=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}let l=this._syncOutputHandler.flush();l&&(e=Math.min(e,l.start),i=Math.max(i,l.end)),n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,i,this._rowCount)}_renderRows(e,i){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,i);return}e=Math.min(e,this._rowCount-1),i=Math.min(i,this._rowCount-1),this._renderer.value.renderRows(e,i),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:i}),this._onRender.fire({start:e,end:i}),this._isNextRenderRedrawOnly=!0}}resize(e,i){this._rowCount=i,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(i=>this.refreshRows(i.start,i.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,i;this._renderer.value&&((i=(e=this._renderer.value).clearTextureAtlas)==null||i.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,i){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var n;return(n=this._renderer.value)==null?void 0:n.handleResize(e,i)}):this._renderer.value.handleResize(e,i),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,i,n){var l;this._selectionState.start=e,this._selectionState.end=i,this._selectionState.columnSelectMode=n,(l=this._renderer.value)==null||l.handleSelectionChanged(e,i,n)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};Ou=Qe([se(2,Bt),se(3,mo),se(4,or),se(5,Sl),se(6,At),se(7,is),se(8,tn)],Ou);var xw=class{constructor(e,i,n){this._coreBrowserService=e,this._coreService=i,this._onTimeout=n,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,i){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,i)):(this._start=e,this._end=i,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Tw(e,i,n,l){let o=n.buffer.x,h=n.buffer.y;if(!n.buffer.hasScrollback)return Mw(o,h,e,i,n,l)+vo(h,i,n,l)+kw(o,h,e,i,n,l);let f;if(h===i)return f=o>e?"D":"C",dl(Math.abs(o-e),fl(f,l));f=h>i?"D":"C";let _=Math.abs(h-i),m=Dw(h>i?e:o,n)+(_-1)*n.cols+1+Rw(h>i?o:e);return dl(m,fl(f,l))}function Rw(e,i){return e-1}function Dw(e,i){return i.cols-e}function Mw(e,i,n,l,o,h){return vo(i,l,o,h).length===0?"":dl(Hp(e,i,e,i-ar(i,o),!1,o).length,fl("D",h))}function vo(e,i,n,l){let o=e-ar(e,n),h=i-ar(i,n),f=Math.abs(o-h)-Aw(e,i,n);return dl(f,fl(Np(e,i),l))}function kw(e,i,n,l,o,h){let f;vo(i,l,o,h).length>0?f=l-ar(l,o):f=i;let _=l,m=Bw(e,i,n,l,o,h);return dl(Hp(e,f,n,_,m==="C",o).length,fl(m,h))}function Aw(e,i,n){var f;let l=0,o=e-ar(e,n),h=i-ar(i,n);for(let _=0;_<Math.abs(o-h);_++){let m=Np(e,i)==="A"?-1:1;(f=n.buffer.lines.get(o+m*_))!=null&&f.isWrapped&&l++}return l}function ar(e,i){let n=0,l=i.buffer.lines.get(e),o=l==null?void 0:l.isWrapped;for(;o&&e>=0&&e<i.rows;)n++,l=i.buffer.lines.get(--e),o=l==null?void 0:l.isWrapped;return n}function Bw(e,i,n,l,o,h){let f;return vo(n,l,o,h).length>0?f=l-ar(l,o):f=i,e<n&&f<=l||e>=n&&f<l?"C":"D"}function Np(e,i){return e>i?"A":"B"}function Hp(e,i,n,l,o,h){let f=e,_=i,m="";for(;(f!==n||_!==l)&&_>=0&&_<h.buffer.lines.length;)f+=o?1:-1,o&&f>h.cols-1?(m+=h.buffer.translateBufferLineToString(_,!1,e,f),f=0,e=0,_++):!o&&f<0&&(m+=h.buffer.translateBufferLineToString(_,!1,0,e+1),f=h.cols-1,e=f,_--);return m+h.buffer.translateBufferLineToString(_,!1,e,f)}function fl(e,i){let n=i?"O":"[";return G.ESC+n+e}function dl(e,i){e=Math.floor(e);let n="";for(let l=0;l<e;l++)n+=i;return n}var Ow=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,i=this.selectionEnd;return!e||!i?!1:e[1]>i[1]||e[1]===i[1]&&e[0]>i[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function ev(e,i){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return i*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Zh=50,Lw=15,zw=50,Nw=500,Hw="",Uw=new RegExp(Hw,"g"),Lu=class extends ye{constructor(e,i,n,l,o,h,f,_,m){super(),this._element=e,this._screenElement=i,this._linkifier=n,this._bufferService=l,this._coreService=o,this._mouseService=h,this._optionsService=f,this._renderService=_,this._coreBrowserService=m,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _i,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new J),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new J),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new J),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new J),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new Ow(this._bufferService),this._activeSelectionMode=0,this._register(Ve(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;return!e||!i?!1:e[0]!==i[0]||e[1]!==i[1]}get selectionText(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd;if(!e||!i)return"";let n=this._bufferService.buffer,l=[];if(this._activeSelectionMode===3){if(e[0]===i[0])return"";let o=e[0]<i[0]?e[0]:i[0],h=e[0]<i[0]?i[0]:e[0];for(let f=e[1];f<=i[1];f++){let _=n.translateBufferLineToString(f,!0,o,h);l.push(_)}}else{let o=e[1]===i[1]?i[0]:void 0;l.push(n.translateBufferLineToString(e[1],!0,e[0],o));for(let h=e[1]+1;h<=i[1]-1;h++){let f=n.lines.get(h),_=n.translateBufferLineToString(h,!0);f!=null&&f.isWrapped?l[l.length-1]+=_:l.push(_)}if(e[1]!==i[1]){let h=n.lines.get(i[1]),f=n.translateBufferLineToString(i[1],!0,0,i[0]);h&&h.isWrapped?l[l.length-1]+=f:l.push(f)}}return l.map(o=>o.replace(Uw," ")).join(Op?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),hf&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let i=this._getMouseBufferCoords(e),n=this._model.finalSelectionStart,l=this._model.finalSelectionEnd;return!n||!l||!i?!1:this._areCoordsInSelection(i,n,l)}isCellInSelection(e,i){let n=this._model.finalSelectionStart,l=this._model.finalSelectionEnd;return!n||!l?!1:this._areCoordsInSelection([e,i],n,l)}_areCoordsInSelection(e,i,n){return e[1]>i[1]&&e[1]<n[1]||i[1]===n[1]&&e[1]===i[1]&&e[0]>=i[0]&&e[0]<n[0]||i[1]<n[1]&&e[1]===n[1]&&e[0]<n[0]||i[1]<n[1]&&e[1]===i[1]&&e[0]>=i[0]}_selectWordAtCursor(e,i){var o,h;let n=(h=(o=this._linkifier.currentLink)==null?void 0:o.link)==null?void 0:h.range;if(n)return this._model.selectionStart=[n.start.x-1,n.start.y-1],this._model.selectionStartLength=ev(n,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let l=this._getMouseBufferCoords(e);return l?(this._selectWordAt(l,i),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,i){this._model.clearSelection(),e=Math.max(e,0),i=Math.min(i,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,i],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let i=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(i)return i[0]--,i[1]--,i[1]+=this._bufferService.buffer.ydisp,i}_getMouseEventScrollAmount(e){let i=cf(this._coreBrowserService.window,e,this._screenElement)[1],n=this._renderService.dimensions.css.canvas.height;return i>=0&&i<=n?0:(i>n&&(i-=n),i=Math.min(Math.max(i,-Zh),Zh),i/=Zh,i/Math.abs(i)+Math.round(i*(Lw-1)))}shouldForceSelection(e){return lo?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),zw)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let i=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);i&&i.length!==this._model.selectionStart[0]&&i.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let i=this._getMouseBufferCoords(e);i&&(this._activeSelectionMode=2,this._selectLineAt(i[1]))}shouldColumnSelect(e){return e.altKey&&!(lo&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let i=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let n=this._bufferService.buffer;if(this._model.selectionEnd[1]<n.lines.length){let l=n.lines.get(this._model.selectionEnd[1]);l&&l.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!i||i[0]!==this._model.selectionEnd[0]||i[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let i=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&i<Nw&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let n=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(n&&n[0]!==void 0&&n[1]!==void 0){let l=Tw(n[0]-1,n[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(l,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,i=this._model.finalSelectionEnd,n=!!e&&!!i&&(e[0]!==i[0]||e[1]!==i[1]);if(!n){this._oldHasSelection&&this._fireOnSelectionChange(e,i,n);return}!e||!i||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||i[0]!==this._oldSelectionEnd[0]||i[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,i,n)}_fireOnSelectionChange(e,i,n){this._oldSelectionStart=e,this._oldSelectionEnd=i,this._oldHasSelection=n,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(i=>this._handleTrim(i))}_convertViewportColToCharacterIndex(e,i){let n=i;for(let l=0;i>=l;l++){let o=e.loadCell(l,this._workCell).getChars().length;this._workCell.getWidth()===0?n--:o>1&&i!==l&&(n+=o-1)}return n}setSelection(e,i,n){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,i],this._model.selectionStartLength=n,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,i,n=!0,l=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,h=o.lines.get(e[1]);if(!h)return;let f=o.translateBufferLineToString(e[1],!1),_=this._convertViewportColToCharacterIndex(h,e[0]),m=_,d=e[0]-_,S=0,p=0,y=0,w=0;if(f.charAt(_)===" "){for(;_>0&&f.charAt(_-1)===" ";)_--;for(;m<f.length&&f.charAt(m+1)===" ";)m++}else{let A=e[0],B=e[0];h.getWidth(A)===0&&(S++,A--),h.getWidth(B)===2&&(p++,B++);let j=h.getString(B).length;for(j>1&&(w+=j-1,m+=j-1);A>0&&_>0&&!this._isCharWordSeparator(h.loadCell(A-1,this._workCell));){h.loadCell(A-1,this._workCell);let R=this._workCell.getChars().length;this._workCell.getWidth()===0?(S++,A--):R>1&&(y+=R-1,_-=R-1),_--,A--}for(;B<h.length&&m+1<f.length&&!this._isCharWordSeparator(h.loadCell(B+1,this._workCell));){h.loadCell(B+1,this._workCell);let R=this._workCell.getChars().length;this._workCell.getWidth()===2?(p++,B++):R>1&&(w+=R-1,m+=R-1),m++,B++}}m++;let C=_+d-S+y,D=Math.min(this._bufferService.cols,m-_+S+p-y-w);if(!(!i&&f.slice(_,m).trim()==="")){if(n&&C===0&&h.getCodePoint(0)!==32){let A=o.lines.get(e[1]-1);if(A&&h.isWrapped&&A.getCodePoint(this._bufferService.cols-1)!==32){let B=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(B){let j=this._bufferService.cols-B.start;C-=j,D+=j}}}if(l&&C+D===this._bufferService.cols&&h.getCodePoint(this._bufferService.cols-1)!==32){let A=o.lines.get(e[1]+1);if(A!=null&&A.isWrapped&&A.getCodePoint(0)!==32){let B=this._getWordAt([0,e[1]+1],!1,!1,!0);B&&(D+=B.length)}}return{start:C,length:D}}}_selectWordAt(e,i){let n=this._getWordAt(e,i);if(n){for(;n.start<0;)n.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[n.start,e[1]],this._model.selectionStartLength=n.length}}_selectToWordAt(e){let i=this._getWordAt(e,!0);if(i){let n=e[1];for(;i.start<0;)i.start+=this._bufferService.cols,n--;if(!this._model.areSelectionValuesReversed())for(;i.start+i.length>this._bufferService.cols;)i.length-=this._bufferService.cols,n++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?i.start:i.start+i.length,n]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let i=this._bufferService.buffer.getWrappedRangeForLine(e),n={start:{x:0,y:i.first},end:{x:this._bufferService.cols-1,y:i.last}};this._model.selectionStart=[0,i.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=ev(n,this._bufferService.cols)}};Lu=Qe([se(3,At),se(4,or),se(5,tf),se(6,Bt),se(7,ss),se(8,is)],Lu);var tv=class{constructor(){this._data={}}set(e,i,n){this._data[e]||(this._data[e]={}),this._data[e][i]=n}get(e,i){return this._data[e]?this._data[e][i]:void 0}clear(){this._data={}}},iv=class{constructor(){this._color=new tv,this._css=new tv}setCss(e,i,n){this._css.set(e,i,n)}getCss(e,i){return this._css.get(e,i)}setColor(e,i,n){this._color.set(e,i,n)}getColor(e,i){return this._color.get(e,i)}clear(){this._color.clear(),this._css.clear()}},ht=Object.freeze((()=>{let e=[Xe.toColor("#2e3436"),Xe.toColor("#cc0000"),Xe.toColor("#4e9a06"),Xe.toColor("#c4a000"),Xe.toColor("#3465a4"),Xe.toColor("#75507b"),Xe.toColor("#06989a"),Xe.toColor("#d3d7cf"),Xe.toColor("#555753"),Xe.toColor("#ef2929"),Xe.toColor("#8ae234"),Xe.toColor("#fce94f"),Xe.toColor("#729fcf"),Xe.toColor("#ad7fa8"),Xe.toColor("#34e2e2"),Xe.toColor("#eeeeec")],i=[0,95,135,175,215,255];for(let n=0;n<216;n++){let l=i[n/36%6|0],o=i[n/6%6|0],h=i[n%6];e.push({css:at.toCss(l,o,h),rgba:at.toRgba(l,o,h)})}for(let n=0;n<24;n++){let l=8+n*10;e.push({css:at.toCss(l,l,l),rgba:at.toRgba(l,l,l)})}return e})()),ir=Xe.toColor("#ffffff"),ll=Xe.toColor("#000000"),sv=Xe.toColor("#ffffff"),rv=ll,tl={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},qw=ir,zu=class extends ye{constructor(e){super(),this._optionsService=e,this._contrastCache=new iv,this._halfContrastCache=new iv,this._onChangeColors=this._register(new J),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:ir,background:ll,cursor:sv,cursorAccent:rv,selectionForeground:void 0,selectionBackgroundTransparent:tl,selectionBackgroundOpaque:We.blend(ll,tl),selectionInactiveBackgroundTransparent:tl,selectionInactiveBackgroundOpaque:We.blend(ll,tl),scrollbarSliderBackground:We.opacity(ir,.2),scrollbarSliderHoverBackground:We.opacity(ir,.4),scrollbarSliderActiveBackground:We.opacity(ir,.5),overviewRulerBorder:ir,ansi:ht.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let i=this._colors;if(i.foreground=Ue(e.foreground,ir),i.background=Ue(e.background,ll),i.cursor=We.blend(i.background,Ue(e.cursor,sv)),i.cursorAccent=We.blend(i.background,Ue(e.cursorAccent,rv)),i.selectionBackgroundTransparent=Ue(e.selectionBackground,tl),i.selectionBackgroundOpaque=We.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=Ue(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=We.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?Ue(e.selectionForeground,Zg):void 0,i.selectionForeground===Zg&&(i.selectionForeground=void 0),We.isOpaque(i.selectionBackgroundTransparent)&&(i.selectionBackgroundTransparent=We.opacity(i.selectionBackgroundTransparent,.3)),We.isOpaque(i.selectionInactiveBackgroundTransparent)&&(i.selectionInactiveBackgroundTransparent=We.opacity(i.selectionInactiveBackgroundTransparent,.3)),i.scrollbarSliderBackground=Ue(e.scrollbarSliderBackground,We.opacity(i.foreground,.2)),i.scrollbarSliderHoverBackground=Ue(e.scrollbarSliderHoverBackground,We.opacity(i.foreground,.4)),i.scrollbarSliderActiveBackground=Ue(e.scrollbarSliderActiveBackground,We.opacity(i.foreground,.5)),i.overviewRulerBorder=Ue(e.overviewRulerBorder,qw),i.ansi=ht.slice(),i.ansi[0]=Ue(e.black,ht[0]),i.ansi[1]=Ue(e.red,ht[1]),i.ansi[2]=Ue(e.green,ht[2]),i.ansi[3]=Ue(e.yellow,ht[3]),i.ansi[4]=Ue(e.blue,ht[4]),i.ansi[5]=Ue(e.magenta,ht[5]),i.ansi[6]=Ue(e.cyan,ht[6]),i.ansi[7]=Ue(e.white,ht[7]),i.ansi[8]=Ue(e.brightBlack,ht[8]),i.ansi[9]=Ue(e.brightRed,ht[9]),i.ansi[10]=Ue(e.brightGreen,ht[10]),i.ansi[11]=Ue(e.brightYellow,ht[11]),i.ansi[12]=Ue(e.brightBlue,ht[12]),i.ansi[13]=Ue(e.brightMagenta,ht[13]),i.ansi[14]=Ue(e.brightCyan,ht[14]),i.ansi[15]=Ue(e.brightWhite,ht[15]),e.extendedAnsi){let n=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let l=0;l<n;l++)i.ansi[l+16]=Ue(e.extendedAnsi[l],ht[l+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let i=0;i<this._restoreColors.ansi.length;++i)this._colors.ansi[i]=this._restoreColors.ansi[i];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};zu=Qe([se(0,Bt)],zu);function Ue(e,i){if(e!==void 0)try{return Xe.toColor(e)}catch{}return i}var jw=class{constructor(...e){this._entries=new Map;for(let[i,n]of e)this.set(i,n)}set(e,i){let n=this._entries.get(e);return this._entries.set(e,i),n}forEach(e){for(let[i,n]of this._entries.entries())e(i,n)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},Pw=class{constructor(){this._services=new jw,this._services.set(ef,this)}setService(e,i){this._services.set(e,i)}getService(e){return this._services.get(e)}createInstance(e,...i){let n=L1(e).sort((h,f)=>h.index-f.index),l=[];for(let h of n){let f=this._services.get(h.id);if(!f)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${h.id._id}.`);l.push(f)}let o=n.length>0?n[0].index:i.length;if(i.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${i.length} static arguments`);return new e(...i,...l)}},Ww={trace:0,debug:1,info:2,warn:3,error:4,off:5},Yw="xterm.js: ",Nu=class extends ye{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=Ww[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let i=0;i<e.length;i++)typeof e[i]=="function"&&(e[i]=e[i]())}_log(e,i,n){this._evalLazyOptionalParams(n),e.call(console,(this._optionsService.options.logger?"":Yw)+i,...n)}trace(e,...i){var n;this._logLevel<=0&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,e,i)}debug(e,...i){var n;this._logLevel<=1&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,e,i)}info(e,...i){var n;this._logLevel<=2&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,e,i)}warn(e,...i){var n;this._logLevel<=3&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,e,i)}error(e,...i){var n;this._logLevel<=4&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,e,i)}};Nu=Qe([se(0,Bt)],Nu);var nv=class extends ye{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new J),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new J),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new J),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let i=new Array(e);for(let n=0;n<Math.min(e,this.length);n++)i[n]=this._array[this._getCyclicIndex(n)];this._array=i,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let i=this._length;i<e;i++)this._array[i]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,i){this._array[this._getCyclicIndex(e)]=i}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,i,...n){if(i){for(let l=e;l<this._length-i;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+i)];this._length-=i,this.onDeleteEmitter.fire({index:e,amount:i})}for(let l=this._length-1;l>=e;l--)this._array[this._getCyclicIndex(l+n.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<n.length;l++)this._array[this._getCyclicIndex(e+l)]=n[l];if(n.length&&this.onInsertEmitter.fire({index:e,amount:n.length}),this._length+n.length>this._maxLength){let l=this._length+n.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=n.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,i,n){if(!(i<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+n<0)throw new Error("Cannot shift elements in list beyond index 0");if(n>0){for(let o=i-1;o>=0;o--)this.set(e+o+n,this.get(e+o));let l=e+i+n-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<i;l++)this.set(e+l+n,this.get(e+l))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Se=3,lt=Object.freeze(new pl),Va=0,Qh=2,al=class Up{constructor(i,n,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(i*Se);let o=n||_i.fromCharData([0,sp,1,0]);for(let h=0;h<i;++h)this.setCell(h,o);this.length=i}get(i){let n=this._data[i*Se+0],l=n&2097151;return[this._data[i*Se+1],n&2097152?this._combined[i]:l?Bs(l):"",n>>22,n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):l]}set(i,n){this._data[i*Se+1]=n[0],n[1].length>1?(this._combined[i]=n[1],this._data[i*Se+0]=i|2097152|n[2]<<22):this._data[i*Se+0]=n[1].charCodeAt(0)|n[2]<<22}getWidth(i){return this._data[i*Se+0]>>22}hasWidth(i){return this._data[i*Se+0]&12582912}getFg(i){return this._data[i*Se+1]}getBg(i){return this._data[i*Se+2]}hasContent(i){return this._data[i*Se+0]&4194303}getCodePoint(i){let n=this._data[i*Se+0];return n&2097152?this._combined[i].charCodeAt(this._combined[i].length-1):n&2097151}isCombined(i){return this._data[i*Se+0]&2097152}getString(i){let n=this._data[i*Se+0];return n&2097152?this._combined[i]:n&2097151?Bs(n&2097151):""}isProtected(i){return this._data[i*Se+2]&536870912}loadCell(i,n){return Va=i*Se,n.content=this._data[Va+0],n.fg=this._data[Va+1],n.bg=this._data[Va+2],n.content&2097152&&(n.combinedData=this._combined[i]),n.bg&268435456&&(n.extended=this._extendedAttrs[i]),n}setCell(i,n){n.content&2097152&&(this._combined[i]=n.combinedData),n.bg&268435456&&(this._extendedAttrs[i]=n.extended),this._data[i*Se+0]=n.content,this._data[i*Se+1]=n.fg,this._data[i*Se+2]=n.bg}setCellFromCodepoint(i,n,l,o){o.bg&268435456&&(this._extendedAttrs[i]=o.extended),this._data[i*Se+0]=n|l<<22,this._data[i*Se+1]=o.fg,this._data[i*Se+2]=o.bg}addCodepointToCell(i,n,l){let o=this._data[i*Se+0];o&2097152?this._combined[i]+=Bs(n):o&2097151?(this._combined[i]=Bs(o&2097151)+Bs(n),o&=-2097152,o|=2097152):o=n|1<<22,l&&(o&=-12582913,o|=l<<22),this._data[i*Se+0]=o}insertCells(i,n,l){if(i%=this.length,i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,l),n<this.length-i){let o=new _i;for(let h=this.length-i-n-1;h>=0;--h)this.setCell(i+n+h,this.loadCell(i+h,o));for(let h=0;h<n;++h)this.setCell(i+h,l)}else for(let o=i;o<this.length;++o)this.setCell(o,l);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,l)}deleteCells(i,n,l){if(i%=this.length,n<this.length-i){let o=new _i;for(let h=0;h<this.length-i-n;++h)this.setCell(i+h,this.loadCell(i+n+h,o));for(let h=this.length-n;h<this.length;++h)this.setCell(h,l)}else for(let o=i;o<this.length;++o)this.setCell(o,l);i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,l),this.getWidth(i)===0&&!this.hasContent(i)&&this.setCellFromCodepoint(i,0,1,l)}replaceCells(i,n,l,o=!1){if(o){for(i&&this.getWidth(i-1)===2&&!this.isProtected(i-1)&&this.setCellFromCodepoint(i-1,0,1,l),n<this.length&&this.getWidth(n-1)===2&&!this.isProtected(n)&&this.setCellFromCodepoint(n,0,1,l);i<n&&i<this.length;)this.isProtected(i)||this.setCell(i,l),i++;return}for(i&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i-1,0,1,l),n<this.length&&this.getWidth(n-1)===2&&this.setCellFromCodepoint(n,0,1,l);i<n&&i<this.length;)this.setCell(i++,l)}resize(i,n){if(i===this.length)return this._data.length*4*Qh<this._data.buffer.byteLength;let l=i*Se;if(i>this.length){if(this._data.buffer.byteLength>=l*4)this._data=new Uint32Array(this._data.buffer,0,l);else{let o=new Uint32Array(l);o.set(this._data),this._data=o}for(let o=this.length;o<i;++o)this.setCell(o,n)}else{this._data=this._data.subarray(0,l);let o=Object.keys(this._combined);for(let f=0;f<o.length;f++){let _=parseInt(o[f],10);_>=i&&delete this._combined[_]}let h=Object.keys(this._extendedAttrs);for(let f=0;f<h.length;f++){let _=parseInt(h[f],10);_>=i&&delete this._extendedAttrs[_]}}return this.length=i,l*4*Qh<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*Qh<this._data.buffer.byteLength){let i=new Uint32Array(this._data.length);return i.set(this._data),this._data=i,1}return 0}fill(i,n=!1){if(n){for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,i);return}this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,i)}copyFrom(i){this.length!==i.length?this._data=new Uint32Array(i._data):this._data.set(i._data),this.length=i.length,this._combined={};for(let n in i._combined)this._combined[n]=i._combined[n];this._extendedAttrs={};for(let n in i._extendedAttrs)this._extendedAttrs[n]=i._extendedAttrs[n];this.isWrapped=i.isWrapped}clone(){let i=new Up(0);i._data=new Uint32Array(this._data),i.length=this.length;for(let n in this._combined)i._combined[n]=this._combined[n];for(let n in this._extendedAttrs)i._extendedAttrs[n]=this._extendedAttrs[n];return i.isWrapped=this.isWrapped,i}getTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Se+0]&4194303)return i+(this._data[i*Se+0]>>22);return 0}getNoBgTrimmedLength(){for(let i=this.length-1;i>=0;--i)if(this._data[i*Se+0]&4194303||this._data[i*Se+2]&50331648)return i+(this._data[i*Se+0]>>22);return 0}copyCellsFrom(i,n,l,o,h){let f=i._data;if(h)for(let m=o-1;m>=0;m--){for(let d=0;d<Se;d++)this._data[(l+m)*Se+d]=f[(n+m)*Se+d];f[(n+m)*Se+2]&268435456&&(this._extendedAttrs[l+m]=i._extendedAttrs[n+m])}else for(let m=0;m<o;m++){for(let d=0;d<Se;d++)this._data[(l+m)*Se+d]=f[(n+m)*Se+d];f[(n+m)*Se+2]&268435456&&(this._extendedAttrs[l+m]=i._extendedAttrs[n+m])}let _=Object.keys(i._combined);for(let m=0;m<_.length;m++){let d=parseInt(_[m],10);d>=n&&(this._combined[d-n+l]=i._combined[d])}}translateToString(i,n,l,o){n=n??0,l=l??this.length,i&&(l=Math.min(l,this.getTrimmedLength())),o&&(o.length=0);let h="";for(;n<l;){let f=this._data[n*Se+0],_=f&2097151,m=f&2097152?this._combined[n]:_?Bs(_):Os;if(h+=m,o)for(let d=0;d<m.length;++d)o.push(n);n+=f>>22||1}return o&&o.push(n),h}};function Kw(e,i,n,l,o,h){let f=[];for(let _=0;_<e.length-1;_++){let m=_,d=e.get(++m);if(!d.isWrapped)continue;let S=[e.get(_)];for(;m<e.length&&d.isWrapped;)S.push(d),d=e.get(++m);if(!h&&l>=_&&l<m){_+=S.length-1;continue}let p=0,y=_l(S,p,i),w=1,C=0;for(;w<S.length;){let A=_l(S,w,i),B=A-C,j=n-y,R=Math.min(B,j);S[p].copyCellsFrom(S[w],C,y,R,!1),y+=R,y===n&&(p++,y=0),C+=R,C===A&&(w++,C=0),y===0&&p!==0&&S[p-1].getWidth(n-1)===2&&(S[p].copyCellsFrom(S[p-1],n-1,y++,1,!1),S[p-1].setCell(n-1,o))}S[p].replaceCells(y,n,o);let D=0;for(let A=S.length-1;A>0&&(A>p||S[A].getTrimmedLength()===0);A--)D++;D>0&&(f.push(_+S.length-D),f.push(D)),_+=S.length-1}return f}function Vw(e,i){let n=[],l=0,o=i[l],h=0;for(let f=0;f<e.length;f++)if(o===f){let _=i[++l];e.onDeleteEmitter.fire({index:f-h,amount:_}),f+=_-1,h+=_,o=i[++l]}else n.push(f);return{layout:n,countRemoved:h}}function Gw(e,i){let n=[];for(let l=0;l<i.length;l++)n.push(e.get(i[l]));for(let l=0;l<n.length;l++)e.set(l,n[l]);e.length=i.length}function Fw(e,i,n){let l=[],o=e.map((m,d)=>_l(e,d,i)).reduce((m,d)=>m+d),h=0,f=0,_=0;for(;_<o;){if(o-_<n){l.push(o-_);break}h+=n;let m=_l(e,f,i);h>m&&(h-=m,f++);let d=e[f].getWidth(h-1)===2;d&&h--;let S=d?n-1:n;l.push(S),_+=S}return l}function _l(e,i,n){if(i===e.length-1)return e[i].getTrimmedLength();let l=!e[i].hasContent(n-1)&&e[i].getWidth(n-1)===1,o=e[i+1].getWidth(0)===2;return l&&o?n-1:n}var qp=class jp{constructor(i){this.line=i,this.isDisposed=!1,this._disposables=[],this._id=jp._nextId++,this._onDispose=this.register(new J),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),lr(this._disposables),this._disposables.length=0)}register(i){return this._disposables.push(i),i}};qp._nextId=1;var Xw=qp,ft={},sr=ft.B;ft[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ft.A={"#":""};ft.B=void 0;ft[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ft.C=ft[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ft.E=ft[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ft.H=ft[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var lv=4294967295,av=class{constructor(e,i,n){this._hasScrollback=e,this._optionsService=i,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=lt.clone(),this.savedCharset=sr,this.markers=[],this._nullCell=_i.fromCharData([0,sp,1,0]),this._whitespaceCell=_i.fromCharData([0,Os,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new ao,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new nv(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new so),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new so),this._whitespaceCell}getBlankLine(e,i){return new al(this._bufferService.cols,this.getNullCell(e),i)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let i=e+this._optionsService.rawOptions.scrollback;return i>lv?lv:i}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=lt);let i=this._rows;for(;i--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new nv(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,i){let n=this.getNullCell(lt),l=0,o=this._getCorrectBufferLength(i);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let f=0;f<this.lines.length;f++)l+=+this.lines.get(f).resize(e,n);let h=0;if(this._rows<i)for(let f=this._rows;f<i;f++)this.lines.length<i+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new al(e,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new al(e,n)));else for(let f=this._rows;f>i;f--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let f=this.lines.length-o;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,i-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(e,i),this._cols>e))for(let h=0;h<this.lines.length;h++)l+=+this.lines.get(h).resize(e,n);this._cols=e,this._rows=i,this._memoryCleanupQueue.clear(),l>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let i=0;for(;this._memoryCleanupPosition<this.lines.length;)if(i+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),i>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,i){this._cols!==e&&(e>this._cols?this._reflowLarger(e,i):this._reflowSmaller(e,i))}_reflowLarger(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,l=Kw(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(lt),n);if(l.length>0){let o=Vw(this.lines,l);Gw(this.lines,o.layout),this._reflowLargerAdjustViewport(e,i,o.countRemoved)}}_reflowLargerAdjustViewport(e,i,n){let l=this.getNullCell(lt),o=n;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new al(e,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(e,i){let n=this._optionsService.rawOptions.reflowCursorLine,l=this.getNullCell(lt),o=[],h=0;for(let f=this.lines.length-1;f>=0;f--){let _=this.lines.get(f);if(!_||!_.isWrapped&&_.getTrimmedLength()<=e)continue;let m=[_];for(;_.isWrapped&&f>0;)_=this.lines.get(--f),m.unshift(_);if(!n){let R=this.ybase+this.y;if(R>=f&&R<f+m.length)continue}let d=m[m.length-1].getTrimmedLength(),S=Fw(m,this._cols,e),p=S.length-m.length,y;this.ybase===0&&this.y!==this.lines.length-1?y=Math.max(0,this.y-this.lines.maxLength+p):y=Math.max(0,this.lines.length-this.lines.maxLength+p);let w=[];for(let R=0;R<p;R++){let q=this.getBlankLine(lt,!0);w.push(q)}w.length>0&&(o.push({start:f+m.length+h,newLines:w}),h+=w.length),m.push(...w);let C=S.length-1,D=S[C];D===0&&(C--,D=S[C]);let A=m.length-p-1,B=d;for(;A>=0;){let R=Math.min(B,D);if(m[C]===void 0)break;if(m[C].copyCellsFrom(m[A],B-R,D-R,R,!0),D-=R,D===0&&(C--,D=S[C]),B-=R,B===0){A--;let q=Math.max(A,0);B=_l(m,q,this._cols)}}for(let R=0;R<m.length;R++)S[R]<e&&m[R].setCell(S[R],l);let j=p-y;for(;j-- >0;)this.ybase===0?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+p,this.ybase+i-1)}if(o.length>0){let f=[],_=[];for(let D=0;D<this.lines.length;D++)_.push(this.lines.get(D));let m=this.lines.length,d=m-1,S=0,p=o[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);let y=0;for(let D=Math.min(this.lines.maxLength-1,m+h-1);D>=0;D--)if(p&&p.start>d+y){for(let A=p.newLines.length-1;A>=0;A--)this.lines.set(D--,p.newLines[A]);D++,f.push({index:d+1,amount:p.newLines.length}),y+=p.newLines.length,p=o[++S]}else this.lines.set(D,_[d--]);let w=0;for(let D=f.length-1;D>=0;D--)f[D].index+=w,this.lines.onInsertEmitter.fire(f[D]),w+=f[D].amount;let C=Math.max(0,m+h-this.lines.maxLength);C>0&&this.lines.onTrimEmitter.fire(C)}}translateBufferLineToString(e,i,n=0,l){let o=this.lines.get(e);return o?o.translateToString(i,n,l):""}getWrappedRangeForLine(e){let i=e,n=e;for(;i>0&&this.lines.get(i).isWrapped;)i--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:i,last:n}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let i=0;i<this.markers.length;i++)this.markers[i].line===e&&(this.markers[i].dispose(),this.markers.splice(i--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let i=new Xw(e);return this.markers.push(i),i.register(this.lines.onTrim(n=>{i.line-=n,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(n=>{i.line>=n.index&&(i.line+=n.amount)})),i.register(this.lines.onDelete(n=>{i.line>=n.index&&i.line<n.index+n.amount&&i.dispose(),i.line>n.index&&(i.line-=n.amount)})),i.register(i.onDispose(()=>this._removeMarker(i))),i}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},$w=class extends ye{constructor(e,i){super(),this._optionsService=e,this._bufferService=i,this._onBufferActivate=this._register(new J),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new av(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new av(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,i){this._normal.resize(e,i),this._alt.resize(e,i),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},Pp=2,Wp=1,Hu=class extends ye{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new J),this.onResize=this._onResize.event,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,Pp),this.rows=Math.max(e.rawOptions.rows||0,Wp),this.buffers=this._register(new $w(e,this)),this._register(this.buffers.onBufferActivate(i=>{this._onScroll.fire(i.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,i){let n=this.cols!==e,l=this.rows!==i;this.cols=e,this.rows=i,this.buffers.resize(e,i),this._onResize.fire({cols:e,rows:i,colsChanged:n,rowsChanged:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,i=!1){let n=this.buffer,l;l=this._cachedBlankLine,(!l||l.length!==this.cols||l.getFg(0)!==e.fg||l.getBg(0)!==e.bg)&&(l=n.getBlankLine(e,i),this._cachedBlankLine=l),l.isWrapped=i;let o=n.ybase+n.scrollTop,h=n.ybase+n.scrollBottom;if(n.scrollTop===0){let f=n.lines.isFull;h===n.lines.length-1?f?n.lines.recycle().copyFrom(l):n.lines.push(l.clone()):n.lines.splice(h+1,0,l.clone()),f?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{let f=h-o+1;n.lines.shiftElements(o+1,f-1,-1),n.lines.set(h,l.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(e,i){let n=this.buffer;if(e<0){if(n.ydisp===0)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);let l=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),l!==n.ydisp&&(i||this._onScroll.fire(n.ydisp))}};Hu=Qe([se(0,Bt)],Hu);var $r={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:lo,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},Iw=["normal","bold","100","200","300","400","500","600","700","800","900"],Zw=class extends ye{constructor(e){super(),this._onOptionChange=this._register(new J),this.onOptionChange=this._onOptionChange.event;let i={...$r};for(let n in e)if(n in i)try{let l=e[n];i[n]=this._sanitizeAndValidateOption(n,l)}catch(l){console.error(l)}this.rawOptions=i,this.options={...i},this._setupOptions(),this._register(Ve(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,i){return this.onOptionChange(n=>{n===e&&i(this.rawOptions[e])})}onMultipleOptionChange(e,i){return this.onOptionChange(n=>{e.indexOf(n)!==-1&&i()})}_setupOptions(){let e=n=>{if(!(n in $r))throw new Error(`No option with key "${n}"`);return this.rawOptions[n]},i=(n,l)=>{if(!(n in $r))throw new Error(`No option with key "${n}"`);l=this._sanitizeAndValidateOption(n,l),this.rawOptions[n]!==l&&(this.rawOptions[n]=l,this._onOptionChange.fire(n))};for(let n in this.rawOptions){let l={get:e.bind(this,n),set:i.bind(this,n)};Object.defineProperty(this.options,n,l)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=$r[e]),!Qw(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=$r[e]);break;case"fontWeight":case"fontWeightBold":if(typeof i=="number"&&1<=i&&i<=1e3)break;i=Iw.includes(i)?i:$r[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(i*10)/10));break;case"scrollback":if(i=Math.min(i,4294967295),i<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&i!==0)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=i??{};break}return i}};function Qw(e){return e==="block"||e==="underline"||e==="bar"}function ol(e,i=5){if(typeof e!="object")return e;let n=Array.isArray(e)?[]:{};for(let l in e)n[l]=i<=1?e[l]:e[l]&&ol(e[l],i-1);return n}var ov=Object.freeze({insertMode:!1}),cv=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),Uu=class extends ye{constructor(e,i,n){super(),this._bufferService=e,this._logService=i,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new J),this.onData=this._onData.event,this._onUserInput=this._register(new J),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new J),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new J),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=ol(ov),this.decPrivateModes=ol(cv)}reset(){this.modes=ol(ov),this.decPrivateModes=ol(cv)}triggerDataEvent(e,i=!1){if(this._optionsService.rawOptions.disableStdin)return;let n=this._bufferService.buffer;i&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),i&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(l=>l.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(i=>i.charCodeAt(0))),this._onBinary.fire(e))}};Uu=Qe([se(0,At),se(1,op),se(2,Bt)],Uu);var hv={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function Jh(e,i){let n=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(n|=64,n|=e.action):(n|=e.button&3,e.button&4&&(n|=64),e.button&8&&(n|=128),e.action===32?n|=32:e.action===0&&!i&&(n|=3)),n}var eu=String.fromCharCode,uv={DEFAULT:e=>{let i=[Jh(e,!1)+32,e.col+32,e.row+32];return i[0]>255||i[1]>255||i[2]>255?"":`\x1B[M${eu(i[0])}${eu(i[1])}${eu(i[2])}`},SGR:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Jh(e,!0)};${e.col};${e.row}${i}`},SGR_PIXELS:e=>{let i=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${Jh(e,!0)};${e.x};${e.y}${i}`}},qu=class extends ye{constructor(e,i,n){super(),this._bufferService=e,this._coreService=i,this._optionsService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new J),this.onProtocolChange=this._onProtocolChange.event;for(let l of Object.keys(hv))this.addProtocol(l,hv[l]);for(let l of Object.keys(uv))this.addEncoding(l,uv[l]);this.reset()}addProtocol(e,i){this._protocols[e]=i}addEncoding(e,i){this._encodings[e]=i}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,i,n){if(e.deltaY===0||e.shiftKey||i===void 0||n===void 0)return 0;let l=i/n,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=l+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,i){return i.altKey||i.ctrlKey||i.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let i=this._encodings[this._activeEncoding](e);return i&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(i):this._coreService.triggerDataEvent(i,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,i,n){if(n){if(e.x!==i.x||e.y!==i.y)return!1}else if(e.col!==i.col||e.row!==i.row)return!1;return!(e.button!==i.button||e.action!==i.action||e.ctrl!==i.ctrl||e.alt!==i.alt||e.shift!==i.shift)}};qu=Qe([se(0,At),se(1,or),se(2,Bt)],qu);var tu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],Jw=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],ut;function e2(e,i){let n=0,l=i.length-1,o;if(e<i[0][0]||e>i[l][1])return!1;for(;l>=n;)if(o=n+l>>1,e>i[o][1])n=o+1;else if(e<i[o][0])l=o-1;else return!0;return!1}var t2=class{constructor(){if(this.version="6",!ut){ut=new Uint8Array(65536),ut.fill(1),ut[0]=0,ut.fill(0,1,32),ut.fill(0,127,160),ut.fill(2,4352,4448),ut[9001]=2,ut[9002]=2,ut.fill(2,11904,42192),ut[12351]=1,ut.fill(2,44032,55204),ut.fill(2,63744,64256),ut.fill(2,65040,65050),ut.fill(2,65072,65136),ut.fill(2,65280,65377),ut.fill(2,65504,65511);for(let e=0;e<tu.length;++e)ut.fill(0,tu[e][0],tu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?ut[e]:e2(e,Jw)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,i){let n=this.wcwidth(e),l=n===0&&i!==0;if(l){let o=rr.extractWidth(i);o===0?l=!1:o>n&&(n=o)}return rr.createPropertyValue(0,n,l)}},rr=class to{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new J,this.onChange=this._onChange.event;let i=new t2;this.register(i),this._active=i.version,this._activeProvider=i}static extractShouldJoin(i){return(i&1)!==0}static extractWidth(i){return i>>1&3}static extractCharKind(i){return i>>3}static createPropertyValue(i,n,l=!1){return(i&16777215)<<3|(n&3)<<1|(l?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let n=0,l=0,o=i.length;for(let h=0;h<o;++h){let f=i.charCodeAt(h);if(55296<=f&&f<=56319){if(++h>=o)return n+this.wcwidth(f);let d=i.charCodeAt(h);56320<=d&&d<=57343?f=(f-55296)*1024+d-56320+65536:n+=this.wcwidth(d)}let _=this.charProperties(f,l),m=to.extractWidth(_);to.extractShouldJoin(_)&&(m-=to.extractWidth(l)),n+=m,l=_}return n}charProperties(i,n){return this._activeProvider.charProperties(i,n)}},i2=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,i){this._charsets[e]=i,this.glevel===e&&(this.charset=i)}};function fv(e){var l;let i=(l=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:l.get(e.cols-1),n=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);n&&i&&(n.isWrapped=i[3]!==0&&i[3]!==32)}var il=2147483647,s2=256,Yp=class ju{constructor(i=32,n=32){if(this.maxLength=i,this.maxSubParamsLength=n,n>s2)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(n),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(i){let n=new ju;if(!i.length)return n;for(let l=Array.isArray(i[0])?1:0;l<i.length;++l){let o=i[l];if(Array.isArray(o))for(let h=0;h<o.length;++h)n.addSubParam(o[h]);else n.addParam(o)}return n}clone(){let i=new ju(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let n=0;n<this.length;++n){i.push(this.params[n]);let l=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-l>0&&i.push(Array.prototype.slice.call(this._subParams,l,o))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>il?il:i}addSubParam(i){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>il?il:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(this._subParamsIdx[i]&255)-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let n=this._subParamsIdx[i]>>8,l=this._subParamsIdx[i]&255;return l-n>0?this._subParams.subarray(n,l):null}getSubParamsAll(){let i={};for(let n=0;n<this.length;++n){let l=this._subParamsIdx[n]>>8,o=this._subParamsIdx[n]&255;o-l>0&&(i[n]=this._subParams.slice(l,o))}return i}addDigit(i){let n;if(this._rejectDigits||!(n=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let l=this._digitIsSub?this._subParams:this.params,o=l[n-1];l[n-1]=~o?Math.min(o*10+i,il):i}},sl=[],r2=class{constructor(){this._state=0,this._active=sl,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let l=n.indexOf(i);l!==-1&&n.splice(l,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=sl}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=sl,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||sl,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,i,n){if(!this._active.length)this._handlerFb(this._id,"PUT",_o(e,i,n));else for(let l=this._active.length-1;l>=0;l--)this._active[l].put(e,i,n)}start(){this.reset(),this._state=1}put(e,i,n){if(this._state!==3){if(this._state===1)for(;i<n;){let l=e[i++];if(l===59){this._state=2,this._start();break}if(l<48||57<l){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+l-48}this._state===2&&n-i>0&&this._put(e,i,n)}}end(e,i=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let n=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=i,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;l>=0&&(n=this._active[l].end(e),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].end(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}this._active=sl,this._id=-1,this._state=0}}},Qt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=_o(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data),i instanceof Promise))return i.then(n=>(this._data="",this._hitLimit=!1,n));return this._data="",this._hitLimit=!1,i}},rl=[],n2=class{constructor(){this._handlers=Object.create(null),this._active=rl,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=rl}registerHandler(e,i){this._handlers[e]===void 0&&(this._handlers[e]=[]);let n=this._handlers[e];return n.push(i),{dispose:()=>{let l=n.indexOf(i);l!==-1&&n.splice(l,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=rl,this._ident=0}hook(e,i){if(this.reset(),this._ident=e,this._active=this._handlers[e]||rl,!this._active.length)this._handlerFb(this._ident,"HOOK",i);else for(let n=this._active.length-1;n>=0;n--)this._active[n].hook(i)}put(e,i,n){if(!this._active.length)this._handlerFb(this._ident,"PUT",_o(e,i,n));else for(let l=this._active.length-1;l>=0;l--)this._active[l].put(e,i,n)}unhook(e,i=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let n=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,n=i,o=this._stack.fallThrough,this._stack.paused=!1),!o&&n===!1){for(;l>=0&&(n=this._active[l].unhook(e),n!==!0);l--)if(n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,n;l--}for(;l>=0;l--)if(n=this._active[l].unhook(!1),n instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,n}this._active=rl,this._ident=0}},cl=new Yp;cl.addParam(0);var dv=class{constructor(e){this._handler=e,this._data="",this._params=cl,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():cl,this._data="",this._hitLimit=!1}put(e,i,n){this._hitLimit||(this._data+=_o(e,i,n),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data,this._params),i instanceof Promise))return i.then(n=>(this._params=cl,this._data="",this._hitLimit=!1,n));return this._params=cl,this._data="",this._hitLimit=!1,i}},l2=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,i){this.table.fill(e<<4|i)}add(e,i,n,l){this.table[i<<8|e]=n<<4|l}addMany(e,i,n,l){for(let o=0;o<e.length;o++)this.table[i<<8|e[o]]=n<<4|l}},di=160,a2=(function(){let e=new l2(4095),i=Array.apply(null,Array(256)).map((_,m)=>m),n=(_,m)=>i.slice(_,m),l=n(32,127),o=n(0,24);o.push(25),o.push.apply(o,n(28,32));let h=n(0,14),f;e.setDefault(1,0),e.addMany(l,0,2,0);for(f in h)e.addMany([24,26,153,154],f,3,0),e.addMany(n(128,144),f,3,0),e.addMany(n(144,152),f,3,0),e.add(156,f,0,0),e.add(27,f,11,1),e.add(157,f,4,8),e.addMany([152,158,159],f,0,7),e.add(155,f,11,3),e.add(144,f,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(l,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(n(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(l,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(n(64,127),3,7,0),e.addMany(n(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(n(48,60),4,8,4),e.addMany(n(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(n(32,64),6,0,6),e.add(127,6,0,6),e.addMany(n(64,127),6,0,0),e.addMany(n(32,48),3,9,5),e.addMany(n(32,48),5,9,5),e.addMany(n(48,64),5,0,6),e.addMany(n(64,127),5,7,0),e.addMany(n(32,48),4,9,5),e.addMany(n(32,48),1,9,2),e.addMany(n(32,48),2,9,2),e.addMany(n(48,127),2,10,0),e.addMany(n(48,80),1,10,0),e.addMany(n(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(n(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(n(28,32),9,0,9),e.addMany(n(32,48),9,9,12),e.addMany(n(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(n(32,128),11,0,11),e.addMany(n(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(n(28,32),10,0,10),e.addMany(n(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(n(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(n(28,32),12,0,12),e.addMany(n(32,48),12,9,12),e.addMany(n(48,64),12,0,11),e.addMany(n(64,127),12,12,13),e.addMany(n(64,127),10,12,13),e.addMany(n(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(l,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(di,0,2,0),e.add(di,8,5,8),e.add(di,6,0,6),e.add(di,11,0,11),e.add(di,13,13,13),e})(),o2=class extends ye{constructor(e=a2){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new Yp,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(i,n,l)=>{},this._executeHandlerFb=i=>{},this._csiHandlerFb=(i,n)=>{},this._escHandlerFb=i=>{},this._errorHandlerFb=i=>i,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ve(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new r2),this._dcsParser=this._register(new n2),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,i=[64,126]){let n=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(n=e.prefix.charCodeAt(0),n&&60>n||n>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let h=e.intermediates.charCodeAt(o);if(32>h||h>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");n<<=8,n|=h}}if(e.final.length!==1)throw new Error("final must be a single byte");let l=e.final.charCodeAt(0);if(i[0]>l||l>i[1])throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);return n<<=8,n|=l,n}identToString(e){let i=[];for(;e;)i.push(String.fromCharCode(e&255)),e>>=8;return i.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,i){let n=this._identifier(e,[48,126]);this._escHandlers[n]===void 0&&(this._escHandlers[n]=[]);let l=this._escHandlers[n];return l.push(i),{dispose:()=>{let o=l.indexOf(i);o!==-1&&l.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,i){this._executeHandlers[e.charCodeAt(0)]=i}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,i){let n=this._identifier(e);this._csiHandlers[n]===void 0&&(this._csiHandlers[n]=[]);let l=this._csiHandlers[n];return l.push(i),{dispose:()=>{let o=l.indexOf(i);o!==-1&&l.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,i){return this._dcsParser.registerHandler(this._identifier(e),i)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,i){return this._oscParser.registerHandler(e,i)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,i,n,l,o){this._parseStack.state=e,this._parseStack.handlers=i,this._parseStack.handlerPos=n,this._parseStack.transition=l,this._parseStack.chunkPos=o}parse(e,i,n){let l=0,o=0,h=0,f;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,h=this._parseStack.chunkPos+1;else{if(n===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,m=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(n===!1&&m>-1){for(;m>=0&&(f=_[m](this._params),f!==!0);m--)if(f instanceof Promise)return this._parseStack.handlerPos=m,f}this._parseStack.handlers=[];break;case 4:if(n===!1&&m>-1){for(;m>=0&&(f=_[m](),f!==!0);m--)if(f instanceof Promise)return this._parseStack.handlerPos=m,f}this._parseStack.handlers=[];break;case 6:if(l=e[this._parseStack.chunkPos],f=this._dcsParser.unhook(l!==24&&l!==26,n),f)return f;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(l=e[this._parseStack.chunkPos],f=this._oscParser.end(l!==24&&l!==26,n),f)return f;l===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,h=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let _=h;_<i;++_){switch(l=e[_],o=this._transitions.table[this.currentState<<8|(l<160?l:di)],o>>4){case 2:for(let y=_+1;;++y){if(y>=i||(l=e[y])<32||l>126&&l<di){this._printHandler(e,_,y),_=y-1;break}if(++y>=i||(l=e[y])<32||l>126&&l<di){this._printHandler(e,_,y),_=y-1;break}if(++y>=i||(l=e[y])<32||l>126&&l<di){this._printHandler(e,_,y),_=y-1;break}if(++y>=i||(l=e[y])<32||l>126&&l<di){this._printHandler(e,_,y),_=y-1;break}}break;case 3:this._executeHandlers[l]?this._executeHandlers[l]():this._executeHandlerFb(l),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:l,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let m=this._csiHandlers[this._collect<<8|l],d=m?m.length-1:-1;for(;d>=0&&(f=m[d](this._params),f!==!0);d--)if(f instanceof Promise)return this._preserveStack(3,m,d,o,_),f;d<0&&this._csiHandlerFb(this._collect<<8|l,this._params),this.precedingJoinState=0;break;case 8:do switch(l){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(l-48)}while(++_<i&&(l=e[_])>47&&l<60);_--;break;case 9:this._collect<<=8,this._collect|=l;break;case 10:let S=this._escHandlers[this._collect<<8|l],p=S?S.length-1:-1;for(;p>=0&&(f=S[p](),f!==!0);p--)if(f instanceof Promise)return this._preserveStack(4,S,p,o,_),f;p<0&&this._escHandlerFb(this._collect<<8|l),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|l,this._params);break;case 13:for(let y=_+1;;++y)if(y>=i||(l=e[y])===24||l===26||l===27||l>127&&l<di){this._dcsParser.put(e,_,y),_=y-1;break}break;case 14:if(f=this._dcsParser.unhook(l!==24&&l!==26),f)return this._preserveStack(6,[],0,o,_),f;l===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let y=_+1;;y++)if(y>=i||(l=e[y])<32||l>127&&l<di){this._oscParser.put(e,_,y),_=y-1;break}break;case 6:if(f=this._oscParser.end(l!==24&&l!==26),f)return this._preserveStack(5,[],0,o,_),f;l===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},c2=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h2=/^[\da-f]+$/;function _v(e){if(!e)return;let i=e.toLowerCase();if(i.indexOf("rgb:")===0){i=i.slice(4);let n=c2.exec(i);if(n){let l=n[1]?15:n[4]?255:n[7]?4095:65535;return[Math.round(parseInt(n[1]||n[4]||n[7]||n[10],16)/l*255),Math.round(parseInt(n[2]||n[5]||n[8]||n[11],16)/l*255),Math.round(parseInt(n[3]||n[6]||n[9]||n[12],16)/l*255)]}}else if(i.indexOf("#")===0&&(i=i.slice(1),h2.exec(i)&&[3,6,9,12].includes(i.length))){let n=i.length/3,l=[0,0,0];for(let o=0;o<3;++o){let h=parseInt(i.slice(n*o,n*o+n),16);l[o]=n===1?h<<4:n===2?h:n===3?h>>4:h>>8}return l}}function iu(e,i){let n=e.toString(16),l=n.length<2?"0"+n:n;switch(i){case 4:return n[0];case 8:return l;case 12:return(l+l).slice(0,3);default:return l+l}}function u2(e,i=16){let[n,l,o]=e;return`rgb:${iu(n,i)}/${iu(l,i)}/${iu(o,i)}`}var f2={"(":0,")":1,"*":2,"+":3,"-":1,".":2},As=131072,mv=10;function gv(e,i){if(e>24)return i.setWinLines||!1;switch(e){case 1:return!!i.restoreWin;case 2:return!!i.minimizeWin;case 3:return!!i.setWinPosition;case 4:return!!i.setWinSizePixels;case 5:return!!i.raiseWin;case 6:return!!i.lowerWin;case 7:return!!i.refreshWin;case 8:return!!i.setWinSizeChars;case 9:return!!i.maximizeWin;case 10:return!!i.fullscreenWin;case 11:return!!i.getWinState;case 13:return!!i.getWinPosition;case 14:return!!i.getWinSizePixels;case 15:return!!i.getScreenSizePixels;case 16:return!!i.getCellSizePixels;case 18:return!!i.getWinSizeChars;case 19:return!!i.getScreenSizeChars;case 20:return!!i.getIconTitle;case 21:return!!i.getWinTitle;case 22:return!!i.pushTitle;case 23:return!!i.popTitle;case 24:return!!i.setWinLines}return!1}var vv=5e3,pv=0,d2=class extends ye{constructor(e,i,n,l,o,h,f,_,m=new o2){super(),this._bufferService=e,this._charsetService=i,this._coreService=n,this._logService=l,this._optionsService=o,this._oscLinkService=h,this._coreMouseService=f,this._unicodeService=_,this._parser=m,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new B1,this._utf8Decoder=new O1,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=lt.clone(),this._eraseAttrDataInternal=lt.clone(),this._onRequestBell=this._register(new J),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new J),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new J),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new J),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new J),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new J),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new J),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new J),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new J),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new J),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new J),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new J),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new Pu(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,S)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:S.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,S,p)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:S,data:p})}),this._parser.setDcsHandlerFallback((d,S,p)=>{S==="HOOK"&&(p=p.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:S,payload:p})}),this._parser.setPrintHandler((d,S,p)=>this.print(d,S,p)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(G.BEL,()=>this.bell()),this._parser.setExecuteHandler(G.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(G.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(G.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(G.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(G.BS,()=>this.backspace()),this._parser.setExecuteHandler(G.HT,()=>this.tab()),this._parser.setExecuteHandler(G.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(G.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Ja.IND,()=>this.index()),this._parser.setExecuteHandler(Ja.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Ja.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Qt(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new Qt(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new Qt(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new Qt(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new Qt(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new Qt(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new Qt(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new Qt(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new Qt(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new Qt(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new Qt(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new Qt(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ft)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new dv((d,S)=>this.requestStatusString(d,S)))}getAttrData(){return this._curAttrData}_preserveStack(e,i,n,l){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=i,this._parseStack.decodedLength=n,this._parseStack.position=l}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((i,n)=>setTimeout(()=>n("#SLOW_TIMEOUT"),vv))]).catch(i=>{if(i!=="#SLOW_TIMEOUT")throw i;console.warn(`async parser handler taking longer than ${vv} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,i){let n,l=this._activeBuffer.x,o=this._activeBuffer.y,h=0,f=this._parseStack.paused;if(f){if(n=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,i))return this._logSlowResolvingAsync(n),n;l=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>As&&(h=this._parseStack.position+As)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<As&&(this._parseBuffer=new Uint32Array(Math.min(e.length,As))),f||this._dirtyRowTracker.clearRange(),e.length>As)for(let d=h;d<e.length;d+=As){let S=d+As<e.length?d+As:e.length,p=typeof e=="string"?this._stringDecoder.decode(e.substring(d,S),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,S),this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,p))return this._preserveStack(l,o,p,d),this._logSlowResolvingAsync(n),n}else if(!f){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(n=this._parser.parse(this._parseBuffer,d))return this._preserveStack(l,o,d,0),this._logSlowResolvingAsync(n),n}(this._activeBuffer.x!==l||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let _=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),m=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);m<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(m,this._bufferService.rows-1),end:Math.min(_,this._bufferService.rows-1)})}print(e,i,n){let l,o,h=this._charsetService.charset,f=this._optionsService.rawOptions.screenReaderMode,_=this._bufferService.cols,m=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,S=this._curAttrData,p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&n-i>0&&p.getWidth(this._activeBuffer.x-1)===2&&p.setCellFromCodepoint(this._activeBuffer.x-1,0,1,S);let y=this._parser.precedingJoinState;for(let w=i;w<n;++w){if(l=e[w],l<127&&h){let B=h[String.fromCharCode(l)];B&&(l=B.charCodeAt(0))}let C=this._unicodeService.charProperties(l,y);o=rr.extractWidth(C);let D=rr.extractShouldJoin(C),A=D?rr.extractWidth(y):0;if(y=C,f&&this._onA11yChar.fire(Bs(l)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-A>_){if(m){let B=p,j=this._activeBuffer.x-A;for(this._activeBuffer.x=A,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),p=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),A>0&&p instanceof al&&p.copyCellsFrom(B,j,0,A,!1);j<_;)B.setCellFromCodepoint(j++,0,1,S)}else if(this._activeBuffer.x=_-1,o===2)continue}if(D&&this._activeBuffer.x){let B=p.getWidth(this._activeBuffer.x-1)?1:2;p.addCodepointToCell(this._activeBuffer.x-B,l,o);for(let j=o-A;--j>=0;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,S);continue}if(d&&(p.insertCells(this._activeBuffer.x,o-A,this._activeBuffer.getNullCell(S)),p.getWidth(_-1)===2&&p.setCellFromCodepoint(_-1,0,1,S)),p.setCellFromCodepoint(this._activeBuffer.x++,l,o,S),o>0)for(;--o;)p.setCellFromCodepoint(this._activeBuffer.x++,0,0,S)}this._parser.precedingJoinState=y,this._activeBuffer.x<_&&n-i>0&&p.getWidth(this._activeBuffer.x)===0&&!p.hasContent(this._activeBuffer.x)&&p.setCellFromCodepoint(this._activeBuffer.x,0,1,S),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,i){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,n=>gv(n.params[0],this._optionsService.rawOptions.windowOptions)?i(n):!0):this._parser.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._parser.registerDcsHandler(e,new dv(i))}registerEscHandler(e,i){return this._parser.registerEscHandler(e,i)}registerOscHandler(e,i){return this._parser.registerOscHandler(e,new Qt(i))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);i.hasWidth(this._activeBuffer.x)&&!i.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,i){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+i):(this._activeBuffer.x=e,this._activeBuffer.y=i),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,i){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+i)}cursorUp(e){let i=this._activeBuffer.y-this._activeBuffer.scrollTop;return i>=0?this._moveCursor(0,-Math.min(i,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let i=this._activeBuffer.scrollBottom-this._activeBuffer.y;return i>=0?this._moveCursor(0,Math.min(i,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let i=e.params[0];return i===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:i===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let i=e.params[0]||1;for(;i--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let i=e.params[0];return i===1&&(this._curAttrData.bg|=536870912),(i===2||i===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,i,n,l=!1,o=!1){let h=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);h.replaceCells(i,n,this._activeBuffer.getNullCell(this._eraseAttrData()),o),l&&(h.isWrapped=!1)}_resetBufferLine(e,i=!1){let n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n&&(n.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),i),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),n.isWrapped=!1)}eraseInDisplay(e,i=!1){var l;this._restrictCursor(this._bufferService.cols);let n;switch(e.params[0]){case 0:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);n<this._bufferService.rows;n++)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(n);break;case 1:for(n=this._activeBuffer.y,this._dirtyRowTracker.markDirty(n),this._eraseInBufferLine(n,0,this._activeBuffer.x+1,!0,i),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(n+1).isWrapped=!1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(n=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,n-1);n--&&!((l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n))!=null&&l.getTrimmedLength()););for(;n>=0;n--)this._bufferService.scroll(this._eraseAttrData())}else{for(n=this._bufferService.rows,this._dirtyRowTracker.markDirty(n-1);n--;)this._resetBufferLine(n,i);this._dirtyRowTracker.markDirty(0)}break;case 3:let o=this._activeBuffer.lines.length-this._bufferService.rows;o>0&&(this._activeBuffer.lines.trimStart(o),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-o,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-o,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,i=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,i);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,i);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,i);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,l=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-l+1;for(;i--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(n,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let i=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let n=this._activeBuffer.ybase+this._activeBuffer.y,l;for(l=this._bufferService.rows-1-this._activeBuffer.scrollBottom,l=this._bufferService.rows-1+this._activeBuffer.ybase-l;i--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(l,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let i=e.params[0]||1;for(;i--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(lt));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.deleteCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.insertCells(0,i,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.insertCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=e.params[0]||1;for(let n=this._activeBuffer.scrollTop;n<=this._activeBuffer.scrollBottom;++n){let l=this._activeBuffer.lines.get(this._activeBuffer.ybase+n);l.deleteCells(this._activeBuffer.x,i,this._activeBuffer.getNullCell(this._eraseAttrData())),l.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return i&&(i.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let i=this._parser.precedingJoinState;if(!i)return!0;let n=e.params[0]||1,l=rr.extractWidth(i),o=this._activeBuffer.x-l,h=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),f=new Uint32Array(h.length*n),_=0;for(let d=0;d<h.length;){let S=h.codePointAt(d)||0;f[_++]=S,d+=S>65535?2:1}let m=_;for(let d=1;d<n;++d)f.copyWithin(m,0,_),m+=_;return this.print(f,0,m),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(G.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(G.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(G.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(G.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(G.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,sr),this._charsetService.setgCharset(1,sr),this._charsetService.setgCharset(2,sr),this._charsetService.setgCharset(3,sr);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let i=0;i<e.length;i++)switch(e.params[i]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[i]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,i){(D=>(D[D.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",D[D.SET=1]="SET",D[D.RESET=2]="RESET",D[D.PERMANENTLY_SET=3]="PERMANENTLY_SET",D[D.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(n={}));let l=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:h}=this._coreMouseService,f=this._coreService,{buffers:_,cols:m}=this._bufferService,{active:d,alt:S}=_,p=this._optionsService.rawOptions,y=(D,A)=>(f.triggerDataEvent(`${G.ESC}[${i?"":"?"}${D};${A}$y`),!0),w=D=>D?1:2,C=e.params[0];return i?C===2?y(C,4):C===4?y(C,w(f.modes.insertMode)):C===12?y(C,3):C===20?y(C,w(p.convertEol)):y(C,0):C===1?y(C,w(l.applicationCursorKeys)):C===3?y(C,p.windowOptions.setWinLines?m===80?2:m===132?1:0:0):C===6?y(C,w(l.origin)):C===7?y(C,w(l.wraparound)):C===8?y(C,3):C===9?y(C,w(o==="X10")):C===12?y(C,w(p.cursorBlink)):C===25?y(C,w(!f.isCursorHidden)):C===45?y(C,w(l.reverseWraparound)):C===66?y(C,w(l.applicationKeypad)):C===67?y(C,4):C===1e3?y(C,w(o==="VT200")):C===1002?y(C,w(o==="DRAG")):C===1003?y(C,w(o==="ANY")):C===1004?y(C,w(l.sendFocus)):C===1005?y(C,4):C===1006?y(C,w(h==="SGR")):C===1015?y(C,4):C===1016?y(C,w(h==="SGR_PIXELS")):C===1048?y(C,1):C===47||C===1047||C===1049?y(C,w(d===S)):C===2004?y(C,w(l.bracketedPasteMode)):C===2026?y(C,w(l.synchronizedOutput)):y(C,0)}_updateAttrColor(e,i,n,l,o){return i===2?(e|=50331648,e&=-16777216,e|=pl.fromColorRGB([n,l,o])):i===5&&(e&=-50331904,e|=33554432|n&255),e}_extractColor(e,i,n){let l=[0,0,-1,0,0,0],o=0,h=0;do{if(l[h+o]=e.params[i+h],e.hasSubParams(i+h)){let f=e.getSubParams(i+h),_=0;do l[1]===5&&(o=1),l[h+_+1+o]=f[_];while(++_<f.length&&_+h+1+o<l.length);break}if(l[1]===5&&h+o>=2||l[1]===2&&h+o>=5)break;l[1]&&(o=1)}while(++h+i<e.length&&h+o<l.length);for(let f=2;f<l.length;++f)l[f]===-1&&(l[f]=0);switch(l[0]){case 38:n.fg=this._updateAttrColor(n.fg,l[1],l[3],l[4],l[5]);break;case 48:n.bg=this._updateAttrColor(n.bg,l[1],l[3],l[4],l[5]);break;case 58:n.extended=n.extended.clone(),n.extended.underlineColor=this._updateAttrColor(n.extended.underlineColor,l[1],l[3],l[4],l[5])}return h}_processUnderline(e,i){i.extended=i.extended.clone(),(!~e||e>5)&&(e=1),i.extended.underlineStyle=e,i.fg|=268435456,e===0&&(i.fg&=-268435457),i.updateExtended()}_processSGR0(e){e.fg=lt.fg,e.bg=lt.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let i=e.length,n,l=this._curAttrData;for(let o=0;o<i;o++)n=e.params[o],n>=30&&n<=37?(l.fg&=-50331904,l.fg|=16777216|n-30):n>=40&&n<=47?(l.bg&=-50331904,l.bg|=16777216|n-40):n>=90&&n<=97?(l.fg&=-50331904,l.fg|=16777216|n-90|8):n>=100&&n<=107?(l.bg&=-50331904,l.bg|=16777216|n-100|8):n===0?this._processSGR0(l):n===1?l.fg|=134217728:n===3?l.bg|=67108864:n===4?(l.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,l)):n===5?l.fg|=536870912:n===7?l.fg|=67108864:n===8?l.fg|=1073741824:n===9?l.fg|=2147483648:n===2?l.bg|=134217728:n===21?this._processUnderline(2,l):n===22?(l.fg&=-134217729,l.bg&=-134217729):n===23?l.bg&=-67108865:n===24?(l.fg&=-268435457,this._processUnderline(0,l)):n===25?l.fg&=-536870913:n===27?l.fg&=-67108865:n===28?l.fg&=-1073741825:n===29?l.fg&=2147483647:n===39?(l.fg&=-67108864,l.fg|=lt.fg&16777215):n===49?(l.bg&=-67108864,l.bg|=lt.bg&16777215):n===38||n===48||n===58?o+=this._extractColor(e,o,l):n===53?l.bg|=1073741824:n===55?l.bg&=-1073741825:n===59?(l.extended=l.extended.clone(),l.extended.underlineColor=-1,l.updateExtended()):n===100?(l.fg&=-67108864,l.fg|=lt.fg&16777215,l.bg&=-67108864,l.bg|=lt.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",n);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${G.ESC}[0n`);break;case 6:let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${G.ESC}[${i};${n}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let i=this._activeBuffer.y+1,n=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${G.ESC}[?${i};${n}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=lt.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let i=e.length===0?1:e.params[0];if(i===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(i){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let n=i%2===1;this._coreService.decPrivateModes.cursorBlink=n}return!0}setScrollRegion(e){let i=e.params[0]||1,n;return(e.length<2||(n=e.params[1])>this._bufferService.rows||n===0)&&(n=this._bufferService.rows),n>i&&(this._activeBuffer.scrollTop=i-1,this._activeBuffer.scrollBottom=n-1,this._setCursor(0,0)),!0}windowOptions(e){if(!gv(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let i=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:i!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${G.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(i===0||i===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>mv&&this._windowTitleStack.shift()),(i===0||i===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>mv&&this._iconNameStack.shift());break;case 23:(i===0||i===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(i===0||i===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let i=[],n=e.split(";");for(;n.length>1;){let l=n.shift(),o=n.shift();if(/^\d+$/.exec(l)){let h=parseInt(l);if(Sv(h))if(o==="?")i.push({type:0,index:h});else{let f=_v(o);f&&i.push({type:1,index:h,color:f})}}}return i.length&&this._onColor.fire(i),!0}setHyperlink(e){let i=e.indexOf(";");if(i===-1)return!0;let n=e.slice(0,i).trim(),l=e.slice(i+1);return l?this._createHyperlink(n,l):n.trim()?!1:this._finishHyperlink()}_createHyperlink(e,i){this._getCurrentLinkId()&&this._finishHyperlink();let n=e.split(":"),l,o=n.findIndex(h=>h.startsWith("id="));return o!==-1&&(l=n[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:l,uri:i}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,i){let n=e.split(";");for(let l=0;l<n.length&&!(i>=this._specialColors.length);++l,++i)if(n[l]==="?")this._onColor.fire([{type:0,index:this._specialColors[i]}]);else{let o=_v(n[l]);o&&this._onColor.fire([{type:1,index:this._specialColors[i],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let i=[],n=e.split(";");for(let l=0;l<n.length;++l)if(/^\d+$/.exec(n[l])){let o=parseInt(n[l]);Sv(o)&&i.push({type:2,index:o})}return i.length&&this._onColor.fire(i),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,sr),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(f2[e[0]],ft[e[1]]||sr),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=lt.clone(),this._eraseAttrDataInternal=lt.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new _i;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let i=0;i<this._bufferService.rows;++i){let n=this._activeBuffer.ybase+this._activeBuffer.y+i,l=this._activeBuffer.lines.get(n);l&&(l.fill(e),l.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,i){let n=f=>(this._coreService.triggerDataEvent(`${G.ESC}${f}${G.ESC}\\`),!0),l=this._bufferService.buffer,o=this._optionsService.rawOptions;return n(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${l.scrollTop+1};${l.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,i){this._dirtyRowTracker.markRangeDirty(e,i)}},Pu=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,i){e>i&&(pv=e,e=i,i=pv),e<this.start&&(this.start=e),i>this.end&&(this.end=i)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};Pu=Qe([se(0,At)],Pu);function Sv(e){return 0<=e&&e<256}var _2=5e7,yv=12,m2=50,g2=class extends ye{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new J),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,i){if(i!==void 0&&this._syncCalls>i){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let n;for(;n=this._writeBuffer.shift();){this._action(n);let l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,i){if(this._pendingData>_2)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(i)}_innerWrite(e=0,i=!0){let n=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let l=this._writeBuffer[this._bufferOffset],o=this._action(l,i);if(o){let f=_=>performance.now()-n>=yv?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(n,_);o.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(f);return}let h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=l.length,performance.now()-n>=yv)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>m2&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},Wu=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let i=this._bufferService.buffer;if(e.id===void 0){let _=i.addMarker(i.ybase+i.y),m={data:e,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._dataByLinkId.set(m.id,m),m.id}let n=e,l=this._getEntryIdKey(n),o=this._entriesWithId.get(l);if(o)return this.addLineToLink(o.id,i.ybase+i.y),o.id;let h=i.addMarker(i.ybase+i.y),f={id:this._nextId++,key:this._getEntryIdKey(n),data:n,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(f,h)),this._entriesWithId.set(f.key,f),this._dataByLinkId.set(f.id,f),f.id}addLineToLink(e,i){let n=this._dataByLinkId.get(e);if(n&&n.lines.every(l=>l.line!==i)){let l=this._bufferService.buffer.addMarker(i);n.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(n,l))}}getLinkData(e){var i;return(i=this._dataByLinkId.get(e))==null?void 0:i.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,i){let n=e.lines.indexOf(i);n!==-1&&(e.lines.splice(n,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};Wu=Qe([se(0,At)],Wu);var bv=!1,v2=class extends ye{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Zr),this._onBinary=this._register(new J),this.onBinary=this._onBinary.event,this._onData=this._register(new J),this.onData=this._onData.event,this._onLineFeed=this._register(new J),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new J),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new J),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new J),this._instantiationService=new Pw,this.optionsService=this._register(new Zw(e)),this._instantiationService.setService(Bt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(Hu)),this._instantiationService.setService(At,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(Nu)),this._instantiationService.setService(op,this._logService),this.coreService=this._register(this._instantiationService.createInstance(Uu)),this._instantiationService.setService(or,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(qu)),this._instantiationService.setService(ap,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(rr)),this._instantiationService.setService(H1,this.unicodeService),this._charsetService=this._instantiationService.createInstance(i2),this._instantiationService.setService(N1,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(Wu),this._instantiationService.setService(cp,this._oscLinkService),this._inputHandler=this._register(new d2(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Tt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Tt.forward(this._bufferService.onResize,this._onResize)),this._register(Tt.forward(this.coreService.onData,this._onData)),this._register(Tt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new g2((i,n)=>this._inputHandler.parse(i,n))),this._register(Tt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new J),this._onScroll.event(e=>{var i;(i=this._onScrollApi)==null||i.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let i in e)this.optionsService.options[i]=e[i]}write(e,i){this._writeBuffer.write(e,i)}writeSync(e,i){this._logService.logLevel<=3&&!bv&&(this._logService.warn("writeSync is unreliable and will be removed soon."),bv=!0),this._writeBuffer.writeSync(e,i)}input(e,i=!0){this.coreService.triggerDataEvent(e,i)}resize(e,i){isNaN(e)||isNaN(i)||(e=Math.max(e,Pp),i=Math.max(i,Wp),this._bufferService.resize(e,i))}scroll(e,i=!1){this._bufferService.scroll(e,i)}scrollLines(e,i){this._bufferService.scrollLines(e,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}registerEscHandler(e,i){return this._inputHandler.registerEscHandler(e,i)}registerDcsHandler(e,i){return this._inputHandler.registerDcsHandler(e,i)}registerCsiHandler(e,i){return this._inputHandler.registerCsiHandler(e,i)}registerOscHandler(e,i){return this._inputHandler.registerOscHandler(e,i)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,i=this.optionsService.rawOptions.windowsPty;i&&i.buildNumber!==void 0&&i.buildNumber!==void 0?e=i.backend==="conpty"&&i.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(fv.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(fv(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ve(()=>{for(let i of e)i.dispose()})}}},p2={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function S2(e,i,n,l){var f;let o={type:0,cancel:!1,key:void 0},h=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?i?o.key=G.ESC+"OA":o.key=G.ESC+"[A":e.key==="UIKeyInputLeftArrow"?i?o.key=G.ESC+"OD":o.key=G.ESC+"[D":e.key==="UIKeyInputRightArrow"?i?o.key=G.ESC+"OC":o.key=G.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(i?o.key=G.ESC+"OB":o.key=G.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":G.DEL,e.altKey&&(o.key=G.ESC+o.key);break;case 9:if(e.shiftKey){o.key=G.ESC+"[Z";break}o.key=G.HT,o.cancel=!0;break;case 13:o.key=e.altKey?G.ESC+G.CR:G.CR,o.cancel=!0;break;case 27:o.key=G.ESC,e.altKey&&(o.key=G.ESC+G.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;h?o.key=G.ESC+"[1;"+(h+1)+"D":i?o.key=G.ESC+"OD":o.key=G.ESC+"[D";break;case 39:if(e.metaKey)break;h?o.key=G.ESC+"[1;"+(h+1)+"C":i?o.key=G.ESC+"OC":o.key=G.ESC+"[C";break;case 38:if(e.metaKey)break;h?o.key=G.ESC+"[1;"+(h+1)+"A":i?o.key=G.ESC+"OA":o.key=G.ESC+"[A";break;case 40:if(e.metaKey)break;h?o.key=G.ESC+"[1;"+(h+1)+"B":i?o.key=G.ESC+"OB":o.key=G.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=G.ESC+"[2~");break;case 46:h?o.key=G.ESC+"[3;"+(h+1)+"~":o.key=G.ESC+"[3~";break;case 36:h?o.key=G.ESC+"[1;"+(h+1)+"H":i?o.key=G.ESC+"OH":o.key=G.ESC+"[H";break;case 35:h?o.key=G.ESC+"[1;"+(h+1)+"F":i?o.key=G.ESC+"OF":o.key=G.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=G.ESC+"[5;"+(h+1)+"~":o.key=G.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=G.ESC+"[6;"+(h+1)+"~":o.key=G.ESC+"[6~";break;case 112:h?o.key=G.ESC+"[1;"+(h+1)+"P":o.key=G.ESC+"OP";break;case 113:h?o.key=G.ESC+"[1;"+(h+1)+"Q":o.key=G.ESC+"OQ";break;case 114:h?o.key=G.ESC+"[1;"+(h+1)+"R":o.key=G.ESC+"OR";break;case 115:h?o.key=G.ESC+"[1;"+(h+1)+"S":o.key=G.ESC+"OS";break;case 116:h?o.key=G.ESC+"[15;"+(h+1)+"~":o.key=G.ESC+"[15~";break;case 117:h?o.key=G.ESC+"[17;"+(h+1)+"~":o.key=G.ESC+"[17~";break;case 118:h?o.key=G.ESC+"[18;"+(h+1)+"~":o.key=G.ESC+"[18~";break;case 119:h?o.key=G.ESC+"[19;"+(h+1)+"~":o.key=G.ESC+"[19~";break;case 120:h?o.key=G.ESC+"[20;"+(h+1)+"~":o.key=G.ESC+"[20~";break;case 121:h?o.key=G.ESC+"[21;"+(h+1)+"~":o.key=G.ESC+"[21~";break;case 122:h?o.key=G.ESC+"[23;"+(h+1)+"~":o.key=G.ESC+"[23~";break;case 123:h?o.key=G.ESC+"[24;"+(h+1)+"~":o.key=G.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=G.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=G.DEL:e.keyCode===219?o.key=G.ESC:e.keyCode===220?o.key=G.FS:e.keyCode===221&&(o.key=G.GS);else if((!n||l)&&e.altKey&&!e.metaKey){let _=(f=p2[e.keyCode])==null?void 0:f[e.shiftKey?1:0];if(_)o.key=G.ESC+_;else if(e.keyCode>=65&&e.keyCode<=90){let m=e.ctrlKey?e.keyCode-64:e.keyCode+32,d=String.fromCharCode(m);e.shiftKey&&(d=d.toUpperCase()),o.key=G.ESC+d}else if(e.keyCode===32)o.key=G.ESC+(e.ctrlKey?G.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let m=e.code.slice(3,4);e.shiftKey||(m=m.toLowerCase()),o.key=G.ESC+m,o.cancel=!0}}else n&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=G.US),e.key==="@"&&(o.key=G.NUL));break}return o}var tt=0,y2=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new ao,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new ao,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,h)=>this._getKey(o)-this._getKey(h)),i=0,n=0,l=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<l.length;o++)n>=this._array.length||this._getKey(e[i])<=this._getKey(this._array[n])?(l[o]=e[i],i++):l[o]=this._array[n++];this._array=l,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let i=this._getKey(e);if(i===void 0||(tt=this._search(i),tt===-1)||this._getKey(this._array[tt])!==i)return!1;do if(this._array[tt]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(tt),!0;while(++tt<this._array.length&&this._getKey(this._array[tt])===i);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,h)=>o-h),i=0,n=new Array(this._array.length-e.length),l=0;for(let o=0;o<this._array.length;o++)e[i]===o?i++:n[l++]=this._array[o];this._array=n,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(tt=this._search(e),!(tt<0||tt>=this._array.length)&&this._getKey(this._array[tt])===e))do yield this._array[tt];while(++tt<this._array.length&&this._getKey(this._array[tt])===e)}forEachByKey(e,i){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(tt=this._search(e),!(tt<0||tt>=this._array.length)&&this._getKey(this._array[tt])===e))do i(this._array[tt]);while(++tt<this._array.length&&this._getKey(this._array[tt])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let i=0,n=this._array.length-1;for(;n>=i;){let l=i+n>>1,o=this._getKey(this._array[l]);if(o>e)n=l-1;else if(o<e)i=l+1;else{for(;l>0&&this._getKey(this._array[l-1])===e;)l--;return l}}return i}},su=0,Cv=0,b2=class extends ye{constructor(){super(),this._decorations=new y2(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new J),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new J),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ve(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let i=new C2(e);if(i){let n=i.marker.onDispose(()=>i.dispose()),l=i.onDispose(()=>{l.dispose(),i&&(this._decorations.delete(i)&&this._onDecorationRemoved.fire(i),n.dispose())});this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,i,n){let l=0,o=0;for(let h of this._decorations.getKeyIterator(i))l=h.options.x??0,o=l+(h.options.width??1),e>=l&&e<o&&(!n||(h.options.layer??"bottom")===n)&&(yield h)}forEachDecorationAtCell(e,i,n,l){this._decorations.forEachByKey(i,o=>{su=o.options.x??0,Cv=su+(o.options.width??1),e>=su&&e<Cv&&(!n||(o.options.layer??"bottom")===n)&&l(o)})}},C2=class extends Ls{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new J),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new J),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Xe.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Xe.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},w2=1e3,E2=class{constructor(e,i=w2){this._renderCallback=e,this._debounceThresholdMS=i,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,i,n){this._rowCount=n,e=e!==void 0?e:0,i=i!==void 0?i:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,i):i;let l=performance.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=l-this._lastRefreshMs,h=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),i=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,i)}},wv=20,oo=class extends ye{constructor(e,i,n,l){super(),this._terminal=e,this._coreBrowserService=n,this._renderService=l,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let h=0;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);if(this._topBoundaryFocusListener=h=>this._handleBoundaryFocus(h,0),this._bottomBoundaryFocusListener=h=>this._handleBoundaryFocus(h,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new E2(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(h=>this._handleResize(h.rows))),this._register(this._terminal.onRender(h=>this._refreshRows(h.start,h.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(h=>this._handleChar(h))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(h=>this._handleTab(h))),this._register(this._terminal.onKey(h=>this._handleKey(h.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(_e(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ve(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let i=0;i<e;i++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<wv+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===wv+1&&(this._liveRegion.textContent+=ou.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,i){this._liveRegionDebouncer.refresh(e,i,this._terminal.rows)}_renderRows(e,i){let n=this._terminal.buffer,l=n.lines.length.toString();for(let o=e;o<=i;o++){let h=n.lines.get(n.ydisp+o),f=[],_=(h==null?void 0:h.translateToString(!0,void 0,void 0,f))||"",m=(n.ydisp+o+1).toString(),d=this._rowElements[o];d&&(_.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=_,this._rowColumns.set(d,f)),d.setAttribute("aria-posinset",m),d.setAttribute("aria-setsize",l),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,i){let n=e.target,l=this._rowElements[i===0?1:this._rowElements.length-2],o=n.getAttribute("aria-posinset"),h=i===0?"1":`${this._terminal.buffer.lines.length}`;if(o===h||e.relatedTarget!==l)return;let f,_;if(i===0?(f=n,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(f=this._rowElements.shift(),_=n,this._rowContainer.removeChild(f)),f.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),i===0){let m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else{let m=this._createAccessibilityTreeNode();this._rowElements.push(m),this._rowContainer.appendChild(m)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(i===0?-1:1),this._rowElements[i===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var _;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let i={node:e.anchorNode,offset:e.anchorOffset},n={node:e.focusNode,offset:e.focusOffset};if((i.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||i.node===n.node&&i.offset>n.offset)&&([i,n]=[n,i]),i.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(i={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(i.node))return;let l=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(l)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:l,offset:((_=l.textContent)==null?void 0:_.length)??0}),!this._rowContainer.contains(n.node))return;let o=({node:m,offset:d})=>{let S=m instanceof Text?m.parentNode:m,p=parseInt(S==null?void 0:S.getAttribute("aria-posinset"),10)-1;if(isNaN(p))return console.warn("row is invalid. Race condition?"),null;let y=this._rowColumns.get(S);if(!y)return console.warn("columns is null. Race condition?"),null;let w=d<y.length?y[d]:y.slice(-1)[0]+1;return w>=this._terminal.cols&&(++p,w=0),{row:p,column:w}},h=o(i),f=o(n);if(!(!h||!f)){if(h.row>f.row||h.row===f.row&&h.column>=f.column)throw new Error("invalid range");this._terminal.select(h.column,h.row,(f.row-h.row)*this._terminal.cols-h.column+f.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let i=this._rowContainer.children.length;i<this._terminal.rows;i++)this._rowElements[i]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[i]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var o,h;e.style.transform="";let i=e.getBoundingClientRect().width,n=(h=(o=this._rowColumns.get(e))==null?void 0:o.slice(-1))==null?void 0:h[0];if(!n)return;let l=n*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${l/i})`}};oo=Qe([se(1,ef),se(2,is),se(3,ss)],oo);var Yu=class extends ye{constructor(e,i,n,l,o){super(),this._element=e,this._mouseService=i,this._renderService=n,this._bufferService=l,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new J),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new J),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ve(()=>{var h;lr(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(h=this._activeProviderReplies)==null||h.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(_e(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(_e(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(_e(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(_e(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let n=e.composedPath();for(let l=0;l<n.length;l++){let o=n[l];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||i.x!==this._lastBufferCell.x||i.y!==this._lastBufferCell.y)&&(this._handleHover(i),this._lastBufferCell=i)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,i){var l,o;(!this._activeProviderReplies||!i)&&((l=this._activeProviderReplies)==null||l.forEach(h=>{h==null||h.forEach(f=>{f.link.dispose&&f.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let n=!1;for(let[h,f]of this._linkProviderService.linkProviders.entries())i?(o=this._activeProviderReplies)!=null&&o.get(h)&&(n=this._checkLinkProviderResult(h,e,n)):f.provideLinks(e.y,_=>{var d,S;if(this._isMouseOut)return;let m=_==null?void 0:_.map(p=>({link:p}));(d=this._activeProviderReplies)==null||d.set(h,m),n=this._checkLinkProviderResult(h,e,n),((S=this._activeProviderReplies)==null?void 0:S.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,i){let n=new Set;for(let l=0;l<i.size;l++){let o=i.get(l);if(o)for(let h=0;h<o.length;h++){let f=o[h],_=f.link.range.start.y<e?0:f.link.range.start.x,m=f.link.range.end.y>e?this._bufferService.cols:f.link.range.end.x;for(let d=_;d<=m;d++){if(n.has(d)){o.splice(h--,1);break}n.add(d)}}}}_checkLinkProviderResult(e,i,n){var h;if(!this._activeProviderReplies)return n;let l=this._activeProviderReplies.get(e),o=!1;for(let f=0;f<e;f++)(!this._activeProviderReplies.has(f)||this._activeProviderReplies.get(f))&&(o=!0);if(!o&&l){let f=l.find(_=>this._linkAtPosition(_.link,i));f&&(n=!0,this._handleNewLink(f))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!n)for(let f=0;f<this._activeProviderReplies.size;f++){let _=(h=this._activeProviderReplies.get(f))==null?void 0:h.find(m=>this._linkAtPosition(m.link,i));if(_){n=!0,this._handleNewLink(_);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let i=this._positionFromMouseEvent(e,this._element,this._mouseService);i&&this._mouseDownLink&&x2(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,i){!this._currentLink||!this._lastMouseEvent||(!e||!i||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,lr(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(e.link,i)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var n,l;return(l=(n=this._currentLink)==null?void 0:n.state)==null?void 0:l.decorations.pointerCursor},set:n=>{var l;(l=this._currentLink)!=null&&l.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",n))}},underline:{get:()=>{var n,l;return(l=(n=this._currentLink)==null?void 0:n.state)==null?void 0:l.decorations.underline},set:n=>{var l,o,h;(l=this._currentLink)!=null&&l.state&&((h=(o=this._currentLink)==null?void 0:o.state)==null?void 0:h.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,n))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;let l=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(l,o),this._lastMouseEvent)){let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._askForLink(h,!1)}})))}_linkHover(e,i,n){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(n,i.text)}_fireUnderlineEvent(e,i){let n=e.range,l=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-l-1,n.end.x,n.end.y-l-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,i,n){var l;(l=this._currentLink)!=null&&l.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(n,i.text)}_linkAtPosition(e,i){let n=e.range.start.y*this._bufferService.cols+e.range.start.x,l=e.range.end.y*this._bufferService.cols+e.range.end.x,o=i.y*this._bufferService.cols+i.x;return n<=o&&o<=l}_positionFromMouseEvent(e,i,n){let l=n.getCoords(e,i,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,i,n,l,o){return{x1:e,y1:i,x2:n,y2:l,cols:this._bufferService.cols,fg:o}}};Yu=Qe([se(1,tf),se(2,ss),se(3,At),se(4,up)],Yu);function x2(e,i){return e.text===i.text&&e.range.start.x===i.range.start.x&&e.range.start.y===i.range.start.y&&e.range.end.x===i.range.end.x&&e.range.end.y===i.range.end.y}var T2=class extends v2{constructor(e={}){super(e),this._linkifier=this._register(new Zr),this.browser=kp,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Zr),this._onCursorMove=this._register(new J),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new J),this.onKey=this._onKey.event,this._onRender=this._register(new J),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new J),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new J),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new J),this.onBell=this._onBell.event,this._onFocus=this._register(new J),this._onBlur=this._register(new J),this._onA11yCharEmitter=this._register(new J),this._onA11yTabEmitter=this._register(new J),this._onWillOpen=this._register(new J),this._setup(),this._decorationService=this._instantiationService.createInstance(b2),this._instantiationService.setService(Sl,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(mw),this._instantiationService.setService(up,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(hu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(i=>this.refresh((i==null?void 0:i.start)??0,(i==null?void 0:i.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(i=>this._reportWindowsOptions(i))),this._register(this._inputHandler.onColor(i=>this._handleColorEvent(i))),this._register(Tt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Tt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Tt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Tt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(i=>this._afterResize(i.cols,i.rows))),this._register(Ve(()=>{var i,n;this._customKeyEventHandler=void 0,(n=(i=this.element)==null?void 0:i.parentNode)==null||n.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let i of e){let n,l="";switch(i.index){case 256:n="foreground",l="10";break;case 257:n="background",l="11";break;case 258:n="cursor",l="12";break;default:n="ansi",l="4;"+i.index}switch(i.type){case 0:let o=We.toColorRGB(n==="ansi"?this._themeService.colors.ansi[i.index]:this._themeService.colors[n]);this.coreService.triggerDataEvent(`${G.ESC}]${l};${u2(o)}${Dp.ST}`);break;case 1:if(n==="ansi")this._themeService.modifyColors(h=>h.ansi[i.index]=at.toColor(...i.color));else{let h=n;this._themeService.modifyColors(f=>f[h]=at.toColor(...i.color))}break;case 2:this._themeService.restoreColor(i.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(oo,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(G.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(G.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,i=this.buffer.lines.get(e);if(!i)return;let n=Math.min(this.buffer.x,this.cols-1),l=this._renderService.dimensions.css.cell.height,o=i.getWidth(n),h=this._renderService.dimensions.css.cell.width*o,f=this.buffer.y*this._renderService.dimensions.css.cell.height,_=n*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_+"px",this.textarea.style.top=f+"px",this.textarea.style.width=h+"px",this.textarea.style.height=l+"px",this.textarea.style.lineHeight=l+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(_e(this.element,"copy",i=>{this.hasSelection()&&k1(i,this._selectionService)}));let e=i=>A1(i,this.textarea,this.coreService,this.optionsService);this._register(_e(this.textarea,"paste",e)),this._register(_e(this.element,"paste",e)),Ap?this._register(_e(this.element,"mousedown",i=>{i.button===2&&Og(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(_e(this.element,"contextmenu",i=>{Og(i,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),hf&&this._register(_e(this.element,"auxclick",i=>{i.button===1&&ip(i,this.textarea,this.screenElement)}))}_bindKeys(){this._register(_e(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(_e(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(_e(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(_e(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(_e(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(_e(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(_e(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var o;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((o=this.element)==null?void 0:o.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let i=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(_e(this.screenElement,"mousemove",h=>this.updateCursorStyle(h))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement);let n=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",au.get()),Lp||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>n.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(dw,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(is,this._coreBrowserService),this._register(_e(this.textarea,"focus",h=>this._handleTextAreaFocus(h))),this._register(_e(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Au,this._document,this._helperContainer),this._instantiationService.setService(mo,this._charSizeService),this._themeService=this._instantiationService.createInstance(zu),this._instantiationService.setService(tn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(no),this._instantiationService.setService(hp,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Ou,this.rows,this.screenElement)),this._instantiationService.setService(ss,this._renderService),this._register(this._renderService.onRenderedViewportChange(h=>this._onRender.fire(h))),this.onResize(h=>this._renderService.resize(h.cols,h.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Du,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Bu),this._instantiationService.setService(tf,this._mouseService);let l=this._linkifier.value=this._register(this._instantiationService.createInstance(Yu,this.screenElement));this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Tu,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(h=>{super.scrollLines(h,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(Lu,this.element,this.screenElement,l)),this._instantiationService.setService(q1,this._selectionService),this._register(this._selectionService.onRequestScrollLines(h=>this.scrollLines(h.amount,h.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(h=>this._renderService.handleSelectionChanged(h.start,h.end,h.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(h=>{this.textarea.value=h,this.textarea.focus(),this.textarea.select()})),this._register(Tt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var h;this._selectionService.refresh(),(h=this._viewport)==null||h.queueSync()})),this._register(this._instantiationService.createInstance(Ru,this.screenElement)),this._register(_e(this.element,"mousedown",h=>this._selectionService.handleMouseDown(h))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(oo,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",h=>this._handleScreenReaderModeOptionChange(h))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(ro,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",h=>{!this._overviewRulerRenderer&&h&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(ro,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(ku,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,i=this.element;function n(h){var d,S,p,y,w;let f=e._mouseService.getMouseReportCoords(h,e.screenElement);if(!f)return!1;let _,m;switch(h.overrideType||h.type){case"mousemove":m=32,h.buttons===void 0?(_=3,h.button!==void 0&&(_=h.button<3?h.button:3)):_=h.buttons&1?0:h.buttons&4?1:h.buttons&2?2:3;break;case"mouseup":m=0,_=h.button<3?h.button:3;break;case"mousedown":m=1,_=h.button<3?h.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(h)===!1)return!1;let C=h.deltaY;if(C===0||e.coreMouseService.consumeWheelEvent(h,(y=(p=(S=(d=e._renderService)==null?void 0:d.dimensions)==null?void 0:S.device)==null?void 0:p.cell)==null?void 0:y.height,(w=e._coreBrowserService)==null?void 0:w.dpr)===0)return!1;m=C<0?0:1,_=4;break;default:return!1}return m===void 0||_===void 0||_>4?!1:e.coreMouseService.triggerMouseEvent({col:f.col,row:f.row,x:f.x,y:f.y,button:_,action:m,ctrl:h.ctrlKey,alt:h.altKey,shift:h.shiftKey})}let l={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:h=>(n(h),h.buttons||(this._document.removeEventListener("mouseup",l.mouseup),l.mousedrag&&this._document.removeEventListener("mousemove",l.mousedrag)),this.cancel(h)),wheel:h=>(n(h),this.cancel(h,!0)),mousedrag:h=>{h.buttons&&n(h)},mousemove:h=>{h.buttons||n(h)}};this._register(this.coreMouseService.onProtocolChange(h=>{h?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(h)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),h&8?l.mousemove||(i.addEventListener("mousemove",o.mousemove),l.mousemove=o.mousemove):(i.removeEventListener("mousemove",l.mousemove),l.mousemove=null),h&16?l.wheel||(i.addEventListener("wheel",o.wheel,{passive:!1}),l.wheel=o.wheel):(i.removeEventListener("wheel",l.wheel),l.wheel=null),h&2?l.mouseup||(l.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",l.mouseup),l.mouseup=null),h&4?l.mousedrag||(l.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",l.mousedrag),l.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(_e(i,"mousedown",h=>{if(h.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(h)))return n(h),l.mouseup&&this._document.addEventListener("mouseup",l.mouseup),l.mousedrag&&this._document.addEventListener("mousemove",l.mousedrag),this.cancel(h)})),this._register(_e(i,"wheel",h=>{var f,_,m,d,S;if(!l.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(h)===!1)return!1;if(!this.buffer.hasScrollback){if(h.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(h,(d=(m=(_=(f=e._renderService)==null?void 0:f.dimensions)==null?void 0:_.device)==null?void 0:m.cell)==null?void 0:d.height,(S=e._coreBrowserService)==null?void 0:S.dpr)===0)return this.cancel(h,!0);let p=G.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(h.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(p,!0),this.cancel(h,!0)}}},{passive:!1}))}refresh(e,i){var n;(n=this._renderService)==null||n.refreshRows(e,i)}updateCursorStyle(e){var i;(i=this._selectionService)!=null&&i.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,i){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,i),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let i=e-this._bufferService.buffer.ydisp;i!==0&&this.scrollLines(i)}paste(e){tp(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let i=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),i}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,i,n){this._selectionService.setSelection(e,i,n)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,i){var n;(n=this._selectionService)==null||n.selectLines(e,i)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let i=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!i&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!i&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let n=S2(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),n.type===3||n.type===2){let l=this.rows-1;return this.scrollLines(n.type===2?-l:l),this.cancel(e,!0)}if(n.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(n.cancel&&this.cancel(e,!0),!n.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((n.key===G.ETX||n.key===G.CR)&&(this.textarea.value=""),this._onKey.fire({key:n.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(n.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,i){let n=e.isMac&&!this.options.macOptionIsMeta&&i.altKey&&!i.ctrlKey&&!i.metaKey||e.isWindows&&i.altKey&&i.ctrlKey&&!i.metaKey||e.isWindows&&i.getModifierState("AltGraph");return i.type==="keypress"?n:n&&(!i.keyCode||i.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(R2(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let i;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)i=e.charCode;else if(e.which===null||e.which===void 0)i=e.keyCode;else if(e.which!==0&&e.charCode!==0)i=e.which;else return!1;return!i||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(i=String.fromCharCode(i),this._onKey.fire({key:i,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let i=e.data;return this.coreService.triggerDataEvent(i,!0),this.cancel(e),!0}return!1}resize(e,i){if(e===this.cols&&i===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,i)}_afterResize(e,i){var n;(n=this._charSizeService)==null||n.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(lt));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var i;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(i=this._selectionService)==null||i.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(G.ESC+"[I"):this.coreService.triggerDataEvent(G.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let i=this._renderService.dimensions.css.canvas.width.toFixed(0),n=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${G.ESC}[4;${n};${i}t`);break;case 1:let l=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${G.ESC}[6;${o};${l}t`);break}}cancel(e,i){if(!(!this.options.cancelEvents&&!i))return e.preventDefault(),e.stopPropagation(),!1}};function R2(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var D2=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,i){let n={instance:i,dispose:i.dispose,isDisposed:!1};this._addons.push(n),i.dispose=()=>this._wrappedAddonDispose(n),i.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let i=-1;for(let n=0;n<this._addons.length;n++)if(this._addons[n]===e){i=n;break}if(i===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(i,1)}},M2=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,i){if(!(e<0||e>=this._line.length))return i?(this._line.loadCell(e,i),i):this._line.loadCell(e,new _i)}translateToString(e,i,n){return this._line.translateToString(e,i,n)}},Ev=class{constructor(e,i){this._buffer=e,this.type=i}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let i=this._buffer.lines.get(e);if(i)return new M2(i)}getNullCell(){return new _i}},k2=class extends ye{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new J),this.onBufferChange=this._onBufferChange.event,this._normal=new Ev(this._core.buffers.normal,"normal"),this._alternate=new Ev(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},A2=class{constructor(e){this._core=e}registerCsiHandler(e,i){return this._core.registerCsiHandler(e,n=>i(n.toArray()))}addCsiHandler(e,i){return this.registerCsiHandler(e,i)}registerDcsHandler(e,i){return this._core.registerDcsHandler(e,(n,l)=>i(n,l.toArray()))}addDcsHandler(e,i){return this.registerDcsHandler(e,i)}registerEscHandler(e,i){return this._core.registerEscHandler(e,i)}addEscHandler(e,i){return this.registerEscHandler(e,i)}registerOscHandler(e,i){return this._core.registerOscHandler(e,i)}addOscHandler(e,i){return this.registerOscHandler(e,i)}},B2=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},O2=["cols","rows"],Di=0,L2=class extends ye{constructor(e){super(),this._core=this._register(new T2(e)),this._addonManager=this._register(new D2),this._publicOptions={...this._core.options};let i=l=>this._core.options[l],n=(l,o)=>{this._checkReadonlyOptions(l),this._core.options[l]=o};for(let l in this._core.options){let o={get:i.bind(this,l),set:n.bind(this,l)};Object.defineProperty(this._publicOptions,l,o)}}_checkReadonlyOptions(e){if(O2.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new A2(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new B2(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new k2(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let i in e)this._publicOptions[i]=e[i]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,i=!0){this._core.input(e,i)}resize(e,i){this._verifyIntegers(e,i),this._core.resize(e,i)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,i,n){this._verifyIntegers(e,i,n),this._core.select(e,i,n)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,i){this._verifyIntegers(e,i),this._core.selectLines(e,i)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,i){this._core.write(e,i)}writeln(e,i){this._core.write(e),this._core.write(`\r
`,i)}paste(e){this._core.paste(e)}refresh(e,i){this._verifyIntegers(e,i),this._core.refresh(e,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return au.get()},set promptLabel(e){au.set(e)},get tooMuchOutput(){return ou.get()},set tooMuchOutput(e){ou.set(e)}}}_verifyIntegers(...e){for(Di of e)if(Di===1/0||isNaN(Di)||Di%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Di of e)if(Di&&(Di===1/0||isNaN(Di)||Di%1!==0||Di<0))throw new Error("This API only accepts positive integers")}};function z2({sessionId:e,options:i={},onInput:n,onBinaryInput:l,onTerminalResize:o}){const h=T.useRef(null),f=T.useRef(null),_=T.useRef(null),m=T.useRef(null),d=T.useRef(null),S=T.useRef(void 0),p=T.useRef(!1),{registerTerminal:y,unregisterTerminal:w}=fo(),C=T.useRef(n),D=T.useRef(l),A=T.useRef(o);return C.current=n,D.current=l,A.current=o,T.useEffect(()=>{const B=h.current;if(!B)return;const j=new L2({...i,allowProposedApi:!0});f.current=j,j.open(B),y(e,j);const R=j.onData(F=>{var H;return(H=C.current)==null?void 0:H.call(C,F)}),q=j.onBinary(F=>{var H;return(H=D.current)==null?void 0:H.call(D,F)}),Z=j.onResize(F=>{var H;console.log(`[Terminal] onResize event: cols=${F.cols}, rows=${F.rows}, minCols=${Rg}, minRows=${Dg}`),F.cols>=Rg&&F.rows>=Dg&&(console.log("[Terminal] onResize: calling callback"),(H=A.current)==null||H.call(A,F.cols,F.rows))});return(async()=>{try{const{WebglAddon:H}=await Fr(async()=>{const{WebglAddon:fe}=await import("./addon-webgl-BrQ0bpT6.js");return{WebglAddon:fe}},[]),le=new H;le.onContextLoss(()=>{console.warn("[Terminal] WebGL context lost, falling back to DOM renderer"),le.dispose(),m.current=null}),j.loadAddon(le),m.current=le}catch{console.warn("[Terminal] WebGL not available, using DOM renderer")}try{const{FitAddon:H}=await Fr(async()=>{const{FitAddon:fe}=await import("./addon-fit-YJmn1quW.js");return{FitAddon:fe}},[]),le=new H;j.loadAddon(le),_.current=le,p.current=!0}catch(H){console.error("[Terminal] Failed to load FitAddon:",H)}try{const{ClipboardAddon:H}=await Fr(async()=>{const{ClipboardAddon:le}=await import("./addon-clipboard-Ckztrdv4.js");return{ClipboardAddon:le}},[]);j.loadAddon(new H)}catch(H){console.warn("[Terminal] ClipboardAddon not available:",H)}try{const{ImageAddon:H}=await Fr(async()=>{const{ImageAddon:le}=await import("./addon-image-CS_J1_HZ.js");return{ImageAddon:le}},[]);j.loadAddon(new H)}catch(H){console.warn("[Terminal] ImageAddon not available:",H)}try{const{WebLinksAddon:H}=await Fr(async()=>{const{WebLinksAddon:le}=await import("./addon-web-links-BWjmmSgS.js");return{WebLinksAddon:le}},[]);j.loadAddon(new H)}catch(H){console.warn("[Terminal] WebLinksAddon not available:",H)}try{const{Unicode11Addon:H}=await Fr(async()=>{const{Unicode11Addon:le}=await import("./addon-unicode11-CU4jat_f.js");return{Unicode11Addon:le}},[]);j.loadAddon(new H),j.unicode.activeVersion="11"}catch(H){console.warn("[Terminal] Unicode11Addon not available:",H)}const F=_.current;if(B&&F){d.current=new ResizeObserver(()=>{clearTimeout(S.current),S.current=setTimeout(()=>{B.clientWidth>0&&B.clientHeight>0&&_.current&&_.current.fit()},m1)}),d.current.observe(B);const H=le=>{const fe=B.clientWidth,Re=B.clientHeight;console.log(`[Terminal] doFit(${le}): container=${fe}x${Re}, fitAddon=${!!_.current}, rows=${j.rows}, cols=${j.cols}`),_.current&&fe>0&&Re>0&&(_.current.fit(),j.refresh(0,j.rows-1),j.scrollToBottom(),j.focus(),console.log(`[Terminal] doFit(${le}): after fit rows=${j.rows}, cols=${j.cols}`))};requestAnimationFrame(()=>H("raf")),setTimeout(()=>H("50ms"),50),setTimeout(()=>H("150ms"),150),setTimeout(()=>H("300ms"),300),setTimeout(()=>H("600ms"),600),setTimeout(()=>H("1000ms"),1e3)}})(),()=>{var F;clearTimeout(S.current),(F=d.current)==null||F.disconnect(),d.current=null,m.current=null,_.current=null,R.dispose(),q.dispose(),Z.dispose(),w(e),j.dispose(),f.current=null}},[]),T.useEffect(()=>{var j,R;const B=f.current;console.log("[Terminal] options effect, term exists:",!!B,"theme:",(j=i.theme)==null?void 0:j.background),B&&(i.theme&&(B.options.theme=i.theme),i.fontFamily!==void 0&&(B.options.fontFamily=i.fontFamily),i.fontSize!==void 0&&(B.options.fontSize=i.fontSize),i.cursorStyle!==void 0&&(B.options.cursorStyle=i.cursorStyle),i.cursorBlink!==void 0&&(B.options.cursorBlink=i.cursorBlink),i.scrollback!==void 0&&(B.options.scrollback=i.scrollback),B.rows>0&&B.refresh(0,B.rows-1),console.log("[Terminal] Applied options, theme bg:",(R=B.options.theme)==null?void 0:R.background),requestAnimationFrame(()=>{var q;(q=_.current)==null||q.fit()}))},[i]),T.useEffect(()=>{const B=setTimeout(()=>{var R;const j=f.current;j&&(console.log("[Terminal] Delayed re-apply, theme bg:",(R=i.theme)==null?void 0:R.background),i.theme&&(j.options.theme=i.theme),j.rows>0&&j.refresh(0,j.rows-1))},150);return()=>clearTimeout(B)},[i]),I.jsx("div",{ref:h,className:"terminal-container"})}function N2(){const{sessions:e,activeSessionId:i,switchSession:n,createTab:l,closeTab:o}=Jv();function h(f,_){f.stopPropagation(),o(_)}return I.jsxs("aside",{className:"tab-sidebar",children:[I.jsxs("div",{className:"tab-header",children:[I.jsx("span",{className:"tab-header-label",children:"Sessions"}),I.jsx("button",{className:"btn-new-tab",onClick:l,title:"New session","aria-label":"Create new session",children:"+"})]}),I.jsx("div",{className:"tab-list",role:"tablist","aria-label":"Terminal sessions",children:e.map(f=>I.jsxs("div",{className:`tab-item${f.id===i?" active":""}${f.connected?"":" disconnected"}`,role:"tab",tabIndex:0,"aria-selected":f.id===i,onClick:()=>n(f.id),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&n(f.id)},title:f.name,children:[I.jsx("span",{className:"tab-title",children:f.name||"Terminal"}),!f.connected&&I.jsx("span",{className:"disconnected-badge",children:"offline"}),I.jsx("button",{className:"btn-close-tab",onClick:_=>h(_,f.id),title:"Close session","aria-label":`Close session ${f.name}`,children:""})]},f.id))}),e.length===0&&I.jsx("div",{className:"tab-empty",children:"No sessions"})]})}function H2({onKey:e}){const[i,n]=T.useState(!1),[l,o]=T.useState(!1),[h,f]=T.useState(!1),[_,m]=T.useState(""),d=T.useRef(null),{activeSessionId:S,getTerminal:p}=fo();function y(R){if(!S)return;const q=p(S);q==null||q.scrollLines(R)}function w(){if(!S)return;const R=p(S);R==null||R.scrollToBottom()}function C(R){if(i){const q=R.charCodeAt(0);R.length===1&&q>=65&&q<=90?e(String.fromCharCode(q-64)):R.length===1&&q>=97&&q<=122?e(String.fromCharCode(q-96)):e(R),n(!1)}else l?(e("\x1B"+R),o(!1)):e(R)}function D(){var R;_?(e(_+"\r"),m("")):e("\r"),(R=d.current)==null||R.focus()}function A(R){R.key==="Enter"&&(R.preventDefault(),D())}function B(){n(R=>(R||o(!1),!R))}function j(){o(R=>(R||n(!1),!R))}return I.jsxs("div",{className:"mobile-bar",children:[h&&I.jsxs("div",{className:"bar-row extended-row",role:"toolbar","aria-label":"Extended keys",children:[I.jsx("button",{className:"kb",onClick:()=>C("\x1B"),"aria-label":"Escape",children:"Esc"}),I.jsx("button",{className:"kb",onClick:()=>C("	"),"aria-label":"Tab",children:"Tab"}),I.jsx("button",{className:`kb mod${i?" on":""}`,onClick:B,"aria-label":"Ctrl modifier","aria-pressed":i,children:"Ctrl"}),I.jsx("button",{className:`kb mod${l?" on":""}`,onClick:j,"aria-label":"Alt modifier","aria-pressed":l,children:"Alt"}),I.jsx("span",{className:"bar-sep","aria-hidden":"true"}),I.jsx("button",{className:"kb sym",onClick:()=>C("|"),"aria-label":"Pipe",children:"|"}),I.jsx("button",{className:"kb sym",onClick:()=>C("~"),"aria-label":"Tilde",children:"~"}),I.jsx("button",{className:"kb sym",onClick:()=>C("`"),"aria-label":"Backtick",children:"`"}),I.jsx("button",{className:"kb sym",onClick:()=>C("/"),"aria-label":"Slash",children:"/"}),I.jsx("span",{className:"bar-sep","aria-hidden":"true"}),I.jsx("button",{className:"kb arr",onClick:()=>C("\x1B[D"),"aria-label":"Arrow left",children:"Left"}),I.jsx("button",{className:"kb arr",onClick:()=>C("\x1B[A"),"aria-label":"Arrow up",children:"Up"}),I.jsx("button",{className:"kb arr",onClick:()=>C("\x1B[B"),"aria-label":"Arrow down",children:"Down"}),I.jsx("button",{className:"kb arr",onClick:()=>C("\x1B[C"),"aria-label":"Arrow right",children:"Right"})]}),I.jsxs("div",{className:"bar-row quick-row",role:"toolbar","aria-label":"Quick actions",children:[I.jsx("button",{className:"qb qb-yes",onClick:()=>e("y\r"),"aria-label":"Yes",children:"y"}),I.jsx("button",{className:"qb qb-no",onClick:()=>e("n\r"),"aria-label":"No",children:"n"}),I.jsx("button",{className:"qb qb-enter",onClick:()=>e("\r"),"aria-label":"Enter",children:"Enter"}),I.jsx("button",{className:"qb qb-cancel",onClick:()=>e(""),"aria-label":"Cancel",children:"Ctrl+C"}),I.jsx("span",{className:"bar-sep","aria-hidden":"true"}),I.jsx("button",{className:"qb qb-scroll",onClick:()=>y(-15),"aria-label":"Page up",children:"PgUp"}),I.jsx("button",{className:"qb qb-scroll",onClick:()=>y(15),"aria-label":"Page down",children:"PgDn"}),I.jsx("button",{className:"qb qb-scroll",onClick:w,"aria-label":"Scroll to bottom",children:"End"}),I.jsx("span",{className:"bar-sep","aria-hidden":"true"}),I.jsx("button",{className:`qb qb-toggle${h?" on":""}`,onClick:()=>f(R=>!R),"aria-label":h?"Hide extended keys":"Show extended keys","aria-expanded":h,children:"..."})]}),I.jsxs("div",{className:"bar-row input-row",children:[I.jsx("input",{ref:d,className:"cmd-input",type:"text",value:_,onChange:R=>m(R.target.value),onKeyDown:A,placeholder:"Type command...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,"aria-label":"Command input"}),I.jsx("button",{className:"send-btn",onClick:D,"aria-label":"Send command",children:"Send"})]})]})}const U2={disconnected:{label:"Disconnected",color:"text-gray-500",icon:""},connecting:{label:"Connecting...",color:"text-yellow-500",icon:""},authenticating:{label:"Authenticating...",color:"text-yellow-500",icon:""},connected:{label:"Connected",color:"text-green-500",icon:""},reconnecting:{label:"Reconnecting...",color:"text-orange-500",icon:""}};function q2(){const{state:e}=vl(),i=U2[e];return I.jsxs("div",{className:"connection-status",children:[I.jsx("span",{className:`icon ${i.color}`,children:i.icon}),I.jsx("span",{className:`label ${i.color}`,children:i.label})]})}function j2(){const e=ho(),{state:i,isConnected:n,disconnect:l,sendTerminalInput:o,sendTerminalResize:h}=vl(),{activeSessionId:f,options:_}=fo(),{tabs:m,createTab:d}=Jv();T.useEffect(()=>{i==="disconnected"&&e("/login")},[i,e]);function S(){l()}function p(w){f&&o(f,w)}const y=m.length>0;return I.jsxs("div",{className:"terminal-page",children:[I.jsxs("header",{className:"header-bar",children:[I.jsx(q2,{}),I.jsx("div",{className:"header-spacer"}),I.jsx("button",{className:"btn-disconnect",onClick:S,children:"Disconnect"})]}),n&&y?I.jsxs("div",{className:"main-layout",children:[y&&I.jsx(N2,{}),I.jsxs("div",{className:"terminal-column",children:[m.map(w=>I.jsx("div",{className:`terminal-area ${w.id===f?"":"terminal-area-hidden"}`,children:I.jsx(z2,{sessionId:w.id,options:_,onInput:C=>o(w.id,C),onBinaryInput:C=>o(w.id,C),onTerminalResize:(C,D)=>h(w.id,C,D)})},w.id)),I.jsx(H2,{onKey:p})]})]}):I.jsx("main",{className:"waiting-state",children:I.jsxs("div",{className:"waiting-content",children:[I.jsx("h2",{children:"No terminal sessions"}),I.jsx("p",{className:"waiting-detail",children:"Create a new session to get started."}),I.jsx("button",{className:"btn-create-session",onClick:d,children:"+ New Session"})]})})]})}function P2(){const[e,i]=T.useState(""),[n,l]=T.useState(!1),o=ho(),{state:h,error:f,isConnected:_,connect:m}=vl();T.useEffect(()=>{_&&o("/")},[_,o]),T.useEffect(()=>{f&&l(!1)},[f]);function d(S){S.preventDefault();const p=e.toUpperCase().replace(/\s/g,"");p.length===6&&(l(!0),m(p,()=>{o("/")}))}return h==="reconnecting"||h==="connecting"||h==="authenticating"?I.jsx("div",{className:"login-container",children:I.jsxs("div",{className:"login-box",children:[I.jsx("h1",{children:"Connecting..."}),I.jsx("p",{className:"subtitle",children:"Restoring your session"}),I.jsx("div",{className:"reconnecting-spinner"})]})}):I.jsx("div",{className:"login-container",children:I.jsxs("div",{className:"login-box",children:[I.jsx("h1",{children:"Connect to Terminal"}),I.jsx("p",{className:"subtitle",children:"Enter the session code shown on your Mac"}),I.jsxs("form",{onSubmit:d,children:[I.jsxs("div",{className:"input-wrapper",children:[I.jsx("label",{htmlFor:"code",className:"sr-only",children:"Session Code"}),I.jsx("input",{id:"code",type:"text",value:e,onChange:S=>i(S.target.value),placeholder:"ABC123",maxLength:6,autoComplete:"off",autoCapitalize:"characters",spellCheck:!1,className:"code-input",disabled:n})]}),f&&I.jsx("div",{className:"error-box",children:f}),I.jsx("button",{type:"submit",className:"btn-primary",disabled:e.length!==6||n,children:n?"Connecting...":"Connect"})]})]})})}function W2(){return I.jsx(Kb,{children:I.jsx(_1,{children:I.jsx(b1,{children:I.jsx(w1,{children:I.jsxs(yb,{children:[I.jsx(Ga,{path:"/",element:I.jsx(j2,{})}),I.jsx(Ga,{path:"/login",element:I.jsx(P2,{})}),I.jsx(Ga,{path:"*",element:I.jsx(pb,{to:"/login",replace:!0})})]})})})})})}Cy.createRoot(document.getElementById("root")).render(I.jsx(W2,{}));
